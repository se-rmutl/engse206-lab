# 6.6.4 Database & Sample Data - Agent Wallboard System

## ğŸ¯ à¸ à¸²à¸à¸£à¸§à¸¡

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ˆà¸°à¸­à¸˜à¸´à¸šà¸²à¸¢à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸­à¸‡ Agent Wallboard System à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰ **Hybrid Database Architecture** à¸„à¸·à¸­ **SQLite** à¸ªà¸³à¸«à¸£à¸±à¸š master data à¹à¸¥à¸° **MongoDB** à¸ªà¸³à¸«à¸£à¸±à¸š real-time data à¸£à¸§à¸¡à¸–à¸¶à¸‡ sample data à¸—à¸µà¹ˆà¹€à¸•à¸£à¸µà¸¢à¸¡à¹„à¸§à¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š à¸à¸£à¹‰à¸­à¸¡à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹à¸¥à¸°à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸—à¸µà¹ˆà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”

### ğŸ“ à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰
à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸šà¸à¸²à¸£à¸­à¹ˆà¸²à¸™à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰ à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¸ˆà¸°à¸ªà¸²à¸¡à¸²à¸£à¸–:
- âœ… à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹ƒà¸Šà¹‰ 2 database systems
- âœ… à¸£à¸¹à¹‰à¸ˆà¸±à¸ database schema à¹à¸¥à¸° table/collection structure
- âœ… à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹à¸¥à¸°à¹€à¸•à¸£à¸µà¸¢à¸¡ databases à¸à¸£à¹‰à¸­à¸¡ sample data
- âœ… à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸”à¹‰à¸§à¸¢à¸•à¸±à¸§à¹€à¸­à¸‡
- âœ… à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ SQLite à¹à¸¥à¸° MongoDB

---

## ğŸ—ï¸ Database Architecture Overview

### ğŸ¯ à¸—à¸³à¹„à¸¡à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ 2 Databases?

```
ğŸ“Š SQLite (Master Data)          ğŸƒ MongoDB (Real-time Data)
â”œâ”€â”€ ğŸ‘¥ agents (13 records)      â”œâ”€â”€ messages (dynamic)
â”œâ”€â”€ ğŸ¢ teams (3 records)        â”œâ”€â”€ agent_status (dynamic)
â””â”€â”€ âš™ï¸ system_config (8 records) â””â”€â”€ connection_logs (dynamic)
```

### ğŸ“Š SQLite - à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹ƒà¸Šà¹‰

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… **à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Server** - à¹€à¸›à¹‡à¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§ à¸à¸à¸à¸²à¸‡à¹ˆà¸²à¸¢
- âœ… **ACID Compliance** - à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ 100%
- âœ… **Foreign Keys** - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸•à¸²à¸£à¸²à¸‡à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
- âœ… **SQL Standard** - à¹ƒà¸Šà¹‰ SQL à¸˜à¸£à¸£à¸¡à¸”à¸²à¸—à¸µà¹ˆà¸„à¸¸à¹‰à¸™à¹€à¸„à¸¢

**à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥:**
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Agents à¹à¸¥à¸° Supervisors
- à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¸¡ (Teams)
- à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š (System Config)

### ğŸƒ MongoDB - à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹ƒà¸Šà¹‰

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âš¡ **à¹€à¸‚à¸µà¸¢à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸£à¹‡à¸§à¸¡à¸²à¸** - à¸£à¸­à¸‡à¸£à¸±à¸š real-time updates
- ğŸ“ˆ **Flexible Schema** - à¹€à¸à¸´à¹ˆà¸¡ fields à¹ƒà¸«à¸¡à¹ˆà¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢
- ğŸ” **Query Time-series** - à¸«à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸²à¸¡à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹€à¸£à¹‡à¸§
- ğŸ“Š **Aggregation** - à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢

**à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥:**
- à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡ Agents (à¸—à¸¸à¸à¸§à¸´à¸™à¸²à¸—à¸µ)
- à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ Supervisor à¹à¸¥à¸° Agents
- à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (Connection Logs)

---

## ğŸ“Š Part 1: SQLite Database

### ğŸ—„ï¸ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™

```bash
ğŸ“ à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¹„à¸Ÿà¸¥à¹Œ: database/sqlite/wallboard.db
ğŸ“ à¸‚à¸™à¸²à¸”à¹„à¸Ÿà¸¥à¹Œ: ~50KB (à¸à¸£à¹‰à¸­à¸¡ sample data)
ğŸ”— Connection String: sqlite:./database/sqlite/wallboard.db
```

### ğŸ“‹ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Tables

```sql
wallboard.db
â”œâ”€â”€ teams (3 records)
â”‚   â””â”€â”¬â”€ team_id (PK)
â”‚     â””â”€ supervisor_code â†’ agents.agent_code
â”‚
â”œâ”€â”€ agents (13 records)
â”‚   â”œâ”€â”¬â”€ agent_code (PK)
â”‚   â”‚ â””â”€ team_id â†’ teams.team_id (FK)
â”‚   â”œâ”€â”€â”€ 3 Supervisors (SP001-SP003)
â”‚   â””â”€â”€â”€ 10 Agents (AG001-AG010)
â”‚
â””â”€â”€ system_config (8 records)
    â””â”€â”€â”€ config_key (PK)
```

---

### 1ï¸âƒ£ Table: teams

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¸¡à¹à¸¥à¸°à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¹à¸•à¹ˆà¸¥à¸°à¸—à¸µà¸¡

**ğŸ“ Schema:**
```sql
CREATE TABLE teams (
    team_id INTEGER PRIMARY KEY AUTOINCREMENT,
    team_name VARCHAR(50) NOT NULL UNIQUE,
    supervisor_code VARCHAR(10),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT 1
);

-- Index à¸ªà¸³à¸«à¸£à¸±à¸š performance
CREATE INDEX idx_teams_supervisor ON teams(supervisor_code);
CREATE INDEX idx_teams_active ON teams(is_active);
```

**ğŸ“Š Sample Data (3 records):**
```sql
INSERT INTO teams (team_id, team_name, supervisor_code, description) VALUES
(1, 'Customer Service', 'SP001', 'Main customer service team'),
(2, 'Technical Support', 'SP002', 'Technical support specialists'),
(3, 'Sales Team', 'SP003', 'Sales and marketing team');
```

**ğŸ” à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
```
teams.supervisor_code â†’ agents.agent_code (WHERE role='supervisor')
teams.team_id â† agents.team_id
```

**ğŸ’¡ Query à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```sql
-- à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¸¡à¸à¸£à¹‰à¸­à¸¡à¸Šà¸·à¹ˆà¸­ Supervisor
SELECT 
    t.team_name,
    t.supervisor_code,
    a.agent_name as supervisor_name,
    t.description
FROM teams t
LEFT JOIN agents a ON t.supervisor_code = a.agent_code
WHERE t.is_active = 1;

/* à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:
Customer Service | SP001 | Sarah Wilson | Main customer service team
Technical Support | SP002 | Mike Johnson | Technical support specialists
Sales Team | SP003 | Lisa Chen | Sales and marketing team
*/
```

---

### 2ï¸âƒ£ Table: agents

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Agents à¹à¸¥à¸° Supervisors à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

**ğŸ“ Schema:**
```sql
CREATE TABLE agents (
    agent_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL UNIQUE,
    agent_name VARCHAR(100) NOT NULL,
    team_id INTEGER NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('agent', 'supervisor')),
    email VARCHAR(100),
    phone VARCHAR(20),
    hire_date DATE,
    is_active BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (team_id) REFERENCES teams(team_id)
);

-- Indexes à¸ªà¸³à¸«à¸£à¸±à¸š performance
CREATE INDEX idx_agents_code ON agents(agent_code);
CREATE INDEX idx_agents_team ON agents(team_id);
CREATE INDEX idx_agents_role ON agents(role);
```

**ğŸ“Š Sample Data (13 records):**

**ğŸ”¹ Supervisors (3 à¸„à¸™):**
```sql
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('SP001', 'Sarah Wilson', 1, 'supervisor', 'sarah.wilson@company.com', '555-0101', '2023-01-15'),
('SP002', 'Mike Johnson', 2, 'supervisor', 'mike.johnson@company.com', '555-0102', '2023-01-20'),
('SP003', 'Lisa Chen', 3, 'supervisor', 'lisa.chen@company.com', '555-0103', '2023-02-01');
```

**ğŸ”¹ Customer Service Team - Agents (4 à¸„à¸™):**
```sql
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG001', 'John Smith', 1, 'agent', 'john.smith@company.com', '555-0201', '2023-03-01'),
('AG002', 'Emma Davis', 1, 'agent', 'emma.davis@company.com', '555-0202', '2023-03-05'),
('AG003', 'Robert Brown', 1, 'agent', 'robert.brown@company.com', '555-0203', '2023-03-10'),
('AG004', 'Jennifer Wilson', 1, 'agent', 'jennifer.wilson@company.com', '555-0204', '2023-03-15');
```

**ğŸ”¹ Technical Support Team - Agents (3 à¸„à¸™):**
```sql
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG005', 'David Miller', 2, 'agent', 'david.miller@company.com', '555-0301', '2023-04-01'),
('AG006', 'Amanda Taylor', 2, 'agent', 'amanda.taylor@company.com', '555-0302', '2023-04-05'),
('AG007', 'Chris Anderson', 2, 'agent', 'chris.anderson@company.com', '555-0303', '2023-04-10');
```

**ğŸ”¹ Sales Team - Agents (3 à¸„à¸™):**
```sql
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG008', 'Michelle Garcia', 3, 'agent', 'michelle.garcia@company.com', '555-0401', '2023-05-01'),
('AG009', 'Kevin Martinez', 3, 'agent', 'kevin.martinez@company.com', '555-0402', '2023-05-05'),
('AG010', 'Jessica Rodriguez', 3, 'agent', 'jessica.rodriguez@company.com', '555-0403', '2023-05-10');
```

**ğŸ’¡ Query à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```sql
-- à¸”à¸¹à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
SELECT 
    t.team_name,
    a.agent_code,
    a.agent_name,
    a.role,
    a.email
FROM agents a
JOIN teams t ON a.team_id = t.team_id
WHERE a.is_active = 1
ORDER BY t.team_id, a.role DESC, a.agent_name;

-- à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™ Agents à¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸°à¸—à¸µà¸¡
SELECT 
    t.team_name,
    COUNT(CASE WHEN a.role = 'supervisor' THEN 1 END) as supervisors,
    COUNT(CASE WHEN a.role = 'agent' THEN 1 END) as agents,
    COUNT(*) as total
FROM teams t
LEFT JOIN agents a ON t.team_id = a.team_id AND a.is_active = 1
GROUP BY t.team_id, t.team_name;
```

---

### 3ï¸âƒ£ Table: system_config

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸šà¸•à¹ˆà¸²à¸‡à¹†

**ğŸ“ Schema:**
```sql
CREATE TABLE system_config (
    config_id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key VARCHAR(50) NOT NULL UNIQUE,
    config_value TEXT NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT 1,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_config_key ON system_config(config_key);
CREATE INDEX idx_config_active ON system_config(is_active);
```

**ğŸ“Š Sample Data (8 records):**
```sql
INSERT INTO system_config (config_key, config_value, description) VALUES
('status_timeout', '300', 'Auto-offline timeout in seconds'),
('message_retention', '30', 'Message retention in days'),
('max_concurrent_sessions', '1', 'Max sessions per agent'),
('notification_enabled', 'true', 'Enable desktop notifications'),
('websocket_timeout', '30000', 'WebSocket timeout in milliseconds'),
('api_rate_limit', '100', 'API requests per minute'),
('session_duration', '28800', 'Max session duration in seconds (8 hours)'),
('backup_interval', '86400', 'Database backup interval in seconds (24 hours)');
```

**ğŸ’¡ à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹ƒà¸™ Backend:**
```javascript
// à¸­à¹ˆà¸²à¸™à¸„à¹ˆà¸² config
const timeout = await getConfig('status_timeout'); // "300"
const enabled = await getConfig('notification_enabled'); // "true"
```

---

## ğŸƒ Part 2: MongoDB Database

### ğŸ—„ï¸ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™

```bash
ğŸ“ Database Name: wallboard
ğŸ”— Connection URI: mongodb://localhost:27017/wallboard
ğŸ“¦ Collections: 3 collections
```

### ğŸ“‹ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Collections

```
wallboard (database)
â”œâ”€â”€ messages (~100 documents per day)
â”‚   â”œâ”€â”€ Direct messages
â”‚   â””â”€â”€ Broadcast messages
â”‚
â”œâ”€â”€ agent_status (~1000 documents per day)
â”‚   â””â”€â”€ Status change history
â”‚
â””â”€â”€ connection_logs (~50 documents per day)
    â”œâ”€â”€ Connect events
    â””â”€â”€ Disconnect events
```

---

### 1ï¸âƒ£ Collection: messages

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸™à¸£à¸°à¸šà¸š (Direct à¹à¸¥à¸° Broadcast)

**ğŸ“ Schema (Mongoose):**
```javascript
const messageSchema = new mongoose.Schema({
  fromCode: {
    type: String,
    required: true,
    uppercase: true,
    index: true
  },
  toCode: {
    type: String,
    uppercase: true,
    index: true  // à¸ªà¸³à¸«à¸£à¸±à¸š direct messages
  },
  toTeamId: {
    type: Number,
    index: true  // à¸ªà¸³à¸«à¸£à¸±à¸š broadcast messages
  },
  content: {
    type: String,
    required: true,
    trim: true,
    maxlength: 500
  },
  type: {
    type: String,
    enum: ['direct', 'broadcast'],
    required: true
  },
  priority: {
    type: String,
    enum: ['low', 'normal', 'high'],
    default: 'normal'
  },
  isRead: {
    type: Boolean,
    default: false
  },
  readAt: {
    type: Date
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  }
}, {
  collection: 'messages',
  timestamps: true
});

// Compound indexes à¸ªà¸³à¸«à¸£à¸±à¸š query à¸—à¸µà¹ˆà¹€à¸£à¹‡à¸§
messageSchema.index({ toCode: 1, timestamp: -1 });
messageSchema.index({ toTeamId: 1, timestamp: -1 });
messageSchema.index({ fromCode: 1, timestamp: -1 });
```

**ğŸ“Š Sample Data:**
```javascript
// Direct Message à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡
{
  "_id": ObjectId("65a1b2c3d4e5f6789012345a"),
  "fromCode": "SP001",
  "toCode": "AG001",
  "content": "Please check your queue when you have time",
  "type": "direct",
  "priority": "normal",
  "isRead": false,
  "timestamp": ISODate("2024-01-15T10:30:00.000Z"),
  "createdAt": ISODate("2024-01-15T10:30:00.000Z"),
  "updatedAt": ISODate("2024-01-15T10:30:00.000Z")
}

// Broadcast Message à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡
{
  "_id": ObjectId("65a1b2c3d4e5f6789012345b"),
  "fromCode": "SP001",
  "toTeamId": 1,
  "content": "Team meeting at 2 PM today",
  "type": "broadcast",
  "priority": "high",
  "isRead": false,
  "timestamp": ISODate("2024-01-15T11:00:00.000Z"),
  "createdAt": ISODate("2024-01-15T11:00:00.000Z"),
  "updatedAt": ISODate("2024-01-15T11:00:00.000Z")
}
```

**ğŸ’¡ Query à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```javascript
// à¸«à¸²à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¸ªà¹ˆà¸‡à¸–à¸¶à¸‡ Agent à¸„à¸™à¸«à¸™à¸¶à¹ˆà¸‡ (Direct + Broadcast)
db.messages.find({
  $or: [
    { toCode: "AG001" },
    { toTeamId: 1 }
  ]
}).sort({ timestamp: -1 }).limit(10);

// à¸«à¸²à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸­à¹ˆà¸²à¸™
db.messages.find({
  toCode: "AG001",
  isRead: false
}).sort({ timestamp: -1 });

// à¸«à¸²à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ priority à¸ªà¸¹à¸‡
db.messages.find({
  priority: "high",
  timestamp: { $gte: ISODate("2024-01-15T00:00:00.000Z") }
}).sort({ timestamp: -1 });
```

---

### 2ï¸âƒ£ Collection: agent_status

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡ Agents

**ğŸ“ Schema (Mongoose):**
```javascript
const statusSchema = new mongoose.Schema({
  agentCode: {
    type: String,
    required: true,
    uppercase: true,
    index: true
  },
  status: {
    type: String,
    enum: ['Available', 'Busy', 'Break', 'Offline'],
    required: true
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  },
  teamId: {
    type: Number,
    index: true
  },
  duration: {
    type: Number  // à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ status à¸™à¸µà¹‰ (à¸§à¸´à¸™à¸²à¸—à¸µ)
  },
  sessionId: {
    type: String
  }
}, {
  collection: 'agent_status',
  timestamps: true
});

// Compound indexes
statusSchema.index({ agentCode: 1, timestamp: -1 });
statusSchema.index({ teamId: 1, timestamp: -1 });
statusSchema.index({ status: 1, timestamp: -1 });
```

**ğŸ“Š Sample Data:**
```javascript
// Status change à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡
{
  "_id": ObjectId("65a1b2c3d4e5f6789012345c"),
  "agentCode": "AG001",
  "status": "Available",
  "timestamp": ISODate("2024-01-15T09:00:00.000Z"),
  "teamId": 1,
  "duration": 3600,  // à¸­à¸¢à¸¹à¹ˆ Available 1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
  "sessionId": "session_20240115_090000",
  "createdAt": ISODate("2024-01-15T09:00:00.000Z"),
  "updatedAt": ISODate("2024-01-15T10:00:00.000Z")
}

{
  "_id": ObjectId("65a1b2c3d4e5f6789012345d"),
  "agentCode": "AG001",
  "status": "Busy",
  "timestamp": ISODate("2024-01-15T10:00:00.000Z"),
  "teamId": 1,
  "duration": 1800,  // à¸­à¸¢à¸¹à¹ˆ Busy 30 à¸™à¸²à¸—à¸µ
  "sessionId": "session_20240115_090000",
  "createdAt": ISODate("2024-01-15T10:00:00.000Z"),
  "updatedAt": ISODate("2024-01-15T10:30:00.000Z")
}
```

**ğŸ’¡ Query à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```javascript
// à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´ status à¸‚à¸­à¸‡ Agent
db.agent_status.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(20);

// à¸«à¸² status à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¸‚à¸­à¸‡ Agent
db.agent_status.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(1);

// à¸ªà¸£à¸¸à¸›à¹€à¸§à¸¥à¸²à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡ Agent
db.agent_status.aggregate([
  {
    $match: {
      agentCode: "AG001",
      timestamp: {
        $gte: ISODate("2024-01-15T00:00:00.000Z"),
        $lt: ISODate("2024-01-16T00:00:00.000Z")
      }
    }
  },
  {
    $group: {
      _id: "$status",
      totalDuration: { $sum: "$duration" },
      count: { $sum: 1 }
    }
  }
]);
```

---

### 3ï¸âƒ£ Collection: connection_logs

**ğŸ“ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:** à¹€à¸à¹‡à¸šà¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ WebSocket à¸‚à¸­à¸‡ Agents

**ğŸ“ Schema (Mongoose):**
```javascript
const connectionLogSchema = new mongoose.Schema({
  agentCode: {
    type: String,
    required: true,
    uppercase: true,
    index: true
  },
  eventType: {
    type: String,
    enum: ['connect', 'disconnect', 'reconnect'],
    required: true
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  },
  socketId: {
    type: String,
    required: true
  },
  ipAddress: {
    type: String
  },
  userAgent: {
    type: String
  },
  connectionDuration: {
    type: Number  // à¹€à¸§à¸¥à¸²à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (à¸§à¸´à¸™à¸²à¸—à¸µ)
  },
  disconnectReason: {
    type: String
  }
}, {
  collection: 'connection_logs',
  timestamps: true
});

// Compound indexes
connectionLogSchema.index({ agentCode: 1, timestamp: -1 });
connectionLogSchema.index({ eventType: 1, timestamp: -1 });
```

**ğŸ“Š Sample Data:**
```javascript
// Connect event
{
  "_id": ObjectId("65a1b2c3d4e5f6789012345e"),
  "agentCode": "AG001",
  "eventType": "connect",
  "timestamp": ISODate("2024-01-15T09:00:00.000Z"),
  "socketId": "Xk3m5n7p9q",
  "ipAddress": "192.168.1.100",
  "userAgent": "Agent Desktop App v1.0",
  "createdAt": ISODate("2024-01-15T09:00:00.000Z"),
  "updatedAt": ISODate("2024-01-15T09:00:00.000Z")
}

// Disconnect event
{
  "_id": ObjectId("65a1b2c3d4e5f6789012345f"),
  "agentCode": "AG001",
  "eventType": "disconnect",
  "timestamp": ISODate("2024-01-15T17:00:00.000Z"),
  "socketId": "Xk3m5n7p9q",
  "connectionDuration": 28800,  // 8 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
  "disconnectReason": "normal_logout",
  "createdAt": ISODate("2024-01-15T17:00:00.000Z"),
  "updatedAt": ISODate("2024-01-15T17:00:00.000Z")
}
```

**ğŸ’¡ Query à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```javascript
// à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸‚à¸­à¸‡ Agent
db.connection_logs.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(10);

// à¸«à¸²à¸§à¹ˆà¸² Agent à¸à¸³à¸¥à¸±à¸‡à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
db.connection_logs.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(1);

// à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ connection stability
db.connection_logs.aggregate([
  {
    $match: {
      agentCode: "AG001",
      eventType: "disconnect"
    }
  },
  {
    $group: {
      _id: "$disconnectReason",
      count: { $sum: 1 }
    }
  }
]);
```

---

## ğŸ› ï¸ Database Setup & Installation

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1: à¹€à¸•à¸£à¸µà¸¢à¸¡ Environment

**1.1 à¸ªà¸£à¹‰à¸²à¸‡ Folder Structure:**
```bash
mkdir -p database/sqlite
mkdir -p database/mongodb
```

**1.2 à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ .env:**
```bash
# Database Configuration
SQLITE_DB_PATH=./database/sqlite/wallboard.db
MONGODB_URI=mongodb://localhost:27017/wallboard
```

---

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2: Setup SQLite

**2.1 à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `database/sqlite/init.sql`:**
```sql
-- Agent Wallboard System - SQLite Schema
-- Version: 1.0

-- Enable foreign keys
PRAGMA foreign_keys = ON;

-- Create teams table
CREATE TABLE IF NOT EXISTS teams (
    team_id INTEGER PRIMARY KEY AUTOINCREMENT,
    team_name VARCHAR(50) NOT NULL UNIQUE,
    supervisor_code VARCHAR(10),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT 1
);

-- Create agents table
CREATE TABLE IF NOT EXISTS agents (
    agent_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL UNIQUE,
    agent_name VARCHAR(100) NOT NULL,
    team_id INTEGER NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('agent', 'supervisor')),
    email VARCHAR(100),
    phone VARCHAR(20),
    hire_date DATE,
    is_active BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (team_id) REFERENCES teams(team_id)
);

-- Create system_config table
CREATE TABLE IF NOT EXISTS system_config (
    config_id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key VARCHAR(50) NOT NULL UNIQUE,
    config_value TEXT NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT 1,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Create indexes
CREATE INDEX IF NOT EXISTS idx_teams_supervisor ON teams(supervisor_code);
CREATE INDEX IF NOT EXISTS idx_teams_active ON teams(is_active);
CREATE INDEX IF NOT EXISTS idx_agents_code ON agents(agent_code);
CREATE INDEX IF NOT EXISTS idx_agents_team ON agents(team_id);
CREATE INDEX IF NOT EXISTS idx_agents_role ON agents(role);
CREATE INDEX IF NOT EXISTS idx_config_key ON system_config(config_key);
```

**2.2 à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `database/sqlite/sample_data.sql`:**
```sql
-- Sample Data for Agent Wallboard System

-- Insert teams
INSERT INTO teams (team_id, team_name, supervisor_code, description) VALUES
(1, 'Customer Service', 'SP001', 'Main customer service team'),
(2, 'Technical Support', 'SP002', 'Technical support specialists'),
(3, 'Sales Team', 'SP003', 'Sales and marketing team');

-- Insert supervisors
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('SP001', 'Sarah Wilson', 1, 'supervisor', 'sarah.wilson@company.com', '555-0101', '2023-01-15'),
('SP002', 'Mike Johnson', 2, 'supervisor', 'mike.johnson@company.com', '555-0102', '2023-01-20'),
('SP003', 'Lisa Chen', 3, 'supervisor', 'lisa.chen@company.com', '555-0103', '2023-02-01');

-- Insert Customer Service agents
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG001', 'John Smith', 1, 'agent', 'john.smith@company.com', '555-0201', '2023-03-01'),
('AG002', 'Emma Davis', 1, 'agent', 'emma.davis@company.com', '555-0202', '2023-03-05'),
('AG003', 'Robert Brown', 1, 'agent', 'robert.brown@company.com', '555-0203', '2023-03-10'),
('AG004', 'Jennifer Wilson', 1, 'agent', 'jennifer.wilson@company.com', '555-0204', '2023-03-15');

-- Insert Technical Support agents
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG005', 'David Miller', 2, 'agent', 'david.miller@company.com', '555-0301', '2023-04-01'),
('AG006', 'Amanda Taylor', 2, 'agent', 'amanda.taylor@company.com', '555-0302', '2023-04-05'),
('AG007', 'Chris Anderson', 2, 'agent', 'chris.anderson@company.com', '555-0303', '2023-04-10');

-- Insert Sales agents
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG008', 'Michelle Garcia', 3, 'agent', 'michelle.garcia@company.com', '555-0401', '2023-05-01'),
('AG009', 'Kevin Martinez', 3, 'agent', 'kevin.martinez@company.com', '555-0402', '2023-05-05'),
('AG010', 'Jessica Rodriguez', 3, 'agent', 'jessica.rodriguez@company.com', '555-0403', '2023-05-10');

-- Insert system configuration
INSERT INTO system_config (config_key, config_value, description) VALUES
('status_timeout', '300', 'Auto-offline timeout in seconds'),
('message_retention', '30', 'Message retention in days'),
('max_concurrent_sessions', '1', 'Max sessions per agent'),
('notification_enabled', 'true', 'Enable desktop notifications'),
('websocket_timeout', '30000', 'WebSocket timeout in milliseconds'),
('api_rate_limit', '100', 'API requests per minute'),
('session_duration', '28800', 'Max session duration in seconds (8 hours)'),
('backup_interval', '86400', 'Database backup interval in seconds (24 hours)');
```

**2.3 à¸ªà¸£à¹‰à¸²à¸‡ Setup Script `database/sqlite/setup.sh`:**
```bash
#!/bin/bash

echo "ğŸ—„ï¸ Setting up SQLite Database..."

DB_PATH="wallboard.db"

# Remove existing database
if [ -f "$DB_PATH" ]; then
    echo "âš ï¸  Existing database found. Removing..."
    rm "$DB_PATH"
fi

# Create database and schema
echo "ğŸ“ Creating database schema..."
sqlite3 "$DB_PATH" < init.sql

if [ $? -ne 0 ]; then
    echo "âŒ Failed to create schema"
    exit 1
fi

# Insert sample data
echo "ğŸ“Š Inserting sample data..."
sqlite3 "$DB_PATH" < sample_data.sql

if [ $? -ne 0 ]; then
    echo "âŒ Failed to insert sample data"
    exit 1
fi

# Verify data
echo "ğŸ” Verifying data..."
AGENT_COUNT=$(sqlite3 "$DB_PATH" "SELECT COUNT(*) FROM agents;")
TEAM_COUNT=$(sqlite3 "$DB_PATH" "SELECT COUNT(*) FROM teams;")
CONFIG_COUNT=$(sqlite3 "$DB_PATH" "SELECT COUNT(*) FROM system_config;")

echo "âœ… SQLite Database setup completed!"
echo "ğŸ“Š Summary:"
echo "   - Teams: $TEAM_COUNT"
echo "   - Agents: $AGENT_COUNT"
echo "   - Configs: $CONFIG_COUNT"
echo ""
echo "ğŸ“ Database location: $(pwd)/$DB_PATH"
```

**2.4 à¸£à¸±à¸™ Setup (Linux/Mac):**
```bash
cd database/sqlite
chmod +x setup.sh
./setup.sh
```

**2.5 à¸£à¸±à¸™ Setup (Windows - PowerShell):**
```powershell
cd database\sqlite
sqlite3 wallboard.db < init.sql
sqlite3 wallboard.db < sample_data.sql
```

---

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 3: Setup MongoDB

**3.1 à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `database/mongodb/sample_data.js`:**
```javascript
const mongoose = require('mongoose');

// MongoDB Connection
const MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/wallboard';

// Schema Definitions
const messageSchema = new mongoose.Schema({
  fromCode: { type: String, required: true, uppercase: true },
  toCode: { type: String, uppercase: true },
  toTeamId: { type: Number },
  content: { type: String, required: true },
  type: { type: String, enum: ['direct', 'broadcast'], required: true },
  priority: { type: String, enum: ['low', 'normal', 'high'], default: 'normal' },
  isRead: { type: Boolean, default: false },
  readAt: { type: Date },
  timestamp: { type: Date, default: Date.now }
}, { collection: 'messages' });

const statusSchema = new mongoose.Schema({
  agentCode: { type: String, required: true, uppercase: true },
  status: { type: String, enum: ['Available', 'Busy', 'Break', 'Offline'], required: true },
  timestamp: { type: Date, default: Date.now },
  teamId: { type: Number },
  duration: { type: Number }
}, { collection: 'agent_status' });

const connectionLogSchema = new mongoose.Schema({
  agentCode: { type: String, required: true, uppercase: true },
  eventType: { type: String, enum: ['connect', 'disconnect', 'reconnect'], required: true },
  timestamp: { type: Date, default: Date.now },
  socketId: { type: String, required: true },
  ipAddress: { type: String },
  userAgent: { type: String },
  connectionDuration: { type: Number }
}, { collection: 'connection_logs' });

// Create Models
const Message = mongoose.model('Message', messageSchema);
const AgentStatus = mongoose.model('AgentStatus', statusSchema);
const ConnectionLog = mongoose.model('ConnectionLog', connectionLogSchema);

// Sample Data
async function insertSampleData() {
  try {
    console.log('ğŸ§¹ Clearing existing data...');
    await Message.deleteMany({});
    await AgentStatus.deleteMany({});
    await ConnectionLog.deleteMany({});

    console.log('ğŸ’¬ Inserting sample messages...');
    const sampleMessages = [
      {
        fromCode: "SP001",
        toCode: "AG001",
        content: "Good morning! Ready for the day?",
        type: "direct",
        priority: "normal",
        timestamp: new Date(Date.now() - 3600000),
        isRead: true,
        readAt: new Date(Date.now() - 3500000)
      },
      {
        fromCode: "SP001",
        toTeamId: 1,
        content: "Team meeting at 2 PM today",
        type: "broadcast",
        priority: "high",
        timestamp: new Date(Date.now() - 1800000),
        isRead: false
      },
      {
        fromCode: "SP002",
        toCode: "AG005",
        content: "Please check the technical queue",
        type: "direct",
        priority: "normal",
        timestamp: new Date(Date.now() - 900000),
        isRead: false
      },
      {
        fromCode: "SP002",
        toCode: "AG006",
        content: "Great job on handling that complex case!",
        type: "direct",
        priority: "normal",
        timestamp: new Date(Date.now() - 5400000),
        isRead: true,
        readAt: new Date(Date.now() - 5300000)
      },
      {
        fromCode: "SP003",
        toTeamId: 3,
        content: "Great sales numbers this week!",
        type: "broadcast",
        priority: "normal",
        timestamp: new Date(Date.now() - 7200000),
        isRead: true
      },
      {
        fromCode: "SP003",
        toCode: "AG008",
        content: "Can you follow up with client ABC?",
        type: "direct",
        priority: "high",
        timestamp: new Date(Date.now() - 600000),
        isRead: false
      }
    ];
    await Message.insertMany(sampleMessages);

    console.log('ğŸ“Š Inserting sample status logs...');
    const sampleStatusLogs = [
      // AG001 status changes
      {
        agentCode: "AG001",
        status: "Available",
        timestamp: new Date(Date.now() - 7200000),
        teamId: 1,
        duration: 3600
      },
      {
        agentCode: "AG001",
        status: "Busy",
        timestamp: new Date(Date.now() - 3600000),
        teamId: 1,
        duration: 1800
      },
      // AG002 status changes
      {
        agentCode: "AG002",
        status: "Available",
        timestamp: new Date(Date.now() - 14400000),
        teamId: 1,
        duration: 7200
      },
      {
        agentCode: "AG002",
        status: "Break",
        timestamp: new Date(Date.now() - 7200000),
        teamId: 1,
        duration: 900
      },
      // AG003 status changes
      {
        agentCode: "AG003",
        status: "Available",
        timestamp: new Date(Date.now() - 10800000),
        teamId: 1,
        duration: 5400
      },
      // AG005 status changes
      {
        agentCode: "AG005",
        status: "Busy",
        timestamp: new Date(Date.now() - 1800000),
        teamId: 2,
        duration: 1500
      },
      // AG006 status changes
      {
        agentCode: "AG006",
        status: "Available",
        timestamp: new Date(Date.now() - 9000000),
        teamId: 2,
        duration: 4500
      },
      // AG008 status changes
      {
        agentCode: "AG008",
        status: "Busy",
        timestamp: new Date(Date.now() - 3600000),
        teamId: 3,
        duration: 2700
      },
      // AG009 status changes
      {
        agentCode: "AG009",
        status: "Available",
        timestamp: new Date(Date.now() - 7200000),
        teamId: 3,
        duration: 7200
      }
    ];
    await AgentStatus.insertMany(sampleStatusLogs);

    console.log('ğŸ”— Inserting sample connection logs...');
    const sampleConnectionLogs = [
      // AG001 connections
      {
        agentCode: "AG001",
        eventType: "connect",
        timestamp: new Date(Date.now() - 28800000),
        socketId: "socket_ag001_001",
        ipAddress: "192.168.1.100",
        userAgent: "Agent Desktop App v1.0"
      },
      {
        agentCode: "AG001",
        eventType: "disconnect",
        timestamp: new Date(Date.now() - 3600000),
        socketId: "socket_ag001_001",
        connectionDuration: 25200
      },
      // AG002 connections
      {
        agentCode: "AG002",
        eventType: "connect",
        timestamp: new Date(Date.now() - 14400000),
        socketId: "socket_ag002_001",
        ipAddress: "192.168.1.101",
        userAgent: "Agent Desktop App v1.0"
      },
      // AG003 connections
      {
        agentCode: "AG003",
        eventType: "connect",
        timestamp: new Date(Date.now() - 10800000),
        socketId: "socket_ag003_001",
        ipAddress: "192.168.1.102",
        userAgent: "Agent Desktop App v1.0"
      },
      // AG005 connections
      {
        agentCode: "AG005",
        eventType: "connect",
        timestamp: new Date(Date.now() - 7200000),
        socketId: "socket_ag005_001",
        ipAddress: "192.168.1.105",
        userAgent: "Agent Desktop App v1.0"
      },
      // AG006 connections
      {
        agentCode: "AG006",
        eventType: "connect",
        timestamp: new Date(Date.now() - 9000000),
        socketId: "socket_ag006_001",
        ipAddress: "192.168.1.106",
        userAgent: "Agent Desktop App v1.0"
      },
      {
        agentCode: "AG006",
        eventType: "disconnect",
        timestamp: new Date(Date.now() - 4500000),
        socketId: "socket_ag006_001",
        connectionDuration: 4500
      },
      // AG008 connections
      {
        agentCode: "AG008",
        eventType: "connect",
        timestamp: new Date(Date.now() - 5400000),
        socketId: "socket_ag008_001",
        ipAddress: "192.168.1.108",
        userAgent: "Agent Desktop App v1.0"
      }
    ];
    await ConnectionLog.insertMany(sampleConnectionLogs);

    // Verify
    const messageCount = await Message.countDocuments();
    const statusCount = await AgentStatus.countDocuments();
    const logCount = await ConnectionLog.countDocuments();

    console.log('âœ… Sample data inserted successfully!');
    console.log('ğŸ“Š Summary:');
    console.log(`   - Messages: ${messageCount} records`);
    console.log(`   - Status logs: ${statusCount} records`);
    console.log(`   - Connection logs: ${logCount} records`);

  } catch (error) {
    console.error('âŒ Error inserting sample data:', error);
    throw error;
  }
}

// Main Setup Function with Error Handling
async function setupMongoDB() {
  let retries = 3;
  
  while (retries > 0) {
    try {
      console.log('ğŸƒ Connecting to MongoDB...');
      await mongoose.connect(MONGODB_URI);
      console.log('âœ… Connected to MongoDB');

      await insertSampleData();
      
      console.log('ğŸš€ MongoDB setup completed!');
      return;
      
    } catch (error) {
      retries--;
      console.error(`âŒ MongoDB setup failed: ${error.message}`);
      
      if (retries > 0) {
        console.log(`âš ï¸  Retrying... (${retries} attempts left)`);
        await new Promise(resolve => setTimeout(resolve, 3000));
      } else {
        console.error('âŒ All retry attempts failed');
        throw error;
      }
    } finally {
      if (mongoose.connection.readyState === 1) {
        await mongoose.disconnect();
      }
    }
  }
}

// Run if called directly
if (require.main === module) {
  setupMongoDB().catch(error => {
    console.error('Fatal error:', error);
    process.exit(1);
  });
}

module.exports = { setupMongoDB, insertSampleData };
```

**3.2 à¸ªà¸£à¹‰à¸²à¸‡ Setup Script `database/mongodb/setup.sh`:**
```bash
#!/bin/bash

echo "ğŸƒ Setting up MongoDB..."

# Check if MongoDB is running
if ! mongosh --eval "db.adminCommand('ping')" >/dev/null 2>&1; then
    echo "âŒ MongoDB is not running. Please start MongoDB first."
    echo ""
    echo "Start MongoDB:"
    echo "  Windows: net start MongoDB"
    echo "  macOS: brew services start mongodb-community"
    echo "  Linux: sudo systemctl start mongod"
    exit 1
fi

echo "âœ… MongoDB is running"

# Install dependencies
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ Installing dependencies..."
    npm install mongoose
fi

# Run sample data script
echo "ğŸ“Š Creating collections and inserting sample data..."
node sample_data.js

if [ $? -ne 0 ]; then
    echo "âŒ Failed to setup MongoDB"
    exit 1
fi

echo ""
echo "ğŸ” Verify with:"
echo "   mongosh wallboard --eval 'show collections'"
echo "   mongosh wallboard --eval 'db.messages.countDocuments()'"
```

**3.3 à¸£à¸±à¸™ Setup (Linux/Mac):**
```bash
cd database/mongodb
chmod +x setup.sh
./setup.sh
```

**3.4 à¸£à¸±à¸™ Setup (Windows):**
```powershell
cd database\mongodb
npm install mongoose
node sample_data.js
```

---

## âœ… Database Verification

### ğŸ” SQLite Verification

**à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸”à¹‰à¸§à¸¢ Command Line:**
```bash
cd database/sqlite

# 1. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ˆà¸³à¸™à¸§à¸™ records
sqlite3 wallboard.db "SELECT COUNT(*) FROM agents;"
# Expected: 13

sqlite3 wallboard.db "SELECT COUNT(*) FROM teams;"
# Expected: 3

# 2. à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ agents à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
sqlite3 wallboard.db "SELECT agent_code, agent_name, role FROM agents ORDER BY role DESC, agent_name;"

# 3. à¸”à¸¹à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¸¡
sqlite3 wallboard.db "
SELECT 
    t.team_name,
    COUNT(CASE WHEN a.role='agent' THEN 1 END) as agents
FROM teams t
LEFT JOIN agents a ON t.team_id = a.team_id
GROUP BY t.team_id;
"
```

**à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸”à¹‰à¸§à¸¢ SQLite Browser:**
1. à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” [DB Browser for SQLite](https://sqlitebrowser.org/)
2. à¹€à¸›à¸´à¸”à¹„à¸Ÿà¸¥à¹Œ `database/sqlite/wallboard.db`
3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š:
   - Table `teams` à¸¡à¸µ 3 records
   - Table `agents` à¸¡à¸µ 13 records
   - Table `system_config` à¸¡à¸µ 8 records

---

### ğŸ” MongoDB Verification

**à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸”à¹‰à¸§à¸¢ mongosh:**
```bash
# à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆ MongoDB Shell
mongosh wallboard

# 1. à¸”à¸¹ collections à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
show collections
# Expected: messages, agent_status, connection_logs

# 2. à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™ documents
db.messages.countDocuments()
# Expected: 4+

db.agent_status.countDocuments()
# Expected: 4+

db.connection_logs.countDocuments()
# Expected: 3+

# 3. à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡
db.messages.find().limit(3).pretty()

db.agent_status.find().sort({timestamp: -1}).limit(3).pretty()

# 4. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š indexes
db.messages.getIndexes()
db.agent_status.getIndexes()
```

**à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸”à¹‰à¸§à¸¢ MongoDB Compass:**
1. à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” [MongoDB Compass](https://www.mongodb.com/products/compass)
2. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­: `mongodb://localhost:27017`
3. à¹€à¸¥à¸·à¸­à¸ database `wallboard`
4. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š collections à¹à¸¥à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

---

## ğŸ§ª Testing Queries

### ğŸ“Š SQLite - Useful Queries

```sql
-- 1. Login Verification (à¸—à¸”à¸ªà¸­à¸š Authentication)
SELECT agent_code, agent_name, team_id, role 
FROM agents 
WHERE agent_code = 'AG001' AND is_active = 1;

-- 2. Get Team Members (à¸—à¸”à¸ªà¸­à¸š Supervisor Dashboard)
SELECT a.agent_code, a.agent_name, a.email
FROM agents a
WHERE a.team_id = 1 AND a.role = 'agent' AND a.is_active = 1
ORDER BY a.agent_name;

-- 3. Get Supervisor Info
SELECT a.agent_code, a.agent_name, t.team_name
FROM agents a
JOIN teams t ON a.team_id = t.team_id
WHERE a.agent_code = 'SP001';

-- 4. System Configuration
SELECT config_key, config_value, description
FROM system_config
WHERE is_active = 1
ORDER BY config_key;

-- 5. Team Statistics
SELECT 
    t.team_name,
    t.supervisor_code,
    COUNT(a.agent_id) as total_agents
FROM teams t
LEFT JOIN agents a ON t.team_id = a.team_id AND a.role = 'agent'
WHERE t.is_active = 1
GROUP BY t.team_id
ORDER BY t.team_name;
```

---

### ğŸƒ MongoDB - Useful Queries

```javascript
// 1. Get Messages for Agent
db.messages.find({
  $or: [
    { toCode: "AG001" },
    { toTeamId: 1 }
  ]
}).sort({ timestamp: -1 }).limit(10);

// 2. Get Unread Messages
db.messages.find({
  toCode: "AG001",
  isRead: false
}).sort({ timestamp: -1 });

// 3. Get Agent Status History
db.agent_status.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(10);

// 4. Get Current Status
db.agent_status.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(1);

// 5. Get Connection Activity
db.connection_logs.find({
  agentCode: "AG001"
}).sort({ timestamp: -1 }).limit(5);

// 6. Team Status Summary
db.agent_status.aggregate([
  {
    $match: {
      teamId: 1,
      timestamp: { 
        $gte: new Date(Date.now() - 86400000) // Last 24 hours
      }
    }
  },
  {
    $group: {
      _id: "$agentCode",
      currentStatus: { $last: "$status" },
      lastUpdate: { $last: "$timestamp" }
    }
  }
]);

// 7. Message Statistics
db.messages.aggregate([
  {
    $group: {
      _id: "$type",
      count: { $sum: 1 },
      unread: { 
        $sum: { $cond: [{ $eq: ["$isRead", false] }, 1, 0] }
      }
    }
  }
]);
```

---

## ğŸ”„ Data Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SQLite (Master Data)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  teams   â”‚â†â”€â”€â”€â”€â”€â”¬â”€â”€â”‚     agents         â”‚   â”‚
â”‚  â”‚          â”‚      â”‚  â”‚                    â”‚   â”‚
â”‚  â”‚ team_id  â”‚      â”‚  â”‚ agent_code (PK)    â”‚   â”‚
â”‚  â”‚ team_nameâ”‚      â”‚  â”‚ agent_name         â”‚   â”‚
â”‚  â”‚ supervisor_code  â”‚  â”‚ team_id (FK)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚ role               â”‚   â”‚
â”‚                    â”‚  â”‚ (agent/supervisor) â”‚   â”‚
â”‚                    â””â”€â”€â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ system_config   â”‚                            â”‚
â”‚  â”‚                 â”‚                            â”‚
â”‚  â”‚ config_key (PK) â”‚                            â”‚
â”‚  â”‚ config_value    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
                   agent_code
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MongoDB (Real-time Data)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   messages      â”‚  â”‚   agent_status       â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                      â”‚ â”‚
â”‚  â”‚ fromCode        â”‚  â”‚ agentCode            â”‚ â”‚
â”‚  â”‚ toCode          â”‚  â”‚ status               â”‚ â”‚
â”‚  â”‚ toTeamId        â”‚  â”‚ timestamp            â”‚ â”‚
â”‚  â”‚ content         â”‚  â”‚ teamId               â”‚ â”‚
â”‚  â”‚ type            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ timestamp       â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                       â”‚  connection_logs     â”‚ â”‚
â”‚                       â”‚                      â”‚ â”‚
â”‚                       â”‚ agentCode            â”‚ â”‚
â”‚                       â”‚ eventType            â”‚ â”‚
â”‚                       â”‚ timestamp            â”‚ â”‚
â”‚                       â”‚ socketId             â”‚ â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Maintenance Scripts

### ğŸ§¹ Reset Database Script

à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `database/reset_all.sh`:
```bash
#!/bin/bash

echo "âš ï¸  This will DELETE all data and reset to initial state!"
echo "Continue? (yes/no)"
read -r response

if [ "$response" != "yes" ]; then
    echo "âŒ Reset cancelled"
    exit 0
fi

echo ""
echo "ğŸ§¹ Resetting databases..."

# Reset SQLite
echo "ğŸ“Š Resetting SQLite..."
cd sqlite
./setup.sh
cd ..

# Reset MongoDB
echo "ğŸƒ Resetting MongoDB..."
mongosh wallboard --eval "db.dropDatabase()" --quiet
cd mongodb
node sample_data.js
cd ..

echo ""
echo "âœ… Databases reset completed!"
echo ""
echo "ğŸ” Verify:"
echo "   SQLite: sqlite3 sqlite/wallboard.db 'SELECT COUNT(*) FROM agents;'"
echo "   MongoDB: mongosh wallboard --eval 'db.messages.countDocuments()'"
```

### ğŸ’¾ Backup Script

à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `database/backup.sh`:
```bash
#!/bin/bash

BACKUP_DIR="backups/$(date +%Y%m%d_%H%M%S)"
mkdir -p "$BACKUP_DIR"

echo "ğŸ’¾ Creating backup..."

# Backup SQLite
echo "ğŸ“Š Backing up SQLite..."
cp sqlite/wallboard.db "$BACKUP_DIR/"

# Backup MongoDB
echo "ğŸƒ Backing up MongoDB..."
mongodump --db wallboard --out "$BACKUP_DIR/mongodb" --quiet

echo ""
echo "âœ… Backup completed!"
echo "ğŸ“ Location: $BACKUP_DIR"
echo ""
ls -lh "$BACKUP_DIR"
```

---

## ğŸ“ Sample Login Credentials

### ğŸ‘¨â€ğŸ’¼ Supervisors (à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸”à¸ªà¸­à¸š Supervisor Dashboard)

```
SP001 - Sarah Wilson (Customer Service Team)
SP002 - Mike Johnson (Technical Support Team)
SP003 - Lisa Chen (Sales Team)
```

### ğŸ‘¥ Agents (à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸”à¸ªà¸­à¸š Agent Desktop App)

**Customer Service Team (Team ID: 1):**
```
AG001 - John Smith
AG002 - Emma Davis
AG003 - Robert Brown
AG004 - Jennifer Wilson
```

**Technical Support Team (Team ID: 2):**
```
AG005 - David Miller
AG006 - Amanda Taylor
AG007 - Chris Anderson
```

**Sales Team (Team ID: 3):**
```
AG008 - Michelle Garcia
AG009 - Kevin Martinez
AG010 - Jessica Rodriguez
```

---

## ğŸ¯ Testing Scenarios

### Scenario 1: Agent Login à¹à¸¥à¸° Status Update

```bash
# 1. Agent Login (à¹ƒà¸Šà¹‰ SQLite)
SELECT * FROM agents WHERE agent_code = 'AG001';

# 2. Status Update (à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡ MongoDB)
# Agent à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°à¹€à¸›à¹‡à¸™ "Available"
db.agent_status.insertOne({
  agentCode: "AG001",
  status: "Available",
  timestamp: new Date(),
  teamId: 1
});

# 3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Status à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
db.agent_status.find({ agentCode: "AG001" })
  .sort({ timestamp: -1 })
  .limit(1);
```

### Scenario 2: Supervisor à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡

```bash
# 1. Supervisor Login (à¹ƒà¸Šà¹‰ SQLite)
SELECT a.*, t.team_name 
FROM agents a
JOIN teams t ON a.team_id = t.team_id
WHERE a.agent_code = 'SP001';

# 2. à¸”à¸¹à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­ Team Members
SELECT agent_code, agent_name 
FROM agents 
WHERE team_id = 1 AND role = 'agent';

# 3. à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ Direct (à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡ MongoDB)
db.messages.insertOne({
  fromCode: "SP001",
  toCode: "AG001",
  content: "Please check your queue",
  type: "direct",
  priority: "normal",
  timestamp: new Date(),
  isRead: false
});

# 4. Agent à¸­à¹ˆà¸²à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
db.messages.find({ toCode: "AG001", isRead: false })
  .sort({ timestamp: -1 });
```

### Scenario 3: Broadcast Message

```bash
# 1. Supervisor à¸ªà¹ˆà¸‡ Broadcast à¹„à¸›à¸—à¸±à¹‰à¸‡à¸—à¸µà¸¡
db.messages.insertOne({
  fromCode: "SP001",
  toTeamId: 1,
  content: "Team meeting at 2 PM",
  type: "broadcast",
  priority: "high",
  timestamp: new Date(),
  isRead: false
});

# 2. Agents à¹ƒà¸™à¸—à¸µà¸¡à¸­à¹ˆà¸²à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
# (à¹ƒà¸Šà¹‰ team_id à¸ˆà¸²à¸ SQLite + toTeamId à¸ˆà¸²à¸ MongoDB)
db.messages.find({ toTeamId: 1, type: "broadcast" })
  .sort({ timestamp: -1 });
```

---

## ğŸš¨ Troubleshooting

### âŒ SQLite Issues

**Problem: "unable to open database file"**
```bash
# Solution: à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š path à¹à¸¥à¸° permissions
ls -l database/sqlite/wallboard.db
chmod 644 database/sqlite/wallboard.db
```

**Problem: "FOREIGN KEY constraint failed"**
```bash
# Solution: à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š foreign key constraints
sqlite3 wallboard.db "PRAGMA foreign_keys = ON;"
sqlite3 wallboard.db "PRAGMA foreign_key_check;"
```

**Problem: "table already exists"**
```bash
# Solution: à¸¥à¸š database à¹à¸¥à¹‰à¸§à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆ
rm database/sqlite/wallboard.db
cd database/sqlite && ./setup.sh
```

---

### âŒ MongoDB Issues

**Problem: "MongoServerError: connect ECONNREFUSED"**
```bash
# Solution: à¹€à¸£à¸´à¹ˆà¸¡ MongoDB service
# Windows
net start MongoDB

# macOS
brew services start mongodb-community

# Linux
sudo systemctl start mongod
```

**Problem: "Database not found"**
```bash
# Solution: à¸£à¸±à¸™ sample data script à¹ƒà¸«à¸¡à¹ˆ
cd database/mongodb
node sample_data.js
```

**Problem: "Cannot find module 'mongoose'"**
```bash
# Solution: à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies
cd database/mongodb
npm install mongoose
```

---

## âœ… Verification Checklist

### ğŸ“‹ SQLite Verification
- [ ] à¹„à¸Ÿà¸¥à¹Œ `wallboard.db` à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ `database/sqlite/`
- [ ] Table `teams` à¸¡à¸µ 3 records
- [ ] Table `agents` à¸¡à¸µ 13 records (3 supervisors + 10 agents)
- [ ] Table `system_config` à¸¡à¸µ 8 records
- [ ] Foreign keys à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰ (team_id references)
- [ ] Indexes à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¹‰à¸§
- [ ] à¸ªà¸²à¸¡à¸²à¸£à¸– query à¹„à¸”à¹‰à¸›à¸à¸•à¸´

### ğŸ“‹ MongoDB Verification
- [ ] MongoDB service à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™
- [ ] Database `wallboard` à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¹‰à¸§
- [ ] Collection `messages` à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (4+ documents)
- [ ] Collection `agent_status` à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (4+ documents)
- [ ] Collection `connection_logs` à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (3+ documents)
- [ ] Indexes à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¹‰à¸§
- [ ] à¸ªà¸²à¸¡à¸²à¸£à¸– query à¹„à¸”à¹‰à¸›à¸à¸•à¸´

### ğŸ“‹ Integration Verification
- [ ] Agent codes à¹ƒà¸™ SQLite à¸•à¸£à¸‡à¸à¸±à¸š MongoDB
- [ ] Team IDs à¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸™à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¸£à¸°à¸šà¸š
- [ ] Sample login credentials à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰
- [ ] Relationships à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (teams â†” agents)

---

## ğŸ‰ à¸ªà¸£à¸¸à¸›

### à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š:

**ğŸ“Š SQLite:**
- à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸¥à¸±à¸à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸šà¹ˆà¸­à¸¢
- 3 tables à¸ªà¸³à¸„à¸±à¸: teams, agents, system_config
- 13 sample users à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- Foreign keys à¸£à¸±à¸à¸©à¸²à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

**ğŸƒ MongoDB:**
- à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ real-time à¸—à¸µà¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸šà¹ˆà¸­à¸¢
- 3 collections: messages, agent_status, connection_logs
- Flexible schema à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡
- Indexes à¹€à¸à¸·à¹ˆà¸­ performance

**ğŸ”— Integration:**
- à¹ƒà¸Šà¹‰ `agent_code` à¹€à¸›à¹‡à¸™ key à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹‚à¸¢à¸‡à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¸£à¸°à¸šà¸š
- SQLite à¹€à¸à¹‡à¸š "WHO" (agents, teams)
- MongoDB à¹€à¸à¹‡à¸š "WHAT/WHEN" (messages, status, logs)

---

## ğŸ“š Next Steps

à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸ setup databases à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§:

1. âœ… **Database à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™**
2. â­ï¸ **[6.6.2 Backend Server Code](./6.6.2-Backend-Server-Code-Guide.md)** - à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰ databases à¹ƒà¸™à¹‚à¸„à¹‰à¸”
3. â­ï¸ **[6.6.3 Frontend Applications](./6.6.3.1-Frontend-Applications-Electron-Agent-App.md)** - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ UI à¸à¸±à¸š backend

**ğŸš€ Databases à¸à¸£à¹‰à¸­à¸¡à¹à¸¥à¹‰à¸§! à¸•à¹ˆà¸­à¹„à¸›: Backend Development**