à¹„à¸”à¹‰à¸„à¸£à¸±à¸š à¸œà¸¡à¸ˆà¸°à¸›à¸£à¸±à¸šà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¹‰à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œà¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸«à¸±à¸§à¸‚à¹‰à¸­ code à¸‚à¸­à¸‡à¹„à¸Ÿà¸¥à¹Œà¸™à¸±à¹‰à¸™à¹† à¹€à¸¥à¸¢ à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸à¹ƒà¸™à¸à¸²à¸£à¸­à¹ˆà¸²à¸™à¹à¸¥à¸°à¸—à¸³à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ

---

# 6.6.3.2 Frontend - Supervisor Dashboard (Complete Guide V2.0)

## ğŸ“– à¸ªà¸²à¸£à¸šà¸±à¸
1. [à¸ à¸²à¸à¸£à¸§à¸¡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š](#overview)
2. [Setup & Installation](#setup)
3. [Project Structure](#structure)
4. [Source Code](#source-code)

---

<a name="overview"></a>
## 1. à¸ à¸²à¸à¸£à¸§à¸¡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡ Supervisor Dashboard

### ğŸ¯ Dashboard à¸—à¸³à¸­à¸°à¹„à¸£?

**Supervisor Dashboard** à¹€à¸›à¹‡à¸™à¹€à¸§à¹‡à¸šà¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™à¸ªà¸³à¸«à¸£à¸±à¸š Supervisor à¸•à¸´à¸”à¸•à¸²à¸¡à¸—à¸µà¸¡ Agent à¹à¸šà¸š real-time

**à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸«à¸¥à¸±à¸:**
```
1. Supervisor à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸”à¹‰à¸§à¸¢à¸£à¸«à¸±à¸ª (SP001)
2. Dashboard à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Agents à¹ƒà¸™à¸—à¸µà¸¡
3. à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ WebSocket à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸š real-time updates
4. à¹à¸ªà¸”à¸‡à¸ªà¸–à¸²à¸™à¸° Agents à¹à¸¥à¸°à¸ªà¸–à¸´à¸•à¸´à¸—à¸µà¸¡
5. Supervisor à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸–à¸¶à¸‡ Agents
```

### ğŸ”„ Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SUPERVISOR DASHBOARD                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   HTTP API     â”‚         â”‚   WebSocket     â”‚
        â”‚   (REST)       â”‚         â”‚   (Real-time)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â”‚  1. Login                 â”‚  3. Listen events:
                â”‚  2. Get team data         â”‚     - agent_status_update
                â”‚  3. Send messages         â”‚     - agent_connected
                â”‚                           â”‚     - agent_disconnected
                â”‚                           â”‚     - new_message
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Backend Server   â”‚
                    â”‚  (Node.js)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  SQLite        â”‚  â”‚  MongoDB    â”‚
            â”‚  (Agents info) â”‚  â”‚  (Status,   â”‚
            â”‚                â”‚  â”‚   Messages) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“± User Flow

```
[Login Page]
    â”‚
    â”œâ”€â†’ à¸à¸£à¸­à¸ Supervisor Code (SP001)
    â”œâ”€â†’ à¸à¸” Sign In
    â”œâ”€â†’ Backend à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š
    â”‚
    â–¼
[Dashboard]
    â”‚
    â”œâ”€â†’ à¹à¸ªà¸”à¸‡ Team Overview (à¸ªà¸–à¸´à¸•à¸´)
    â”œâ”€â†’ à¹à¸ªà¸”à¸‡ Agent Cards (à¹à¸•à¹ˆà¸¥à¸°à¸„à¸™)
    â”œâ”€â†’ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ WebSocket
    â”‚
    â”œâ”€â†’ à¸£à¸±à¸š real-time updates:
    â”‚   â”œâ”€ Agent à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ status â†’ Card à¸­à¸±à¸à¹€à¸”à¸—
    â”‚   â”œâ”€ Agent online/offline â†’ à¸ªà¸µà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™
    â”‚   â””â”€ Message à¹ƒà¸«à¸¡à¹ˆ â†’ à¹à¸ªà¸”à¸‡ notification
    â”‚
    â””â”€â†’ Actions:
        â”œâ”€ à¸à¸£à¸­à¸‡ Agent à¸•à¸²à¸¡ status
        â”œâ”€ à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸–à¸¶à¸‡ Agent
        â””â”€ Logout
```

---

<a name="setup"></a>
## 2. Setup & Installation

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1: à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸„

```bash
npx create-react-app supervisor-dashboard
cd supervisor-dashboard
```

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2: à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Dependencies

```bash
# Material-UI
npm install @mui/material @emotion/react @emotion/styled @mui/icons-material

# WebSocket
npm install socket.io-client

# Date utilities
npm install date-fns
```

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 3: Configuration Files

**package.json:**
```json
{
  "name": "supervisor-dashboard",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.1",
    "@mui/icons-material": "^7.3.2",
    "@mui/material": "^7.3.2",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.0",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^13.5.0",
    "date-fns": "^4.1.0",
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "react-scripts": "5.0.1",
    "socket.io-client": "^4.8.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}
```

**.env:**
```bash
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SOCKET_URL=http://localhost:3001
```

**.gitignore:**
```gitignore
# Dependencies
node_modules/
/.pnp
.pnp.js

# Testing
/coverage

# Production
/build

# Misc
.DS_Store
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
```

---

<a name="structure"></a>
## 3. Project Structure

```
supervisor-dashboard/
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ manifest.json
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ index.js
    â”œâ”€â”€ App.js
    â”œâ”€â”€ App.css
    â”‚
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ ErrorBoundary.js
    â”‚   â”œâ”€â”€ LoginForm.js
    â”‚   â”œâ”€â”€ Dashboard.js
    â”‚   â”œâ”€â”€ TeamOverview.js
    â”‚   â”œâ”€â”€ AgentCard.js
    â”‚   â”œâ”€â”€ MessagePanel.js
    â”‚   â””â”€â”€ StatusFilter.js
    â”‚
    â”œâ”€â”€ services/
    â”‚   â”œâ”€â”€ api.js
    â”‚   â”œâ”€â”€ socket.js
    â”‚   â””â”€â”€ auth.js
    â”‚
    â”œâ”€â”€ hooks/
    â”‚   â”œâ”€â”€ useSocket.js
    â”‚   â””â”€â”€ useTeamData.js
    â”‚
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ statusUtils.js
    â”‚   â”œâ”€â”€ dateFormat.js
    â”‚   â””â”€â”€ validation.js
    â”‚
    â””â”€â”€ theme/
        â”œâ”€â”€ theme.js
        â””â”€â”€ colors.js
```

---

<a name="source-code"></a>
## 4. Source Code

### ğŸ“„ public/index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#1976d2" />
    <meta
      name="description"
      content="Supervisor Dashboard for Agent Wallboard System - Monitor and manage your team in real-time"
    />
    <title>Supervisor Dashboard - Agent Wallboard</title>
    
    <!-- Roboto Font (Material-UI default) -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    
    <!-- Material Icons (optional) -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this application.
    </noscript>
    <div id="root"></div>
  </body>
</html>
```

### ğŸ“„ public/manifest.json

```json
{
  "short_name": "Supervisor Dashboard",
  "name": "Agent Wallboard - Supervisor Dashboard",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#1976d2",
  "background_color": "#ffffff"
}
```

### ğŸ“„ src/index.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Entry point à¸‚à¸­à¸‡ React application - à¹„à¸Ÿà¸¥à¹Œà¹à¸£à¸à¸—à¸µà¹ˆà¸—à¸³à¸‡à¸²à¸™
- à¸ªà¸£à¹‰à¸²à¸‡ root element à¹à¸¥à¸° render App component à¸¥à¸‡à¹ƒà¸™ DOM
- à¹ƒà¸Šà¹‰ StrictMode à¹€à¸à¸·à¹ˆà¸­ detect potential problems

```javascript
import React from 'react';
import ReactDOM from 'react-dom/client';
import './App.css';
import App from './App';

// à¸ªà¸£à¹‰à¸²à¸‡ root element
const root = ReactDOM.createRoot(document.getElementById('root'));

// Render App
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

### ğŸ“„ src/App.css

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Global styles à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸±à¹‰à¸‡ application

```css
/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Body */
body {
  font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #f5f5f5;
}

/* Code */
code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}
```

### ğŸ“„ src/theme/colors.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Color palette à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸±à¹‰à¸‡à¸£à¸°à¸šà¸š
- à¸à¸³à¸«à¸™à¸”à¸ªà¸µà¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸•à¹ˆà¸¥à¸° status
- Helper functions à¸ªà¸³à¸«à¸£à¸±à¸šà¸”à¸¶à¸‡à¸ªà¸µ

```javascript
/**
 * à¸ªà¸µà¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸•à¹ˆà¸¥à¸° Status
 */
export const statusColors = {
  Available: '#4caf50',  // à¹€à¸‚à¸µà¸¢à¸§ - à¸à¸£à¹‰à¸­à¸¡à¸£à¸±à¸šà¸‡à¸²à¸™
  Busy: '#ff9800',       // à¸ªà¹‰à¸¡ - à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡
  Break: '#2196f3',      // à¸™à¹‰à¸³à¹€à¸‡à¸´à¸™ - à¸à¸±à¸
  Offline: '#9e9e9e',    // à¹€à¸—à¸² - à¸­à¸­à¸Ÿà¹„à¸¥à¸™à¹Œ
};

/**
 * à¸”à¸¶à¸‡à¸ªà¸µ status
 */
export const getStatusColor = (status) => {
  return statusColors[status] || statusColors.Offline;
};

/**
 * Priority Colors (à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡)
 */
export const priorityColors = {
  low: '#4caf50',
  normal: '#2196f3',
  high: '#f44336',
};

/**
 * Chart Colors (à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸£à¸²à¸Ÿ/à¸ªà¸–à¸´à¸•à¸´)
 */
export const chartColors = [
  '#1976d2', // Blue
  '#dc004e', // Pink
  '#4caf50', // Green
  '#ff9800', // Orange
  '#9c27b0', // Purple
  '#00bcd4', // Cyan
];
```

### ğŸ“„ src/theme/theme.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Material-UI theme configuration
- à¸à¸³à¸«à¸™à¸” color palette, typography, component styles

```javascript
import { createTheme } from '@mui/material/styles';

const theme = createTheme({
  // à¸Šà¸¸à¸”à¸ªà¸µà¸«à¸¥à¸±à¸
  palette: {
    primary: {
      main: '#1976d2',
      light: '#42a5f5',
      dark: '#1565c0',
    },
    secondary: {
      main: '#dc004e',
    },
    success: {
      main: '#4caf50',
    },
    warning: {
      main: '#ff9800',
    },
    info: {
      main: '#2196f3',
    },
    error: {
      main: '#f44336',
    },
  },
  
  // Typography
  typography: {
    fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
    h4: { fontWeight: 600 },
    h6: { fontWeight: 500 },
  },
  
  // Component customization
  components: {
    MuiCard: {
      styleOverrides: {
        root: {
          borderRadius: 8,
          transition: 'box-shadow 0.2s',
          '&:hover': {
            boxShadow: '0 4px 20px rgba(0,0,0,0.12)',
          },
        },
      },
    },
    MuiButton: {
      styleOverrides: {
        root: {
          borderRadius: 6,
          textTransform: 'none',
          fontWeight: 500,
        },
      },
    },
  },
});

export default theme;
```

### ğŸ“„ src/services/auth.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ JWT token
- setToken() - à¹€à¸à¹‡à¸š token à¸«à¸¥à¸±à¸‡ login
- getToken() - à¸”à¸¶à¸‡ token à¸¡à¸²à¹ƒà¸Šà¹‰à¹ƒà¸™ API calls
- clearToken() - à¸¥à¸š token à¹€à¸¡à¸·à¹ˆà¸­ logout
- isAuthenticated() - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² login à¸­à¸¢à¸¹à¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ

```javascript
// à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ in-memory à¹€à¸›à¹‡à¸™ localStorage
const TOKEN_KEY = 'supervisor_token';
const USER_KEY = 'supervisor_data';

export const setToken = (token) => {
  try {
    localStorage.setItem(TOKEN_KEY, token);
  } catch (error) {
    console.error('Failed to save token:', error);
  }
};

export const getToken = () => {
  try {
    return localStorage.getItem(TOKEN_KEY);
  } catch (error) {
    console.error('Failed to get token:', error);
    return null;
  }
};

export const clearToken = () => {
  try {
    localStorage.removeItem(TOKEN_KEY);
    localStorage.removeItem(USER_KEY);
  } catch (error) {
    console.error('Failed to clear token:', error);
  }
};

export const isAuthenticated = () => {
  return getToken() !== null;
};

// à¹€à¸à¸´à¹ˆà¸¡ functions à¸ªà¸³à¸«à¸£à¸±à¸š user data
export const setSupervisorData = (data) => {
  try {
    localStorage.setItem(USER_KEY, JSON.stringify(data));
  } catch (error) {
    console.error('Failed to save supervisor data:', error);
  }
};

export const getSupervisorData = () => {
  try {
    const data = localStorage.getItem(USER_KEY);
    return data ? JSON.parse(data) : null;
  } catch (error) {
    console.error('Failed to get supervisor data:', error);
    return null;
  }
};

```

### ğŸ“„ src/services/api.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ HTTP requests à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- loginSupervisor() - POST /api/auth/login
- sendMessage() - POST /api/messages/send  
- checkServerHealth() - GET /health

```javascript
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';

/**
 * Login Supervisor
 */
export const loginSupervisor = async (supervisorCode) => {
  const response = await fetch(`${API_BASE_URL}/auth/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ supervisorCode })
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || 'Login failed');
  }

  return response.json();
};

/**
 * Send Message
 */
export const sendMessage = async (messageData, token) => {
  const response = await fetch(`${API_BASE_URL}/messages/send`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify(messageData)
  });

  if (!response.ok) {
    throw new Error('Failed to send message');
  }

  return response.json();
};

/**
 * Check Server Health
 */
export const checkServerHealth = async () => {
  const response = await fetch(API_BASE_URL.replace('/api', '/health'));
  return response.json();
};
```

### ğŸ“„ src/services/socket.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ WebSocket connection
- connectSocket() - à¸ªà¸£à¹‰à¸²à¸‡ connection à¸à¸£à¹‰à¸­à¸¡ authenticate
- disconnectSocket() - à¸›à¸´à¸” connection
- getSocket() - à¸”à¸¶à¸‡ socket instance

```javascript
import io from 'socket.io-client';

const SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:3001';
let socket = null;

/**
 * Connect WebSocket as Supervisor
 */
export const connectSocket = (supervisorCode) => {
    // à¸•à¸±à¸” connection à¹€à¸à¹ˆà¸² (à¸–à¹‰à¸²à¸¡à¸µ)    
    if (socket) {
        socket.disconnect();
    }

    console.log('Connecting to WebSocket...', SOCKET_URL);

    // à¸ªà¸£à¹‰à¸²à¸‡ connection
    socket = io(SOCKET_URL, {
        query: {
            supervisorCode: supervisorCode.toUpperCase(),
            type: 'supervisor'
        },
        reconnection: true,
        reconnectionAttempts: 5,
        reconnectionDelay: 1000
    });

    // âœ… à¹€à¸à¸´à¹ˆà¸¡: emit supervisor_connect à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
    socket.on('connect', () => {
        console.log('Socket connected, sending supervisor_connect...');
        socket.emit('supervisor_connect', {
            supervisorCode: supervisorCode.toUpperCase()
        });
    });

    // à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹ƒà¸™ window à¹€à¸à¸·à¹ˆà¸­ debug
    window.socket = socket;

    return socket;
};

/**
 * Disconnect WebSocket
 */
export const disconnectSocket = () => {
    if (socket) {
        socket.disconnect();
        socket = null;
        window.socket = null;
    }
};

/**
 * Get current socket instance
 */
export const getSocket = () => socket;
```

### ğŸ“„ src/utils/statusUtils.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Helper functions à¸ªà¸³à¸«à¸£à¸±à¸š status
- getStatusColor() - return hex color
- getStatusIcon() - return Material-UI icon component
- à¹ƒà¸Šà¹‰à¹ƒà¸™ AgentCard, StatusFilter, etc.

```javascript
import { 
  CheckCircle,  // Available
  Cancel,       // Busy
  Pause,        // Break
  PowerOff      // Offline
} from '@mui/icons-material';

/**
 * à¸”à¸¶à¸‡à¸ªà¸µ status
 */
export const getStatusColor = (status) => {
  const colors = {
    Available: '#4caf50',
    Busy: '#ff9800',
    Break: '#2196f3',
    Offline: '#9e9e9e'
  };
  return colors[status] || colors.Offline;
};

/**
 * à¸”à¸¶à¸‡ icon component à¸ªà¸³à¸«à¸£à¸±à¸š status
 */
export const getStatusIcon = (status) => {
  const icons = {
    Available: CheckCircle,
    Busy: Cancel,
    Break: Pause,
    Offline: PowerOff
  };
  return icons[status] || PowerOff;
};

/**
 * à¸”à¸¶à¸‡ label à¸‚à¸­à¸‡ status
 */
export const getStatusLabel = (status) => {
  return status || 'Unknown';
};
```

### ğŸ“„ src/utils/dateFormat.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Format dates/times
- formatTime() - "14:30"
- formatTimeAgo() - "5 minutes ago"
- à¹ƒà¸Šà¹‰à¹à¸ªà¸”à¸‡ last update time à¹ƒà¸™ AgentCard

```javascript
import { format, formatDistance } from 'date-fns';

/**
 * Format timestamp à¹€à¸›à¹‡à¸™ HH:mm
 */
export const formatTime = (timestamp) => {
  try {
    return format(new Date(timestamp), 'HH:mm');
  } catch (error) {
    return '--:--';
  }
};

/**
 * Format timestamp à¹€à¸›à¹‡à¸™ DD/MM/YYYY HH:mm
 */
export const formatDateTime = (timestamp) => {
  try {
    return format(new Date(timestamp), 'dd/MM/yyyy HH:mm');
  } catch (error) {
    return 'Invalid date';
  }
};

/**
 * à¹à¸ªà¸”à¸‡à¹€à¸§à¸¥à¸²à¹à¸šà¸š relative (à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆ)
 */
export const formatTimeAgo = (timestamp) => {
  try {
    if (!timestamp) return 'unknown';
    return formatDistance(new Date(timestamp), new Date(), {
      addSuffix: true
    });
  } catch (error) {
    return 'unknown';
  }
};
```

### ğŸ“„ src/utils/validation.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Validate inputs
- validateSupervisorCode() - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š format SP001
- validateMessage() - à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡, à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 500 chars
- Return error message à¸«à¸£à¸·à¸­ null (valid)

```javascript
/**
 * Validate Supervisor Code
 * Format: SP + 3 digits (SP001, SP002, etc.)
 */
export const validateSupervisorCode = (code) => {
  if (!code) {
    return 'Supervisor code is required';
  }

  const trimmed = code.trim().toUpperCase();

  if (trimmed.length === 0) {
    return 'Supervisor code cannot be empty';
  }

  // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š format: SP + 3 digits
  const pattern = /^SP\d{3}$/;
  if (!pattern.test(trimmed)) {
    return 'Invalid format. Use SP001, SP002, etc.';
  }

  return null; // valid
};

/**
 * Validate Message Content
 */
export const validateMessage = (content) => {
  if (!content || !content.trim()) {
    return 'Message cannot be empty';
  }

  if (content.length > 500) {
    return 'Message is too long (max 500 characters)';
  }

  return null; // valid
};

/**
 * Validate Email (à¸–à¹‰à¸²à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰)
 */
export const validateEmail = (email) => {
  if (!email) {
    return 'Email is required';
  }

  const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!pattern.test(email)) {
    return 'Invalid email format';
  }

  return null;
};
```


### ğŸ“„ src/utils/transformers.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Validate inputs
- Transform agent data from API to UI format

```javascript
/**
 * Transform agent data from API to UI format
 */
export const transformAgent = (agent, defaultTeamId = null) => {
  if (!agent) return null;

  return {
    agentCode: agent.agent_code || agent.agentCode,
    agentName: agent.agent_name || agent.agentName,
    role: agent.role || 'agent',
    email: agent.email || '',
    phone: agent.phone || '',
    team_id: agent.team_id || agent.teamId || defaultTeamId,
    // UI fields
    currentStatus: agent.currentStatus || 'Offline',
    isOnline: agent.isOnline || false,
    lastUpdate: agent.lastUpdate || new Date(),
    lastSeen: agent.lastSeen || new Date()
  };
};

export const transformAgents = (agents, defaultTeamId = null) => {
  if (!Array.isArray(agents)) return [];
  return agents.map(agent => transformAgent(agent, defaultTeamId)).filter(a => a !== null);
};
```

### ğŸ“„ src/hooks/useSocket.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Custom hook à¸ˆà¸±à¸”à¸à¸²à¸£ WebSocket
- Connect à¹€à¸¡à¸·à¹ˆà¸­ component mount
- Disconnect à¹€à¸¡à¸·à¹ˆà¸­ component unmount (cleanup)
- Return socket instance

```javascript
import { useEffect, useRef } from 'react';
import { connectSocket, disconnectSocket } from '../services/socket';

export const useSocket = (supervisorCode, onConnect) => {
  const socketRef = useRef(null);

  useEffect(() => {
    if (supervisorCode) {
      // Connect
      console.log('useSocket: Connecting...');
      socketRef.current = connectSocket(supervisorCode);

      // Callback à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
      if (onConnect) {
        socketRef.current.on('connect', onConnect);
      }

      // Cleanup: Disconnect à¹€à¸¡à¸·à¹ˆà¸­ unmount
      return () => {
        console.log('useSocket: Disconnecting...');
        disconnectSocket();
      };
    }
  }, [supervisorCode, onConnect]);

  return socketRef.current;
};
```

### ğŸ“„ src/hooks/useTeamData.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Custom hook à¸ˆà¸±à¸”à¸à¸²à¸£ team data
- à¹€à¸à¹‡à¸š state à¸‚à¸­à¸‡ agents
- updateAgentStatus() - update agent in array
- setAgentOnline() - update online status
- Return { agents, updateAgent, setOnline }

```javascript
import { useState } from 'react';

export const useTeamData = (initialData = []) => {
  const [agents, setAgents] = useState(initialData);

  /**
   * Update agent status
   */
  const updateAgentStatus = (agentCode, status, timestamp) => {
    setAgents(prev => prev.map(agent =>
      agent.agentCode === agentCode
        ? { 
            ...agent, 
            currentStatus: status,
            lastUpdate: timestamp 
          }
        : agent
    ));
  };

  /**
   * Set agent online/offline
   */
  const setAgentOnline = (agentCode, isOnline, timestamp) => {
    setAgents(prev => prev.map(agent =>
      agent.agentCode === agentCode
        ? { 
            ...agent, 
            isOnline,
            lastSeen: timestamp 
          }
        : agent
    ));
  };

  /**
   * Reset team data
   */
  const resetTeamData = (newData) => {
    setAgents(newData);
  };

  return {
    agents,
    updateAgentStatus,
    setAgentOnline,
    resetTeamData
  };
};
```

---

## Components

### ğŸ“„ src/App.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Main application component - à¸ˆà¸±à¸”à¸à¸²à¸£ state à¹à¸¥à¸° logic à¸«à¸¥à¸±à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¹€à¸à¹‡à¸š state: isLoggedIn, supervisor, teamData, messages, socketConnected
- Handle login â†’ à¹€à¸£à¸µà¸¢à¸ API â†’ à¹„à¸”à¹‰ token
- à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ WebSocket à¹€à¸¡à¸·à¹ˆà¸­ login à¹à¸¥à¸° listen events
- Update state à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡ (real-time)
- Route à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ LoginForm à¹à¸¥à¸° Dashboard à¸•à¸²à¸¡ login state

```javascript
import React, { useState, useEffect, useRef } from 'react';
import {
  ThemeProvider,
  CssBaseline,
  Container,
  Box,              // â† à¹€à¸à¸´à¹ˆà¸¡
  CircularProgress, // â† à¹€à¸à¸´à¹ˆà¸¡
  Typography        // â† à¹€à¸à¸´à¹ˆà¸¡
} from '@mui/material';
import LoginForm from './components/LoginForm';
import Dashboard from './components/Dashboard';
import ErrorBoundary from './components/ErrorBoundary';
import { connectSocket, disconnectSocket, getSocket } from './services/socket';
import {
  setToken,
  getToken,
  clearToken,
  setSupervisorData,
  getSupervisorData
} from './services/auth';
import theme from './theme/theme';
import './App.css';
import { transformAgents } from './utils/transformers';

function App() {
  // STATE
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  const [supervisor, setSupervisor] = useState(null);
  const [teamData, setTeamData] = useState([]);
  const [messages, setMessages] = useState([]);
  const [socketConnected, setSocketConnected] = useState(false);
  const [isRestoring, setIsRestoring] = useState(true); // à¹€à¸à¸´à¹ˆà¸¡ loading state

  const socketRef = useRef(null);

  // âœ… à¹€à¸à¸´à¹ˆà¸¡: Restore session à¹€à¸¡à¸·à¹ˆà¸­ component mount
  useEffect(() => {
    const restoreSession = async () => {
      console.log('ğŸ”„ Attempting to restore session...');

      const savedToken = getToken();
      const savedSupervisor = getSupervisorData();

      if (savedToken && savedSupervisor) {
        console.log('âœ… Found saved session:', savedSupervisor.supervisorCode);

        try {
          // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² token à¸¢à¸±à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
          // à¹‚à¸”à¸¢à¹€à¸£à¸µà¸¢à¸ API à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ authentication
          const response = await fetch(
            `${process.env.REACT_APP_API_URL}/agents/team/${savedSupervisor.teamId}`,
            {
              headers: {
                'Authorization': `Bearer ${savedToken}`
              }
            }
          );

          if (response.ok) {
            const data = await response.json();

            console.log('âœ… Session is valid');

            // âœ… à¹ƒà¸Šà¹‰ transformer
            const transformedAgents = transformAgents(
              data.agents || [],
              savedSupervisor.teamId
            );

            console.log('âœ… Transformed team data:', transformedAgents);

            setSupervisor(savedSupervisor);
            setTeamData(transformedAgents);
            setIsLoggedIn(true);

          } else {
            console.warn('âš ï¸ Token expired or invalid');
            clearToken();
          }

        } catch (error) {
          console.error('âŒ Failed to restore session:', error);
          clearToken();
        }
      } else {
        console.log('â„¹ï¸ No saved session found');
      }

      setIsRestoring(false);
    };

    restoreSession();
  }, []);

  // WebSocket setup
  useEffect(() => {
    if (isLoggedIn && supervisor) {
      console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      console.log('ğŸ”Œ Setting up WebSocket connection...');
      console.log('Supervisor:', supervisor.supervisorCode);
      console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');

      const socket = connectSocket(supervisor.supervisorCode);
      socketRef.current = socket;

      // Event: à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
      socket.on('connect', () => {
        console.log('âœ… WebSocket connected');
        setSocketConnected(true);
      });

      // Event: à¸•à¸±à¸”à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
      socket.on('disconnect', () => {
        console.log('âš ï¸ WebSocket disconnected');
        setSocketConnected(false);
      });



    // âœ… Event: à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ online agents à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
    socket.on('connection_success', (data) => {
      console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      console.log('âœ… [SUPERVISOR CONNECTION SUCCESS]');
      console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      console.log('Online agents:', data.onlineAgents);
      
      if (data.onlineAgents && data.onlineAgents.length > 0) {
        // à¸­à¸±à¸›à¹€à¸”à¸• agents à¸—à¸µà¹ˆ online
        setTeamData(prev => {
          const updated = prev.map(agent => {
            const isOnline = data.onlineAgents.some(
              onlineAgent => onlineAgent.agentCode === agent.agentCode
            );
            
            if (isOnline) {
              console.log(`  âœ… Setting ${agent.agentCode} as online`);
              return {
                ...agent,
                isOnline: true,
                currentStatus: 'Available',
                lastUpdate: new Date()
              };
            }
            return agent;
          });
          
          console.log('Updated team data:', updated.map(a => ({
            code: a.agentCode,
            online: a.isOnline,
            status: a.currentStatus
          })));
          
          return updated;
        });
      }
      
      console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    });

      
      // Event: Agent à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (online)
      socket.on('agent_connected', (data) => {
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸŸ¢ [AGENT CONNECTED]');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('Agent code:', data.agentCode);
        console.log('Timestamp:', data.timestamp);

        setTeamData(prev => {
          console.log('Before update:', prev.map(a => ({
            code: a.agentCode,
            online: a.isOnline
          })));

          const updated = prev.map(agent =>
            agent.agentCode === data.agentCode
              ? {
                ...agent,
                isOnline: true,
                currentStatus: 'Available',
                lastSeen: data.timestamp,
                lastUpdate: data.timestamp
              }
              : agent
          );

          console.log('After update:', updated.map(a => ({
            code: a.agentCode,
            online: a.isOnline
          })));

          return updated;
        });

        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      });

      // Event: Agent à¸•à¸±à¸”à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (offline)
      socket.on('agent_disconnected', (data) => {
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ”´ [AGENT DISCONNECTED]');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('Agent code:', data.agentCode);

        setTeamData(prev => prev.map(agent =>
          agent.agentCode === data.agentCode
            ? {
              ...agent,
              isOnline: false,
              currentStatus: 'Offline',
              lastSeen: data.timestamp
            }
            : agent
        ));

        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      });

      // Event: Agent à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ status
      socket.on('agent_status_update', (data) => {
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ“Š [STATUS UPDATE]');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('Agent:', data.agentCode);
        console.log('Status:', data.status);

        setTeamData(prev => prev.map(agent =>
          agent.agentCode === data.agentCode
            ? {
              ...agent,
              currentStatus: data.status,
              lastUpdate: data.timestamp
            }
            : agent
        ));

        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      });

      // Event: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸«à¸¡à¹ˆ
      socket.on('new_message', (message) => {
        console.log('ğŸ’¬ New message:', message);
        setMessages(prev => [...prev, message]);
      });

      return () => {
        console.log('ğŸ§¹ Cleaning up WebSocket...');
        socket.off('connect');
        socket.off('disconnect');
        socket.off('agent_connected');
        socket.off('agent_disconnected');
        socket.off('agent_status_update');
        socket.off('new_message');

        disconnectSocket();
        socketRef.current = null;
        setSocketConnected(false);
      };
    }
  }, [isLoggedIn, supervisor]);

  // Handlers
  const handleLogin = (loginData) => {
    console.log('âœ… Login successful');

    const supervisorData = {
      supervisorCode: loginData.data.user.agentCode,
      name: loginData.data.user.agentName,
      teamId: loginData.data.user.teamId,
      teamName: loginData.data.user.teamName,
      email: loginData.data.user.email
    };

    const rawTeamData = loginData.data.teamData || [];

    // âœ… à¸šà¸±à¸™à¸—à¸¶à¸ token à¹à¸¥à¸° data
    setToken(loginData.data.token);
    setSupervisorData(supervisorData);

    setSupervisor(supervisorData);
    setTeamData(rawTeamData);
    setIsLoggedIn(true);
  };

  const handleLogout = () => {
    console.log('Logging out...');

    // âœ… à¸¥à¸š saved data
    clearToken();

    disconnectSocket();

    setIsLoggedIn(false);
    setSupervisor(null);
    setTeamData([]);
    setMessages([]);
    setSocketConnected(false);
    socketRef.current = null;
  };

  const handleSendMessage = (messageData) => {
    console.log('ğŸ“¤ Sending message:', messageData);

    const socket = socketRef.current || getSocket();

    if (!socket || !socket.connected) {
      console.error('âŒ Socket not available');
      return;
    }

    socket.emit('send_message', {
      fromCode: supervisor.supervisorCode,
      ...messageData
    });

    setMessages(prev => [...prev, {
      ...messageData,
      fromCode: supervisor.supervisorCode,
      timestamp: new Date()
    }]);
  };

  // âœ… à¹à¸ªà¸”à¸‡ loading à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ restore session
  if (isRestoring) {
    return (
      <ThemeProvider theme={theme}>
        <CssBaseline />
        <Container
          maxWidth="xl"
          sx={{
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            minHeight: '100vh'
          }}
        >
          <Box textAlign="center">
            <CircularProgress />
            <Typography variant="body2" sx={{ mt: 2 }}>
              Loading...
            </Typography>
          </Box>
        </Container>
      </ThemeProvider>
    );
  }

  return (
    <ErrorBoundary>
      <ThemeProvider theme={theme}>
        <CssBaseline />
        <Container maxWidth="xl" sx={{ py: 2 }}>
          {!isLoggedIn ? (
            <LoginForm onLogin={handleLogin} />
          ) : (
            <Dashboard
              supervisor={supervisor}
              teamData={teamData}
              messages={messages}
              socketConnected={socketConnected}
              onSendMessage={handleSendMessage}
              onLogout={handleLogout}
            />
          )}
        </Container>
      </ThemeProvider>
    </ErrorBoundary>
  );
}

export default App;
```

### ğŸ“„ src/components/ErrorBoundary.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ errors à¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¹ƒà¸™ component tree
- Catch errors à¹à¸¥à¸°à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ app crash à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¹à¸ªà¸”à¸‡ error UI à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸¡à¸´à¸•à¸£
- à¸¡à¸µà¸›à¸¸à¹ˆà¸¡ Reload Application

```javascript
import React from 'react';
import { Box, Typography, Button, Paper } from '@mui/material';
import { Error as ErrorIcon } from '@mui/icons-material';

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { 
      hasError: false,
      error: null 
    };
  }

  // à¹€à¸£à¸µà¸¢à¸à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µ error à¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™
  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  // Log error
  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  // Reset error state
  handleReset = () => {
    this.setState({ hasError: false, error: null });
    window.location.reload();
  };

  render() {
    if (this.state.hasError) {
      // à¹à¸ªà¸”à¸‡ error UI
      return (
        <Box
          display="flex"
          justifyContent="center"
          alignItems="center"
          minHeight="100vh"
          bgcolor="#f5f5f5"
        >
          <Paper elevation={3} sx={{ p: 4, maxWidth: 500, textAlign: 'center' }}>
            <ErrorIcon sx={{ fontSize: 60, color: 'error.main', mb: 2 }} />
            <Typography variant="h5" gutterBottom>
              Something went wrong
            </Typography>
            <Typography variant="body2" color="text.secondary" sx={{ mb: 3 }}>
              {this.state.error?.message || 'An unexpected error occurred'}
            </Typography>
            <Button 
              variant="contained" 
              onClick={this.handleReset}
            >
              Reload Application
            </Button>
          </Paper>
        </Box>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

### ğŸ“„ src/components/LoginForm.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸«à¸™à¹‰à¸² login à¸ªà¸³à¸«à¸£à¸±à¸š supervisor
- à¸£à¸±à¸š input supervisor code à¹à¸¥à¸° validate format (SP001)
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š backend server status à¸à¹ˆà¸­à¸™ login
- à¹€à¸£à¸µà¸¢à¸ API login à¹à¸¥à¸°à¹à¸ªà¸”à¸‡ loading state
- à¹à¸ªà¸”à¸‡ error message à¸–à¹‰à¸² login à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§
- à¹€à¸£à¸µà¸¢à¸ onLogin callback à¹€à¸¡à¸·à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ

```javascript
import React, { useState, useEffect } from 'react';
import {
    Paper, TextField, Button, Typography, Alert, Box,
    CircularProgress, Chip
} from '@mui/material';
import { AccountCircle, CheckCircle, Cancel } from '@mui/icons-material';
import { loginSupervisor } from '../services/api';
import { validateSupervisorCode } from '../utils/validation';
import { checkServerHealth } from '../services/api';

function LoginForm({ onLogin }) {
    // State
    const [supervisorCode, setSupervisorCode] = useState('');
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState('');
    const [serverStatus, setServerStatus] = useState('checking'); // checking, online, offline

    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š backend status à¹€à¸¡à¸·à¹ˆà¸­ component mount
    useEffect(() => {
        checkBackendStatus();
    }, []);

    /**
     * à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² backend server à¸—à¸³à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
     */
    const checkBackendStatus = async () => {
        try {
            await checkServerHealth();
            setServerStatus('online');
        } catch (err) {
            setServerStatus('offline');
            setError('Cannot connect to server. Please make sure backend is running.');
        }
    };

    /**
     * Handle form submit
     */
    const handleSubmit = async (e) => {
        e.preventDefault();
        setError('');

        // Validate input
        const validationError = validateSupervisorCode(supervisorCode);
        if (validationError) {
            setError(validationError);
            return;
        }

        // à¹€à¸£à¸µà¸¢à¸ API
        setLoading(true);
        try {
            const response = await loginSupervisor(supervisorCode.toUpperCase());

            // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™ supervisor à¸ˆà¸£à¸´à¸‡
            if (response.data.user.role !== 'supervisor') {
                setError('This code is not a supervisor account');
                setLoading(false);
                return;
            }

            // Login à¸ªà¸³à¹€à¸£à¹‡à¸ˆ â†’ à¹€à¸£à¸µà¸¢à¸ callback
            onLogin(response);

        } catch (err) {
            setError(err.message || 'Login failed. Please check your code.');
        } finally {
            setLoading(false);
        }
    };

    return (
        <Box
            display="flex"
            justifyContent="center"
            alignItems="center"
            minHeight="100vh"
            bgcolor="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
        >
            <Paper elevation={3} sx={{ p: 4, maxWidth: 400, width: '100%' }}>
                {/* Header */}
                <Box textAlign="center" mb={3}>
                    <AccountCircle sx={{ fontSize: 60, color: 'primary.main', mb: 2 }} />
                    <Typography variant="h4" gutterBottom>
                        Supervisor Dashboard
                    </Typography>
                    <Typography variant="body2" color="text.secondary">
                        Sign in to monitor your team
                    </Typography>

                    {/* Server Status Badge */}
                    <Box mt={2}>
                        <Chip
                            size="small"
                            icon={serverStatus === 'online' ? <CheckCircle /> : <Cancel />}
                            label={
                                serverStatus === 'checking' ? 'Checking server...' :
                                    serverStatus === 'online' ? 'Server Online' :
                                        'Server Offline'
                            }
                            color={serverStatus === 'online' ? 'success' : 'error'}
                            variant={serverStatus === 'checking' ? 'outlined' : 'filled'}
                        />
                    </Box>
                </Box>

                {/* Login Form */}
                <form onSubmit={handleSubmit}>
                    <TextField
                        fullWidth
                        label="Supervisor Code"
                        placeholder="SP001"
                        value={supervisorCode}
                        onChange={(e) => setSupervisorCode(e.target.value.toUpperCase())}
                        margin="normal"
                        required
                        disabled={loading || serverStatus === 'offline'}
                        autoFocus
                        helperText="Format: SP + 3 digits (e.g., SP001)"
                    />

                    <Button
                        type="submit"
                        fullWidth
                        variant="contained"
                        size="large"
                        disabled={loading || serverStatus === 'offline'}
                        sx={{ mt: 3, mb: 2 }}
                    >
                        {loading ? <CircularProgress size={24} color="inherit" /> : 'Sign In'}
                    </Button>

                    {/* Error Message */}
                    {error && (
                        <Alert severity="error" sx={{ mt: 2 }}>
                            {error}
                        </Alert>
                    )}
                </form>

                {/* Test Credentials */}
                <Box mt={3} textAlign="center">
                    <Typography variant="caption" color="text.secondary">
                        Test Credentials
                    </Typography>
                    <Typography variant="caption" display="block" color="text.secondary">
                        SP001 â€¢ SP002 â€¢ SP003
                    </Typography>
                </Box>
            </Paper>
        </Box>
    );
}

export default LoginForm;
```

### ğŸ“„ src/components/Dashboard.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Layout à¸«à¸¥à¸±à¸à¸«à¸¥à¸±à¸‡ login
- à¹à¸ªà¸”à¸‡ App Bar (header) à¸à¸£à¹‰à¸­à¸¡à¸Šà¸·à¹ˆà¸­ supervisor à¹à¸¥à¸° online count
- à¹à¸ªà¸”à¸‡ TeamOverview (à¸ªà¸–à¸´à¸•à¸´à¸—à¸µà¸¡)
- à¹à¸ªà¸”à¸‡ StatusFilter (à¸›à¸¸à¹ˆà¸¡à¸à¸£à¸­à¸‡)
- à¹à¸ªà¸”à¸‡ Agent Cards (grid layout)
- à¸ˆà¸±à¸”à¸à¸²à¸£ MessagePanel (modal à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡)

```javascript
import React, { useState } from 'react';
import {
    Grid, AppBar, Toolbar, Typography, Button, Box,
    Chip, IconButton, Tooltip
} from '@mui/material';
import {
    Logout, People, Message, Refresh, Circle
} from '@mui/icons-material';
import TeamOverview from './TeamOverview';
import AgentCard from './AgentCard';
import MessagePanel from './MessagePanel';
import StatusFilter from './StatusFilter';

function Dashboard({
    supervisor,
    teamData,
    messages,
    socketConnected,
    onSendMessage,
    onLogout
}) {
    const [statusFilter, setStatusFilter] = useState('All');
    const [showMessagePanel, setShowMessagePanel] = useState(false);

    // âœ… à¹€à¸à¸´à¹ˆà¸¡: à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹à¸¥à¸°à¸ªà¸£à¹‰à¸²à¸‡ safeTeamData
    const safeTeamData = Array.isArray(teamData) ? teamData : [];

    // à¸à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ agent à¸•à¸²à¸¡ status filter
    const filteredAgents = safeTeamData.filter(agent =>
        statusFilter === 'All' || agent.currentStatus === statusFilter
    );

    // à¸ªà¸–à¸´à¸•à¸´à¸—à¸µà¸¡
    const teamStats = {
        total: safeTeamData.length,
        online: safeTeamData.filter(a => a.isOnline).length,
        available: safeTeamData.filter(a => a.currentStatus === 'Available').length,
        busy: safeTeamData.filter(a => a.currentStatus === 'Busy').length,
        break: safeTeamData.filter(a => a.currentStatus === 'Break').length,
        offline: safeTeamData.filter(a => a.currentStatus === 'Offline').length
    };

    const handleRefresh = () => {
        window.location.reload();
    };

    return (
        <Box>
            {/* App Bar */}
            <AppBar position="static" elevation={1}>
                <Toolbar>
                    <People sx={{ mr: 1 }} />

                    <Box sx={{ flexGrow: 1 }}>
                        <Typography variant="h6">
                            {supervisor.name}
                        </Typography>
                        <Typography variant="caption" sx={{ opacity: 0.8 }}>
                            {supervisor.teamName}
                        </Typography>
                    </Box>

                    <Tooltip title={socketConnected ? 'Connected' : 'Disconnected'}>
                        <Circle
                            sx={{
                                fontSize: 12,
                                color: socketConnected ? 'success.light' : 'error.light',
                                mr: 2
                            }}
                        />
                    </Tooltip>

                    <Chip
                        label={`${teamStats.online}/${teamStats.total} Online`}
                        color="success"
                        variant="outlined"
                        sx={{ mr: 2, color: 'white', borderColor: 'white' }}
                    />

                    <Button
                        color="inherit"
                        startIcon={<Message />}
                        onClick={() => setShowMessagePanel(true)}
                        sx={{ mr: 1 }}
                    >
                        Send Message
                    </Button>

                    <Tooltip title="Refresh">
                        <IconButton color="inherit" onClick={handleRefresh}>
                            <Refresh />
                        </IconButton>
                    </Tooltip>

                    <Button
                        color="inherit"
                        startIcon={<Logout />}
                        onClick={onLogout}
                    >
                        Logout
                    </Button>
                </Toolbar>
            </AppBar>

            {/* Dashboard Content */}
            <Box sx={{ mt: 3 }}>
                <Grid container spacing={3}>
                    <Grid item xs={12}>
                        <TeamOverview stats={teamStats} />
                    </Grid>

                    <Grid item xs={12}>
                        <StatusFilter
                            currentFilter={statusFilter}
                            onFilterChange={setStatusFilter}
                            stats={teamStats}
                        />
                    </Grid>

                    <Grid item xs={12}>
                        {filteredAgents.length > 0 ? (
                            <Grid container spacing={2}>
                                {filteredAgents.map(agent => (
                                    <Grid item xs={12} sm={6} md={4} lg={3} key={agent.agentCode}>
                                        <AgentCard
                                            agent={agent}
                                            onSendMessage={(content) => onSendMessage({
                                                type: 'direct',
                                                toCode: agent.agentCode,
                                                content
                                            })}
                                        />
                                    </Grid>
                                ))}
                            </Grid>
                        ) : (
                            <Box textAlign="center" py={5}>
                                <Typography variant="h6" color="text.secondary">
                                    No agents found with status: {statusFilter}
                                </Typography>
                            </Box>
                        )}
                    </Grid>
                </Grid>
            </Box>

            {/* Message Panel Modal */}
            <MessagePanel
                open={showMessagePanel}
                onClose={() => setShowMessagePanel(false)}
                supervisor={supervisor}
                teamData={safeTeamData}
                onSendMessage={onSendMessage}
            />
        </Box>
    );
}

export default Dashboard;
```

### ğŸ“„ src/components/TeamOverview.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¹à¸ªà¸”à¸‡à¸ªà¸–à¸´à¸•à¸´à¸—à¸µà¸¡à¸ à¸²à¸à¸£à¸§à¸¡
- à¸„à¸³à¸™à¸§à¸“: à¸ˆà¸³à¸™à¸§à¸™ total, online, available, busy, break, offline
- à¹à¸ªà¸”à¸‡à¹€à¸›à¹‡à¸™ cards à¸à¸£à¹‰à¸­à¸¡ icons à¸ªà¸µà¸ªà¸±à¸™à¸ªà¸§à¸¢à¸‡à¸²à¸¡
- Update real-time à¹€à¸¡à¸·à¹ˆà¸­ agent à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ status

```javascript
import React from 'react';
import { Grid, Card, CardContent, Typography, Box } from '@mui/material';
import { 
  People, CheckCircle, Cancel, Pause, PowerOff 
} from '@mui/icons-material';

function TeamOverview({ stats }) {
  // à¸à¸³à¸«à¸™à¸” cards à¸—à¸µà¹ˆà¸ˆà¸°à¹à¸ªà¸”à¸‡
  const overviewCards = [
    {
      label: 'Total Agents',
      value: stats.total,
      icon: People,
      color: '#1976d2'
    },
    {
      label: 'Online',
      value: stats.online,
      icon: PowerOff,
      color: '#4caf50'
    },
    {
      label: 'Available',
      value: stats.available,
      icon: CheckCircle,
      color: '#4caf50'
    },
    {
      label: 'Busy',
      value: stats.busy,
      icon: Cancel,
      color: '#ff9800'
    },
    {
      label: 'On Break',
      value: stats.break,
      icon: Pause,
      color: '#2196f3'
    },
    {
      label: 'Offline',
      value: stats.offline,
      icon: PowerOff,
      color: '#9e9e9e'
    }
  ];

  return (
    <Grid container spacing={2}>
      {overviewCards.map((card, index) => {
        const IconComponent = card.icon;
        
        return (
          <Grid item xs={6} sm={4} md={2} key={index}>
            <Card elevation={2}>
              <CardContent>
                {/* Icon */}
                <Box display="flex" justifyContent="center" mb={1}>
                  <IconComponent sx={{ fontSize: 40, color: card.color }} />
                </Box>
                
                {/* Value */}
                <Typography 
                  variant="h4" 
                  align="center" 
                  sx={{ fontWeight: 'bold', color: card.color }}
                >
                  {card.value}
                </Typography>
                
                {/* Label */}
                <Typography 
                  variant="body2" 
                  align="center" 
                  color="text.secondary"
                >
                  {card.label}
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        );
      })}
    </Grid>
  );
}

export default TeamOverview;
```

### ğŸ“„ src/components/AgentCard.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ agent à¹à¸•à¹ˆà¸¥à¸°à¸„à¸™
- à¹à¸ªà¸”à¸‡: à¸Šà¸·à¹ˆà¸­, à¸£à¸«à¸±à¸ª, status, last update time
- à¸ªà¸µ border à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸²à¸¡ status
- à¹à¸ªà¸”à¸‡ online/offline indicator
- à¸›à¸¸à¹ˆà¸¡ "Message" â†’ à¹€à¸›à¸´à¸” dialog à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡

```javascript
import React, { useState } from 'react';
import {
    Card, CardContent, Typography, Chip, Button, Box,
    Dialog, DialogTitle, DialogContent, DialogActions, TextField,
    Tooltip
} from '@mui/material';
import { Person, AccessTime, Message, Circle } from '@mui/icons-material';
import { getStatusColor, getStatusIcon } from '../utils/statusUtils';
import { formatTimeAgo } from '../utils/dateFormat';

function AgentCard({ agent, onSendMessage }) {
    // State à¸ªà¸³à¸«à¸£à¸±à¸š message dialog
    const [messageDialog, setMessageDialog] = useState(false);
    const [messageContent, setMessageContent] = useState('');

    // ===========================================
    // Handlers
    // ===========================================

    const handleSendMessage = () => {
        if (messageContent.trim()) {
            onSendMessage(messageContent);
            setMessageContent('');
            setMessageDialog(false);
        }
    };

    // ===========================================
    // UI Properties
    // ===========================================

    const StatusIcon = getStatusIcon(agent.currentStatus);
    const statusColor = getStatusColor(agent.currentStatus);

    return (
        <>
            {/* Agent Card */}
            <Card
                elevation={2}
                sx={{
                    border: `2px solid ${agent.isOnline ? statusColor : '#ccc'}`,
                    opacity: agent.isOnline ? 1 : 0.7,
                    transition: 'all 0.3s'
                }}
            >
                <CardContent>
                    {/* Agent Info Row */}
                    <Box display="flex" alignItems="center" mb={2}>
                        {/* Avatar Icon */}
                        <Person sx={{ mr: 1, color: 'text.secondary' }} />

                        {/* Name & Code */}
                        <Box flexGrow={1}>
                            <Typography variant="h6" noWrap>
                                {agent.agentName}
                            </Typography>
                            <Typography variant="caption" color="text.secondary">
                                {agent.agentCode}
                            </Typography>
                        </Box>

                        {/* Online Indicator */}
                        {agent.isOnline && (
                            <Tooltip title="Online">
                                <Circle sx={{ fontSize: 12, color: 'success.main' }} />
                            </Tooltip>
                        )}
                    </Box>

                    {/* Current Status */}
                    <Box display="flex" alignItems="center" mb={2}>
                        <StatusIcon sx={{ mr: 1, color: statusColor }} />
                        <Chip
                            label={agent.currentStatus}
                            size="small"
                            sx={{
                                backgroundColor: statusColor,
                                color: 'white',
                                fontWeight: 'bold'
                            }}
                        />
                    </Box>

                    {/* Last Update Time */}
                    <Box display="flex" alignItems="center" mb={2}>
                        <AccessTime sx={{ mr: 1, fontSize: 16, color: 'text.secondary' }} />
                        <Typography variant="caption" color="text.secondary">
                            {agent.isOnline
                                ? `Updated ${formatTimeAgo(agent.lastUpdate)}`
                                : `Last seen ${formatTimeAgo(agent.lastSeen)}`
                            }
                        </Typography>
                    </Box>

                    {/* Actions */}
                    <Box display="flex" justifyContent="space-between">
                        <Button
                            size="small"
                            startIcon={<Message />}
                            onClick={() => setMessageDialog(true)}
                            disabled={!agent.isOnline}
                        >
                            Message
                        </Button>

                        <Chip
                            size="small"
                            label={agent.isOnline ? 'Online' : 'Offline'}
                            color={agent.isOnline ? 'success' : 'default'}
                            variant="outlined"
                        />
                    </Box>
                </CardContent>
            </Card>

            {/* Send Message Dialog */}
            <Dialog
                open={messageDialog}
                onClose={() => setMessageDialog(false)}
                maxWidth="sm"
                fullWidth
            >
                <DialogTitle>
                    Send Message to {agent.agentName}
                </DialogTitle>
                <DialogContent>
                    <TextField
                        fullWidth
                        multiline
                        rows={4}
                        label="Message"
                        value={messageContent}
                        onChange={(e) => setMessageContent(e.target.value)}
                        margin="normal"
                        placeholder="Type your message here..."
                        autoFocus
                    />
                </DialogContent>
                <DialogActions>
                    <Button onClick={() => setMessageDialog(false)}>
                        Cancel
                    </Button>
                    <Button
                        onClick={handleSendMessage}
                        variant="contained"
                        disabled={!messageContent.trim()}
                    >
                        Send
                    </Button>
                </DialogActions>
            </Dialog>
        </>
    );
}

export default AgentCard;
```

### ğŸ“„ src/components/MessagePanel.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** Modal à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
- à¹€à¸¥à¸·à¸­à¸à¸›à¸£à¸°à¹€à¸ à¸—: Direct (à¸„à¸™à¹€à¸”à¸µà¸¢à¸§) à¸«à¸£à¸·à¸­ Broadcast (à¸—à¸±à¹‰à¸‡à¸—à¸µà¸¡)
- à¸–à¹‰à¸² Direct â†’ à¹€à¸¥à¸·à¸­à¸ agent à¸—à¸µà¹ˆà¸ˆà¸°à¸ªà¹ˆà¸‡
- à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ (max 500 chars)
- à¸¡à¸µ Quick Templates à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢

```javascript
/**
 * MESSAGE PANEL COMPONENT
 * Modal à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ Direct à¸«à¸£à¸·à¸­ Broadcast
 * - à¹€à¸¥à¸·à¸­à¸à¸›à¸£à¸°à¹€à¸ à¸—: Direct (à¸„à¸™à¹€à¸”à¸µà¸¢à¸§) à¸«à¸£à¸·à¸­ Broadcast (à¸—à¸±à¹‰à¸‡à¸—à¸µà¸¡)
 * - à¹€à¸¥à¸·à¸­à¸ agent (à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ direct)
 * - à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
 * - à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
 * 
 * FIX: à¹€à¸à¸´à¹ˆà¸¡ supervisor prop à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸Šà¹‰ teamId à¸ªà¸³à¸«à¸£à¸±à¸š broadcast
 */

import React, { useState, useEffect } from 'react';
import {
    Dialog, DialogTitle, DialogContent, DialogActions,
    Button, TextField, RadioGroup, FormControlLabel, Radio,
    FormControl, FormLabel, Select, MenuItem, InputLabel,
    Box, Typography, Alert
} from '@mui/material';
import { Send } from '@mui/icons-material';
import { validateMessage } from '../utils/validation';

function MessagePanel({ open, onClose, supervisor, teamData, onSendMessage }) {
    const [messageType, setMessageType] = useState('direct');
    const [selectedAgent, setSelectedAgent] = useState('');
    const [messageContent, setMessageContent] = useState('');
    const [error, setError] = useState('');

    // Debug logging à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸›à¸´à¸” modal
    useEffect(() => {
        if (open) {
            console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
            console.log('ğŸ“§ [MESSAGE PANEL OPENED]');
            console.log('Supervisor:', supervisor);
            console.log('Team ID:', supervisor?.teamId);
            console.log('Team Name:', supervisor?.teamName);
            console.log('Team Data:', teamData?.length, 'agents');
            console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        }
    }, [open, supervisor, teamData]);

    const handleTypeChange = (e) => {
        setMessageType(e.target.value);
        setSelectedAgent('');
        setError('');
    };

    const handleSend = () => {
        setError('');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ“¤ [SENDING MESSAGE]');

        // Validate message content
        const validationError = validateMessage(messageContent);
        if (validationError) {
            setError(validationError);
            console.error('âŒ Validation error:', validationError);
            return;
        }

        // Validate direct message selection
        if (messageType === 'direct' && !selectedAgent) {
            setError('Please select an agent');
            console.error('âŒ No agent selected');
            return;
        }

        // à¸ªà¸£à¹‰à¸²à¸‡ message object
        const messageData = {
            content: messageContent.trim(),
            type: messageType,
            priority: 'normal'
        };

        // à¹€à¸à¸´à¹ˆà¸¡ recipient
        if (messageType === 'direct') {
            messageData.toCode = selectedAgent;
            console.log('âœ… Direct message to:', selectedAgent);
        } else {
            // Broadcast - à¸•à¹‰à¸­à¸‡à¸¡à¸µ teamId
            if (!supervisor || !supervisor.teamId) {
                console.error('âŒ Missing supervisor or teamId');
                console.error('   Supervisor:', supervisor);
                setError('Cannot determine team ID for broadcast message');
                return;
            }

            messageData.toTeamId = supervisor.teamId;
            console.log('âœ… Broadcast to team:', supervisor.teamId, `(${supervisor.teamName})`);
        }

        console.log('Message data:', messageData);
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');

        // à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
        onSendMessage(messageData);

        // Reset à¹à¸¥à¸°à¸›à¸´à¸”
        setMessageContent('');
        setSelectedAgent('');
        setMessageType('direct');
        setError('');
        onClose();
    };

    const handleCancel = () => {
        setMessageContent('');
        setSelectedAgent('');
        setMessageType('direct');
        setError('');
        onClose();
    };

    // Filter online agents
    const onlineAgents = teamData ? teamData.filter(agent => agent.isOnline) : [];
    const totalAgents = teamData ? teamData.length : 0;

    return (
        <Dialog
            open={open}
            onClose={handleCancel}
            maxWidth="sm"
            fullWidth
        >
            <DialogTitle>
                Send Message
            </DialogTitle>

            <DialogContent>
                {/* Message Type Selection */}
                <FormControl component="fieldset" sx={{ mb: 3, mt: 1 }}>
                    <FormLabel component="legend">Message Type</FormLabel>
                    <RadioGroup
                        row
                        value={messageType}
                        onChange={handleTypeChange}
                    >
                        <FormControlLabel
                            value="direct"
                            control={<Radio />}
                            label="Direct (to one agent)"
                        />
                        <FormControlLabel
                            value="broadcast"
                            control={<Radio />}
                            label="Broadcast (to all team)"
                        />
                    </RadioGroup>
                </FormControl>

                {/* Agent Selection (Direct) */}
                {messageType === 'direct' && (
                    <FormControl fullWidth sx={{ mb: 3 }}>
                        <InputLabel>Select Agent</InputLabel>
                        <Select
                            value={selectedAgent}
                            onChange={(e) => setSelectedAgent(e.target.value)}
                            label="Select Agent"
                        >
                            {onlineAgents.length > 0 ? (
                                onlineAgents.map(agent => (
                                    <MenuItem key={agent.agentCode} value={agent.agentCode}>
                                        {agent.agentName} ({agent.agentCode}) - {agent.currentStatus}
                                    </MenuItem>
                                ))
                            ) : (
                                <MenuItem disabled>No agents online</MenuItem>
                            )}
                        </Select>
                    </FormControl>
                )}

                {/* Broadcast Info */}
                {messageType === 'broadcast' && (
                    <Alert severity="info" sx={{ mb: 3 }}>
                        This message will be sent to all agents in your team
                        {supervisor?.teamName && <> ({supervisor.teamName})</>}
                        <br />
                        {totalAgents} agents total, {onlineAgents.length} online
                    </Alert>
                )}

                {/* Message Content */}
                <TextField
                    fullWidth
                    multiline
                    rows={6}
                    label="Message Content"
                    value={messageContent}
                    onChange={(e) => setMessageContent(e.target.value)}
                    placeholder="Type your message here..."
                    helperText={`${messageContent.length}/500 characters`}
                    inputProps={{ maxLength: 500 }}
                />

                {/* Error Message */}
                {error && (
                    <Alert severity="error" sx={{ mt: 2 }}>
                        {error}
                    </Alert>
                )}

                {/* Quick Templates */}
                <Box mt={2}>
                    <Typography variant="caption" color="text.secondary" gutterBottom>
                        Quick Templates:
                    </Typography>
                    <Box display="flex" gap={1} flexWrap="wrap" mt={1}>
                        {[
                            'Please update your status',
                            'Team meeting in 15 minutes',
                            'Great work today!',
                            'Please check your queue'
                        ].map((template, index) => (
                            <Button
                                key={index}
                                size="small"
                                variant="outlined"
                                onClick={() => setMessageContent(template)}
                            >
                                {template}
                            </Button>
                        ))}
                    </Box>
                </Box>
            </DialogContent>

            <DialogActions>
                <Button onClick={handleCancel}>
                    Cancel
                </Button>
                <Button
                    onClick={handleSend}
                    variant="contained"
                    startIcon={<Send />}
                    disabled={!messageContent.trim() || (messageType === 'direct' && !selectedAgent)}
                >
                    Send Message
                </Button>
            </DialogActions>
        </Dialog>
    );
}

export default MessagePanel;
```

### ğŸ“„ src/components/StatusFilter.js

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸›à¸¸à¹ˆà¸¡à¸à¸£à¸­à¸‡à¹à¸ªà¸”à¸‡ agents à¸•à¸²à¸¡ status
- All, Available, Busy, Break, Offline
- à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™à¹à¸•à¹ˆà¸¥à¸° status
- Highlight à¸›à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸

```javascript
import React from 'react';
import { Box, Button, Chip } from '@mui/material';
import { 
  ViewModule, CheckCircle, Cancel, Pause, PowerOff 
} from '@mui/icons-material';

function StatusFilter({ currentFilter, onFilterChange, stats }) {
  // à¸à¸³à¸«à¸™à¸” filter buttons
  const filterButtons = [
    {
      value: 'All',
      label: 'All Agents',
      icon: ViewModule,
      count: stats.total,
      color: '#1976d2'
    },
    {
      value: 'Available',
      label: 'Available',
      icon: CheckCircle,
      count: stats.available,
      color: '#4caf50'
    },
    {
      value: 'Busy',
      label: 'Busy',
      icon: Cancel,
      count: stats.busy,
      color: '#ff9800'
    },
    {
      value: 'Break',
      label: 'Break',
      icon: Pause,
      count: stats.break,
      color: '#2196f3'
    },
    {
      value: 'Offline',
      label: 'Offline',
      icon: PowerOff,
      count: stats.offline,
      color: '#9e9e9e'
    }
  ];

  return (
    <Box 
      sx={{ 
        display: 'flex', 
        gap: 1, 
        flexWrap: 'wrap',
        p: 2,
        bgcolor: 'background.paper',
        borderRadius: 2,
        boxShadow: 1
      }}
    >
      {filterButtons.map((filter) => {
        const IconComponent = filter.icon;
        const isActive = currentFilter === filter.value;

        return (
          <Button
            key={filter.value}
            variant={isActive ? 'contained' : 'outlined'}
            onClick={() => onFilterChange(filter.value)}
            startIcon={<IconComponent />}
            sx={{
              borderColor: filter.color,
              color: isActive ? 'white' : filter.color,
              bgcolor: isActive ? filter.color : 'transparent',
              '&:hover': {
                bgcolor: isActive ? filter.color : `${filter.color}20`,
                borderColor: filter.color
              }
            }}
          >
            {filter.label}
            <Chip
              label={filter.count}
              size="small"
              sx={{
                ml: 1,
                bgcolor: isActive ? 'rgba(255,255,255,0.3)' : 'transparent',
                color: isActive ? 'white' : filter.color,
                fontWeight: 'bold'
              }}
            />
          </Button>
        );
      })}
    </Box>
  );
}

export default StatusFilter;
```

---

## 5. à¸à¸²à¸£à¸£à¸±à¸™ Dashboard

### Development Mode

```bash
# Terminal 1: Start Backend Server
cd backend-server
npm run dev

# Terminal 2: Start Dashboard
cd supervisor-dashboard
npm start

# à¹€à¸›à¸´à¸” browser: http://localhost:3000
```

### Test Login

```
Supervisor Codes:
- SP001 (Team A)
- SP002 (Team B)
- SP003 (Team C)
```

---

## 6. à¸ªà¸£à¸¸à¸›

**à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡à¸„à¸£à¸š:**

```
src/
â”œâ”€â”€ App.js                      âœ… Main application
â”œâ”€â”€ index.js                    âœ… Entry point
â”œâ”€â”€ App.css                     âœ… Global styles
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ErrorBoundary.js        âœ… Error handling
â”‚   â”œâ”€â”€ LoginForm.js            âœ… Login page
â”‚   â”œâ”€â”€ Dashboard.js            âœ… Main dashboard
â”‚   â”œâ”€â”€ TeamOverview.js         âœ… Team statistics
â”‚   â”œâ”€â”€ AgentCard.js            âœ… Agent display
â”‚   â”œâ”€â”€ MessagePanel.js         âœ… Send messages
â”‚   â””â”€â”€ StatusFilter.js         âœ… Filter agents
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api.js                  âœ… HTTP API
â”‚   â”œâ”€â”€ socket.js               âœ… WebSocket
â”‚   â””â”€â”€ auth.js                 âœ… Token management
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useSocket.js            âœ… Socket hook
â”‚   â””â”€â”€ useTeamData.js          âœ… Team data hook
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ statusUtils.js          âœ… Status helpers
â”‚   â”œâ”€â”€ dateFormat.js           âœ… Date formatting
â”‚   â””â”€â”€ validation.js           âœ… Input validation
â”‚
â””â”€â”€ theme/
    â”œâ”€â”€ theme.js                âœ… MUI theme
    â””â”€â”€ colors.js               âœ… Color palette
```

**Dashboard à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ 100%!**

**Features:**
- âœ… Login/Logout
- âœ… Real-time WebSocket updates
- âœ… Team statistics overview
- âœ… Agent status monitoring
- âœ… Direct & Broadcast messaging
- âœ… Status filtering
- âœ… Responsive design
- âœ… Error handling

**à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸•à¹ˆà¸­à¹„à¸›:**
1. à¸—à¸”à¸ªà¸­à¸š Dashboard à¸£à¹ˆà¸§à¸¡à¸à¸±à¸š Agent Desktop App
2. à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
3. à¸—à¸”à¸ªà¸­à¸š real-time updates
4. Deploy to production (optional)