# 6.6.1 Project Structure Overview - Agent Wallboard System

## 🎯 Overview

เอกสารนี้จะแนะนำโครงสร้างของ Agent Wallboard System Starter Code Package ที่นักศึกษาจะได้รับ เพื่อให้เข้าใจภาพรวมของระบบและรู้ว่าแต่ละส่วนทำหน้าที่อะไรก่อนที่จะเริ่มพัฒนา

### 🎓 เป้าหมายการเรียนรู้
เมื่อจบการอ่านเอกสารนี้ นักศึกษาจะสามารถ:
- เข้าใจโครงสร้างโปรเจกต์โดยรวม
- รู้ว่าแต่ละ folder และไฟล์ทำหน้าที่อะไร
- เข้าใจการเชื่อมต่อระหว่าง components ต่าง ๆ
- พร้อมสำหรับการเริ่มต้นพัฒนา

---

## 📁 Complete Project Structure

### **📋 Root Level - ไฟล์หลักของโปรเจกต์**
```
agent-wallboard-system/
├── 📋 README.md                    # คู่มือเริ่มต้นสำหรับโปรเจกต์
├── 📋 SETUP.md                     # วิธีติดตั้งและตั้งค่าโดยละเอียด
├── 📄 package.json                 # Metadata และ scripts สำหรับโปรเจกต์รวม
├── 🔧 .gitignore                   # ไฟล์ที่ไม่ต้อง commit ลง Git
├── 🔒 .env.example                 # Template สำหรับ environment variables
└── 🐳 docker-compose.yml           # สำหรับ advanced deployment (optional)
```

**สิ่งสำคัญที่ต้องรู้:**
- **README.md** คือไฟล์แรกที่ต้องอ่าน มีข้อมูลเบื้องต้นและวิธี quick start
- **SETUP.md** มีคำแนะนำการติดตั้งแบบละเอียด สำหรับนักศึกษาที่ติดปัญหา
- **.env.example** ต้อง copy เป็น .env และปรับค่าให้เหมาะสม

---

## 🏗️ **Backend Server - หัวใจของระบบ**

```
backend-server/
├── 📦 package.json                 # Dependencies: express, socket.io, sqlite3, mongoose
├── 🔧 .env.example                 # Template: PORT, DATABASE_URL, JWT_SECRET
├── 🚀 server.js                    # Main entry point - เริ่มต้น Express และ WebSocket
│
├── ⚙️ config/
│   ├── 🗄️ database.js             # การเชื่อมต่อ SQLite และ MongoDB
│   └── 🔧 app.js                   # Configuration สำหรับ Express app
│
├── 🛣️ routes/                      # API Endpoints
│   ├── 🔐 auth.js                  # POST /login - Agent authentication
│   ├── 👥 agents.js                # GET, PUT /agents - Agent management
│   ├── 💬 messages.js              # POST, GET /messages - Message handling
│   └── 📊 dashboard.js             # GET /dashboard - Dashboard data
│
├── 🧠 models/                      # Database Models
│   ├── 📄 Agent.js                 # SQLite model สำหรับ agent data
│   ├── 💬 Message.js               # MongoDB model สำหรับ messages
│   └── 📊 Status.js                # MongoDB model สำหรับ status logs
│
├── 🔌 socket/                      # WebSocket Handling
│   ├── ⚡ socketHandler.js         # Main WebSocket event handler
│   ├── 📡 statusEvents.js          # Status change events
│   └── 💬 messageEvents.js         # Message sending/receiving events
│
├── 🛡️ middleware/
│   ├── 🔐 auth.js                  # JWT token validation
│   ├── 🌐 cors.js                  # CORS configuration
│   └── ❌ errorHandler.js          # Error handling middleware
│
└── 🧪 test/                        # Basic API tests (optional)
    ├── 🔐 auth.test.js             # Authentication tests
    └── 💬 messages.test.js         # Message API tests
```

**🎯 นักศึกษาจะทำงานกับ:**
- **routes/** - เพิ่ม API endpoints ใหม่
- **socket/statusEvents.js** - ปรับแต่ง real-time status updates
- **models/** - แก้ไข database schema ถ้าต้องการ

---

## 🖥️ **Agent Desktop App - Electron Application**

```
agent-desktop/
├── 📦 package.json                 # Dependencies: electron, react, socket.io-client
├── 🔧 .env.example                 # API_URL, SOCKET_URL, ELECTRON_IS_DEV
├── ⚡ main.js                      # Electron main process - สร้าง window, system tray
├── 🔒 preload.js                   # Security bridge ระหว่าง main และ renderer
│
├── 📝 public/
│   ├── 🌐 index.html              # HTML template สำหรับ React app
│   └── 🖼️ assets/                 # Icons, images สำหรับ Electron
│       ├── icon.png               # App icon
│       └── tray-icon.png          # System tray icon
│
├── ⚛️ src/                         # React Application Source
│   ├── 📱 App.js                   # Main React component - login state, WebSocket
│   ├── 🎯 index.js                 # React entry point
│   │
│   ├── 🧩 components/              # UI Components
│   │   ├── 🔐 Login.js             # Login form พร้อม validation
│   │   ├── 📊 StatusPanel.js       # Status buttons (Available/Busy/Break/Offline)
│   │   ├── 💬 MessageList.js       # Display received messages
│   │   ├── 🔔 Notifications.js     # Desktop notification handler
│   │   └── 👤 Profile.js           # Agent profile display
│   │
│   ├── 🔗 services/                # External Services
│   │   ├── 🌐 api.js               # HTTP API calls ไปยัง backend
│   │   ├── ⚡ socket.js            # WebSocket client connection
│   │   └── 💾 storage.js           # Local storage management
│   │
│   ├── 🎨 styles/                  # CSS Styling
│   │   ├── 📱 App.css              # Main application styles
│   │   ├── 🔐 Login.css            # Login form styles
│   │   └── 📊 Status.css           # Status panel styles
│   │
│   └── 🛠️ utils/                   # Helper Functions
│       ├── 📋 constants.js         # App constants (status types, colors)
│       └── 🔧 helpers.js           # Utility functions
│
└── 🏗️ build/                       # Built files (หลัง npm run build)
```

**🎯 นักศึกษาจะทำงานกับ:**
- **components/StatusPanel.js** - ปรับปรุง UI การเปลี่ยนสถานะ
- **components/MessageList.js** - เพิ่มฟีเจอร์ message history
- **styles/** - ปรับแต่ง appearance และ branding
- **main.js** - เพิ่มฟีเจอร์ system tray หรือ notifications

---

## 🌐 **Supervisor Dashboard - React Web Application**

```
supervisor-dashboard/
├── 📦 package.json                 # Dependencies: react, @mui/material, socket.io-client
├── 🔧 .env.example                 # API_URL, SOCKET_URL
│
├── 📝 public/
│   ├── 🌐 index.html              # HTML template
│   └── 🖼️ assets/                 # Images และ icons
│
├── ⚛️ src/                         # React Application Source
│   ├── 📱 App.js                   # Main dashboard app - layout, routing
│   ├── 🎯 index.js                 # React entry point พร้อม Material-UI theme
│   │
│   ├── 🧩 components/              # Dashboard Components
│   │   ├── 🔐 Login.js             # Supervisor login form
│   │   ├── 📊 Dashboard.js         # Main dashboard layout
│   │   ├── 👥 TeamOverview.js      # Team statistics และ overview
│   │   ├── 🃏 AgentStatusCard.js   # Individual agent status card
│   │   ├── 💬 MessagePanel.js      # Message sending interface
│   │   ├── 📈 TeamStatsCard.js     # Team performance statistics
│   │   └── 🔔 NotificationToast.js # Toast notifications
│   │
│   ├── 🎨 theme/                   # Material-UI Theming
│   │   ├── 🎨 theme.js             # Main theme configuration
│   │   ├── 🌈 colors.js            # Color palette สำหรับ status
│   │   └── 📝 typography.js        # Font และ text styling
│   │
│   ├── 🔗 services/                # External Services
│   │   ├── 🌐 api.js               # HTTP API calls
│   │   └── ⚡ socket.js            # WebSocket client
│   │
│   ├── 🎣 hooks/                   # Custom React Hooks
│   │   ├── 🔄 useRealtimeAgents.js # Real-time agent data hook
│   │   ├── ⚡ useSocket.js          # WebSocket connection hook
│   │   └── 📱 useResponsive.js     # Responsive design hook
│   │
│   └── 🛠️ utils/                   # Helper Functions
│       ├── 📋 constants.js         # App constants
│       └── 🔧 helpers.js           # Utility functions
│
└── 🏗️ build/                       # Built files (หลัง npm run build)
```

**🎯 นักศึกษาจะทำงานกับ:**
- **components/TeamOverview.js** - เพิ่ม analytics และ statistics
- **components/MessagePanel.js** - เพิ่ม message templates
- **theme/** - ปรับแต่ง colors, fonts, branding
- **hooks/useRealtimeAgents.js** - ปรับปรุง real-time data handling

---

## 🗄️ **Database Setup - SQLite & MongoDB**

```
database/
├── 📊 sqlite/                      # SQLite Master Data
│   ├── 💾 wallboard.db            # Pre-built database file พร้อม sample data
│   ├── 📜 init.sql                # Database schema creation
│   ├── 🎭 sample_data.sql         # Sample agents, teams, supervisors
│   └── 🔧 create_db.sh            # Script สำหรับสร้าง database ใหม่
│
├── 🍃 mongodb/                     # MongoDB Real-time Data
│   ├── 📊 collections.js          # MongoDB schema definitions
│   ├── 🎭 sample_data.js          # Sample messages และ status logs
│   └── 🔧 setup.sh                # MongoDB setup script
│
└── 📋 README.md                    # Database documentation และ instructions
```

**🎭 Sample Data ที่มีให้:**
```sql
-- SQLite Tables:
-- 👥 agents: AG001, AG002, AG003 (Customer Service)
--            AG004, AG005 (Technical Support)  
--            AG006, AG007 (Sales Team)
-- 👤 supervisors: SP001, SP002, SP003
-- 🏢 teams: Customer Service, Technical Support, Sales Team

-- MongoDB Collections:
-- 💬 messages: Sample direct และ broadcast messages
-- 📊 agent_status: Status change history
-- 🔗 connection_logs: Agent connection history
```

**🎯 นักศึกษาจะทำงานกับ:**
- **sample_data.sql** - เพิ่ม agents หรือ teams ใหม่สำหรับ testing
- **collections.js** - ปรับแต่ง MongoDB schema ถ้าต้องการ

---

## 📚 **Documentation & Scripts**

```
docs/                               # เอกสารประกอบ
├── 🏗️ architecture.md             # System architecture overview
├── 🔌 api-reference.md             # API endpoints documentation  
├── ⚡ websocket-events.md          # WebSocket events reference
└── 🔧 troubleshooting.md           # Common issues และ solutions

scripts/                            # Utility Scripts
├── 🚀 start-all.sh                # Start ทุก applications พร้อมกัน
├── 🧹 reset-data.sh               # Reset databases ให้กลับเป็น initial state
├── 🧪 test-system.sh              # Basic health check ของระบบ
└── 📦 install-all.sh              # Install dependencies ทุก components
```

---

## 🔗 **การเชื่อมต่อระหว่าง Components**

### **🌊 Data Flow Diagram**
```
👤 Agent Desktop App
    ↕️ (WebSocket)
🏗️ Backend Server ←→ 🗄️ Database (SQLite + MongoDB)
    ↕️ (WebSocket)  
🌐 Supervisor Dashboard
```

### **📡 Communication Protocols**

**1. Authentication Flow:**
```
Agent/Supervisor → HTTP POST /login → Backend → SQLite Query → JWT Token
```

**2. Real-time Status Updates:**
```
Agent Desktop → WebSocket 'update_status' → Backend → Broadcast → Supervisor Dashboard
```

**3. Message Sending:**
```
Supervisor → WebSocket 'send_message' → Backend → MongoDB Save → Agent Desktop
```

**4. Team Monitoring:**
```
Supervisor Dashboard → WebSocket Subscribe → Backend → Real-time Updates
```

---

## 🔧 **Environment Configuration**

### **📋 Required Environment Variables**

**Backend Server (.env):**
```bash
PORT=3001                           # Backend server port
NODE_ENV=development                # Environment mode
SQLITE_DB_PATH=../database/sqlite/wallboard.db
MONGODB_URI=mongodb://localhost:27017/wallboard
CORS_ORIGIN=http://localhost:3000   # Supervisor dashboard URL
JWT_SECRET=your-secret-key          # สำหรับ authentication
```

**Agent Desktop (.env):**
```bash
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SOCKET_URL=http://localhost:3001
ELECTRON_IS_DEV=true                # สำหรับ development mode
```

**Supervisor Dashboard (.env):**
```bash
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SOCKET_URL=http://localhost:3001
GENERATE_SOURCEMAP=false            # เพื่อ faster builds
```

---

## 🚀 **Quick Start Steps**

### **⚡ 3-Step Quick Start**

**Step 1: Install Dependencies**
```bash
# ใช้ script ที่เตรียมไว้
chmod +x scripts/install-all.sh
./scripts/install-all.sh

# หรือทำแยกแต่ละ component
cd backend-server && npm install
cd ../agent-desktop && npm install  
cd ../supervisor-dashboard && npm install
```

**Step 2: Setup Environment**
```bash
# Copy environment templates
cp backend-server/.env.example backend-server/.env
cp agent-desktop/.env.example agent-desktop/.env
cp supervisor-dashboard/.env.example supervisor-dashboard/.env

# Setup databases (ถ้าต้องการ)
cd database && chmod +x sqlite/create_db.sh && ./sqlite/create_db.sh
```

**Step 3: Start All Applications**
```bash
# ใช้ script ที่เตรียมไว้
chmod +x scripts/start-all.sh
./scripts/start-all.sh

# หรือเปิดแยก 3 terminals:
# Terminal 1: cd backend-server && npm run dev
# Terminal 2: cd supervisor-dashboard && npm start
# Terminal 3: cd agent-desktop && npm run electron-dev
```

### **🔍 Verification Steps**
```bash
1. ✅ Backend: เปิด http://localhost:3001/health ควรเห็น {"status":"OK"}
2. ✅ Supervisor: เปิด http://localhost:3000 ควรเห็นหน้า login
3. ✅ Agent Desktop: Electron window ควรเปิดขึ้นมาพร้อมหน้า login
4. ✅ Test Login: ใช้ SP001 (supervisor) และ AG001 (agent)
5. ✅ Real-time Test: เปลี่ยน status ใน agent, ดูใน supervisor dashboard
```

---

## 📦 **Dependencies Summary**

### **🏗️ Backend Dependencies**
```json
{
  "express": "Web server framework",
  "socket.io": "Real-time WebSocket communication", 
  "sqlite3": "SQLite database driver",
  "mongoose": "MongoDB object modeling",
  "cors": "Cross-origin resource sharing",
  "dotenv": "Environment variables management",
  "jsonwebtoken": "JWT authentication"
}
```

### **🖥️ Agent Desktop Dependencies**  
```json
{
  "electron": "Desktop application framework",
  "react": "UI library",
  "socket.io-client": "WebSocket client",
  "axios": "HTTP client for API calls"
}
```

### **🌐 Supervisor Dashboard Dependencies**
```json
{
  "react": "UI library",
  "@mui/material": "Material-UI component library",
  "@emotion/react": "CSS-in-JS styling",
  "socket.io-client": "WebSocket client", 
  "axios": "HTTP client",
  "chart.js": "Charts และ analytics (Week 2)"
}
```

---

## ✅ **Ready to Start Checklist**

### **📋 เมื่อได้ Starter Code Package มา:**

**Environment Check:**
- [ ] Node.js 18+ installed และ verified
- [ ] Git installed และ configured
- [ ] VS Code พร้อม useful extensions
- [ ] MongoDB service running locally

**Project Setup:**
- [ ] Downloaded/cloned โปรเจกต์เรียบร้อย
- [ ] All dependencies installed สำหรับ 3 components
- [ ] Environment files copied และ configured
- [ ] Database setup completed

**First Run:**
- [ ] Backend server starts ได้โดยไม่มี errors
- [ ] Supervisor dashboard loads ใน browser
- [ ] Agent desktop app opens เป็น Electron window
- [ ] Can login with sample credentials (SP001, AG001)

**Basic Functionality:**
- [ ] Agent status changes แสดงใน supervisor dashboard
- [ ] Supervisor สามารถส่งข้อความถึง agent ได้
- [ ] Desktop notifications ทำงานใน agent app
- [ ] Real-time updates working properly

---

## 🎯 **What's Next?**

หลังจากเข้าใจโครงสร้างโปรเจกต์แล้ว ขั้นตอนต่อไปคือ:

1. **📊 6.6.4 Database & Sample Data** - เข้าใจข้อมูลและ database schema
2. **🏗️ 6.6.2 Backend Server Code** - ศึกษา API endpoints และ WebSocket
3. **🖥️ 6.6.3 Frontend Applications** - เข้าใจ UI components และการทำงาน
4. **📅 6.2 Development Plan** - เริ่มพัฒนาตาม 14-day plan

### **💡 เคล็ดลับสำหรับการเริ่มต้น:**
- **📖 อ่าน README.md ของแต่ละ component** ก่อนเริ่มแก้ไขโค้ด
- **🧪 ทดสอบระบบให้ทำงานได้** ก่อนเริ่มปรับแต่ง
- **📝 จดบันทึกสิ่งที่เรียนรู้** ระหว่างการสำรวจโค้ด
- **🤝 ถามเพื่อนหรืออาจารย์** เมื่อเจอปัญหา

**🎉 ยินดีต้อนรับสู่การพัฒนา Agent Wallboard System!**

---

## 📞 **Need Help?**

**ถ้าติดปัญหาในการ setup:**
1. **ตรวจสอบ [6.1 Environment Setup](./6-1-environment-setup.md)** อีกครั้ง
2. **ดู error messages** ใน terminal/console ให้ละเอียด  
3. **เช็ค [Troubleshooting Guide](../docs/troubleshooting.md)** สำหรับปัญหาที่เจอบ่อย
4. **ถามใน class discussion forum** หรือปรึกษาอาจารย์

**Happy Coding! 🚀**