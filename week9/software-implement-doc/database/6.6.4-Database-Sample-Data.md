# 6.6.4 Database & Sample Data - Agent Wallboard System

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á Agent Wallboard System ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ **Hybrid Database Architecture** ‡∏Ñ‡∏∑‡∏≠ SQLite ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö master data ‡πÅ‡∏•‡∏∞ MongoDB ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time data ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á sample data ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### üéì ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ 2 database systems
- ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å database schema ‡πÅ‡∏•‡∏∞ table structure
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à sample data ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- ‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤

---

## üèóÔ∏è **Database Architecture Overview**

### **üéØ ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ 2 Databases?**

```
üìä SQLite (Master Data)          üçÉ MongoDB (Real-time Data)
‚îú‚îÄ‚îÄ üë• Agent Information        ‚îú‚îÄ‚îÄ üí¨ Messages
‚îú‚îÄ‚îÄ üè¢ Team Structure           ‚îú‚îÄ‚îÄ üìä Status Logs  
‚îú‚îÄ‚îÄ üë§ Supervisor Mapping       ‚îú‚îÄ‚îÄ üîó Connection Logs
‚îî‚îÄ‚îÄ ‚öôÔ∏è System Configuration      ‚îî‚îÄ‚îÄ üìà Performance Metrics
```

**üìä SQLite ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:**
- **Structured Data** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- **ACID Compliance** - ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **Referential Integrity** - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á tables
- **Complex Queries** - Join operations ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô

**üçÉ MongoDB ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:**
- **High Write Volume** - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time ‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ
- **Flexible Schema** - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏î‡πâ
- **Fast Read/Write** - Performance ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time operations
- **Time-series Data** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ timestamp

---

## üìä **SQLite Database Schema**

### **üóÑÔ∏è ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠**
```bash
‡πÑ‡∏ü‡∏•‡πå Database: database/sqlite/wallboard.db
Connection String: sqlite:../database/sqlite/wallboard.db
‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå: ~50KB (‡∏û‡∏£‡πâ‡∏≠‡∏° sample data)
```

### **üìã Tables Overview**
```sql
-- 4 ‡∏´‡∏•‡∏±‡∏Å tables ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö master data
TABLES:
‚îú‚îÄ‚îÄ teams           (3 records)   # ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°
‚îú‚îÄ‚îÄ agents          (13 records)  # ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Agent ‡πÅ‡∏•‡∏∞ Supervisor master data  
‚îú‚îÄ‚îÄ agent_sessions  (0 records)   # ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Login/logout (‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
‚îî‚îÄ‚îÄ system_config   (8 records)   # ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
```

---

### **üè¢ Table: teams**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• teams ‡πÅ‡∏•‡∏∞ supervisor mapping

```sql
CREATE TABLE teams (
    team_id INTEGER PRIMARY KEY AUTOINCREMENT,
    team_name VARCHAR(50) NOT NULL UNIQUE,
    supervisor_code VARCHAR(10),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT 1
);
```

**üìä Sample Data:**
```sql
INSERT INTO teams (team_id, team_name, supervisor_code, description) VALUES
(1, 'Customer Service', 'SP001', 'Main customer service team'),
(2, 'Technical Support', 'SP002', 'Technical support specialists'), 
(3, 'Sales Team', 'SP003', 'Sales and marketing team');
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **Supervisor Dashboard:** ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ team ‡∏ó‡∏µ‡πà supervisor ‡∏î‡∏π‡πÅ‡∏•
- **Agent Assignment:** ‡∏Å‡∏≥‡∏´‡∏ô‡∏î agents ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡∏°
- **Access Control:** ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡∏°

---

### **üë• Table: agents**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• agents ‡πÅ‡∏•‡∏∞ supervisors ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```sql
CREATE TABLE agents (
    agent_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL UNIQUE,
    agent_name VARCHAR(100) NOT NULL,
    team_id INTEGER NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('agent', 'supervisor')),
    email VARCHAR(100),
    phone VARCHAR(20),
    hire_date DATE,
    is_active BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (team_id) REFERENCES teams(team_id)
);
```

**üìä Sample Data (13 records):**
```sql
-- Supervisors (3)
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('SP001', 'Sarah Wilson', 1, 'supervisor', 'sarah.wilson@company.com', '555-0101', '2023-01-15'),
('SP002', 'Mike Johnson', 2, 'supervisor', 'mike.johnson@company.com', '555-0102', '2023-01-20'),
('SP003', 'Lisa Chen', 3, 'supervisor', 'lisa.chen@company.com', '555-0103', '2023-02-01');

-- Customer Service Team Agents (4)
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG001', 'John Smith', 1, 'agent', 'john.smith@company.com', '555-0201', '2023-03-01'),
('AG002', 'Emma Davis', 1, 'agent', 'emma.davis@company.com', '555-0202', '2023-03-05'),
('AG003', 'Robert Brown', 1, 'agent', 'robert.brown@company.com', '555-0203', '2023-03-10'),
('AG004', 'Jennifer Wilson', 1, 'agent', 'jennifer.wilson@company.com', '555-0204', '2023-03-15');

-- Technical Support Team Agents (3)
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG005', 'David Miller', 2, 'agent', 'david.miller@company.com', '555-0301', '2023-04-01'),
('AG006', 'Amanda Taylor', 2, 'agent', 'amanda.taylor@company.com', '555-0302', '2023-04-05'),
('AG007', 'Chris Anderson', 2, 'agent', 'chris.anderson@company.com', '555-0303', '2023-04-10');

-- Sales Team Agents (3)
INSERT INTO agents (agent_code, agent_name, team_id, role, email, phone, hire_date) VALUES
('AG008', 'Michelle Garcia', 3, 'agent', 'michelle.garcia@company.com', '555-0401', '2023-05-01'),
('AG009', 'Kevin Martinez', 3, 'agent', 'kevin.martinez@company.com', '555-0402', '2023-05-05'),
('AG010', 'Jessica Rodriguez', 3, 'agent', 'jessica.rodriguez@company.com', '555-0403', '2023-05-10');
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **Authentication:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö agent_code ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ login
- **Team Management:** ‡πÅ‡∏™‡∏î‡∏á agents ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏µ‡∏°
- **User Profile:** ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á agents

---

### **üìÖ Table: agent_sessions** *(‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)*

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° login/logout sessions

```sql
CREATE TABLE agent_sessions (
    session_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL,
    login_time DATETIME NOT NULL,
    logout_time DATETIME,
    session_duration INTEGER, -- in seconds
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (agent_code) REFERENCES agents(agent_code)
);
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Week 2):**
- **Session Tracking:** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° working hours
- **Security Audit:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- **Performance Analysis:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå usage patterns

---

### **‚öôÔ∏è Table: system_config**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö

```sql
CREATE TABLE system_config (
    config_id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key VARCHAR(50) NOT NULL UNIQUE,
    config_value TEXT NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT 1,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**üìä Sample Data (8 records):**
```sql
INSERT INTO system_config (config_key, config_value, description) VALUES
('status_timeout', '300', 'Auto-offline timeout in seconds'),
('message_retention', '30', 'Message retention in days'),
('max_concurrent_sessions', '1', 'Max sessions per agent'),
('notification_enabled', 'true', 'Enable desktop notifications'),
('websocket_timeout', '30000', 'WebSocket timeout in milliseconds'),
('api_rate_limit', '100', 'API requests per minute'),
('session_duration', '28800', 'Max session duration in seconds (8 hours)'),
('backup_interval', '86400', 'Database backup interval in seconds');
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **System Behavior:** ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö
- **Performance Tuning:** ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á timeouts ‡πÅ‡∏•‡∏∞ limits
- **Feature Toggles:** ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≤‡∏á ‡πÜ

---

## üçÉ **MongoDB Collections Schema**

### **üóÑÔ∏è Database ‡πÅ‡∏•‡∏∞ Connection**
```bash
Database Name: wallboard
Connection URI: mongodb://localhost:27017/wallboard
Collections: 4 collections ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time data
```

### **üìã Collections Overview**
```javascript
// 4 ‡∏´‡∏•‡∏±‡∏Å collections ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time data
COLLECTIONS:
‚îú‚îÄ‚îÄ messages         # Direct ‡πÅ‡∏•‡∏∞ broadcast messages
‚îú‚îÄ‚îÄ agent_status     # Status change history  
‚îú‚îÄ‚îÄ connection_logs  # Agent connection/disconnection logs
‚îî‚îÄ‚îÄ performance_metrics  # Team performance data (Week 2)
```

---

### **üí¨ Collection: messages**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

```javascript
const messageSchema = new mongoose.Schema({
  fromCode: {
    type: String,
    required: true,
    uppercase: true
  },
  toCode: {
    type: String,
    uppercase: true  // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö direct messages
  },
  toTeamId: {
    type: Number     // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö broadcast messages
  },
  content: {
    type: String,
    required: true,
    trim: true
  },
  type: {
    type: String,
    enum: ['direct', 'broadcast'],
    required: true
  },
  priority: {
    type: String,
    enum: ['low', 'normal', 'high'],
    default: 'normal'
  },
  isRead: {
    type: Boolean,
    default: false
  },
  readAt: {
    type: Date
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  }
});
```

**üìä Sample Data:**
```javascript
// Sample messages ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ setup
const sampleMessages = [
  {
    fromCode: "SP001",
    toCode: "AG001",
    content: "Good morning! Ready for the day?",
    type: "direct",
    priority: "normal",
    timestamp: new Date(),
    isRead: false
  },
  {
    fromCode: "SP001",
    toTeamId: 1,
    content: "Team meeting in 15 minutes",
    type: "broadcast",
    priority: "high",
    timestamp: new Date(),
    isRead: false
  },
  {
    fromCode: "SP002",
    toCode: "AG005",
    content: "Please check the technical queue",
    type: "direct",
    priority: "normal",
    timestamp: new Date(),
    isRead: true,
    readAt: new Date()
  }
];
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **Real-time Messaging:** ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á supervisor ‡πÅ‡∏•‡∏∞ agents
- **Message History:** ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- **Notification System:** ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô
- **Analytics:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÉ‡∏ô‡∏ó‡∏µ‡∏°

---

### **üìä Collection: agent_status**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á agents

```javascript
const statusSchema = new mongoose.Schema({
  agentCode: {
    type: String,
    required: true,
    uppercase: true,
    index: true
  },
  status: {
    type: String,
    enum: ['Available', 'Busy', 'Break', 'Offline'],
    required: true
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  },
  teamId: {
    type: Number,
    index: true
  },
  duration: {
    type: Number  // ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô status ‡∏ô‡∏µ‡πâ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
  },
  sessionId: {
    type: String  // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö connection session
  }
});
```

**üìä Sample Data:**
```javascript
// Sample status changes ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ setup
const sampleStatusLogs = [
  {
    agentCode: "AG001",
    status: "Available",
    timestamp: new Date(Date.now() - 3600000), // 1 hour ago
    teamId: 1,
    duration: 1800 // 30 minutes
  },
  {
    agentCode: "AG001", 
    status: "Busy",
    timestamp: new Date(Date.now() - 1800000), // 30 minutes ago
    teamId: 1,
    duration: 900 // 15 minutes
  },
  {
    agentCode: "AG001",
    status: "Break",
    timestamp: new Date(Date.now() - 900000), // 15 minutes ago
    teamId: 1,
    duration: 600 // 10 minutes
  },
  {
    agentCode: "AG002",
    status: "Available",
    timestamp: new Date(Date.now() - 7200000), // 2 hours ago
    teamId: 1,
    duration: 7200 // 2 hours
  }
];
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **Real-time Status Display:** ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á agents
- **Status History:** ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
- **Performance Analytics:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ utilization
- **Reporting:** ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå

---

### **üîó Collection: connection_logs**

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° WebSocket connections ‡πÅ‡∏•‡∏∞ disconnections

```javascript
const connectionLogSchema = new mongoose.Schema({
  agentCode: {
    type: String,
    required: true,
    uppercase: true,
    index: true
  },
  eventType: {
    type: String,
    enum: ['connect', 'disconnect', 'reconnect'],
    required: true
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  },
  socketId: {
    type: String,
    required: true
  },
  ipAddress: {
    type: String
  },
  userAgent: {
    type: String
  },
  connectionDuration: {
    type: Number  // ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
  },
  disconnectReason: {
    type: String  // ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
  }
});
```

**üìä Sample Data:**
```javascript
// Sample connection logs ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ setup
const sampleConnectionLogs = [
  {
    agentCode: "AG001",
    eventType: "connect",
    timestamp: new Date(Date.now() - 28800000), // 8 hours ago
    socketId: "socket_123456",
    ipAddress: "192.168.1.100",
    userAgent: "Agent Desktop App v1.0"
  },
  {
    agentCode: "AG001",
    eventType: "disconnect", 
    timestamp: new Date(Date.now() - 3600000), // 1 hour ago
    socketId: "socket_123456",
    connectionDuration: 25200, // 7 hours
    disconnectReason: "client_disconnect"
  },
  {
    agentCode: "AG002",
    eventType: "connect",
    timestamp: new Date(Date.now() - 14400000), // 4 hours ago
    socketId: "socket_789012",
    ipAddress: "192.168.1.101",
    userAgent: "Agent Desktop App v1.0"
  }
];
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
- **Connection Monitoring:** ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° network stability
- **Session Tracking:** ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **Troubleshooting:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå connection issues
- **Security:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö unauthorized connections

---

### **üìà Collection: performance_metrics** *(Week 2 Feature)*

**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• team performance ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö analytics

```javascript
const performanceMetricsSchema = new mongoose.Schema({
  teamId: {
    type: Number,
    required: true,
    index: true
  },
  date: {
    type: Date,
    required: true,
    index: true
  },
  metrics: {
    totalAgents: { type: Number, default: 0 },
    activeAgents: { type: Number, default: 0 },
    utilization: { type: Number, default: 0 },  // percentage
    averageStatusDuration: {
      Available: { type: Number, default: 0 },
      Busy: { type: Number, default: 0 },
      Break: { type: Number, default: 0 }
    },
    messagesSent: { type: Number, default: 0 },
    messagesSentByType: {
      direct: { type: Number, default: 0 },
      broadcast: { type: Number, default: 0 }
    },
    connectionStability: { type: Number, default: 100 } // percentage
  }
}, {
  collection: 'performance_metrics',
  timestamps: true
});
```

**üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Week 2):**
- **Team Analytics Dashboard:** ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
- **Performance Reports:** ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
- **Trend Analysis:** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° performance

---

## üõ†Ô∏è **Database Setup Scripts**

### **üìä SQLite Setup**

**Location:** `database/sqlite/`

**üîß create_db.sh:**
```bash
#!/bin/bash
echo "üîß Creating SQLite Database..."

# Remove existing database for fresh start
rm -f wallboard.db

# Create database and tables
sqlite3 wallboard.db < init.sql
sqlite3 wallboard.db < sample_data.sql

echo "‚úÖ SQLite database created successfully!"
echo "üìä Database location: $(pwd)/wallboard.db"

# Verify data
echo "üîç Verification:"
sqlite3 wallboard.db "SELECT role, COUNT(*) as count FROM agents GROUP BY role;"
sqlite3 wallboard.db "SELECT team_name, supervisor_code FROM teams;"
```

**üìú init.sql - Schema Creation:**
```sql
-- Create teams table
CREATE TABLE teams (
    team_id INTEGER PRIMARY KEY AUTOINCREMENT,
    team_name VARCHAR(50) NOT NULL UNIQUE,
    supervisor_code VARCHAR(10),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT 1
);

-- Create agents table
CREATE TABLE agents (
    agent_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL UNIQUE,
    agent_name VARCHAR(100) NOT NULL,
    team_id INTEGER NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('agent', 'supervisor')),
    email VARCHAR(100),
    phone VARCHAR(20),
    hire_date DATE,
    is_active BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (team_id) REFERENCES teams(team_id)
);

-- Create agent_sessions table
CREATE TABLE agent_sessions (
    session_id INTEGER PRIMARY KEY AUTOINCREMENT,
    agent_code VARCHAR(10) NOT NULL,
    login_time DATETIME NOT NULL,
    logout_time DATETIME,
    session_duration INTEGER,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (agent_code) REFERENCES agents(agent_code)
);

-- Create system_config table
CREATE TABLE system_config (
    config_id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key VARCHAR(50) NOT NULL UNIQUE,
    config_value TEXT NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT 1,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Create indexes for performance
CREATE INDEX idx_agents_team_id ON agents(team_id);
CREATE INDEX idx_agents_code ON agents(agent_code);
CREATE INDEX idx_sessions_agent ON agent_sessions(agent_code);
CREATE INDEX idx_config_key ON system_config(config_key);
```

**üé≠ sample_data.sql - Sample Data:**
```sql
-- Insert teams
INSERT INTO teams (team_id, team_name, supervisor_code, description) VALUES
(1, 'Customer Service', 'SP001', 'Main customer service team'),
(2, 'Technical Support', 'SP002', 'Technical support specialists'), 
(3, 'Sales Team', 'SP003', 'Sales and marketing team');

-- Insert supervisors and agents (13 records total)
-- [Complete SQL script ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡πÉ‡∏ô starter package]

-- Insert system configuration
INSERT INTO system_config (config_key, config_value, description) VALUES
('status_timeout', '300', 'Auto-offline timeout in seconds'),
('message_retention', '30', 'Message retention in days'),
('max_concurrent_sessions', '1', 'Max sessions per agent'),
('notification_enabled', 'true', 'Enable desktop notifications'),
('websocket_timeout', '30000', 'WebSocket timeout in milliseconds'),
('api_rate_limit', '100', 'API requests per minute'),
('session_duration', '28800', 'Max session duration in seconds (8 hours)'),
('backup_interval', '86400', 'Database backup interval in seconds');
```

---

### **üçÉ MongoDB Setup**

**Location:** `database/mongodb/`

**üîß setup.sh:**
```bash
#!/bin/bash
echo "üçÉ Setting up MongoDB..."

# Check if MongoDB is running
if ! mongosh --eval "db.adminCommand('ismaster')" >/dev/null 2>&1; then
    echo "‚ùå MongoDB is not running. Please start MongoDB first."
    echo "   Windows: net start MongoDB"
    echo "   macOS: brew services start mongodb/brew/mongodb-community"
    echo "   Linux: sudo systemctl start mongod"
    exit 1
fi

echo "‚úÖ MongoDB is running"

# Run sample data script
echo "üìä Creating sample data..."
node sample_data.js

echo "‚úÖ MongoDB setup completed!"
echo "üîç Verify with: mongosh wallboard --eval 'show collections'"
```

**üé≠ sample_data.js - MongoDB Data:**
```javascript
const mongoose = require('mongoose');
require('dotenv').config();

// MongoDB connection
const MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/wallboard';

// Schema definitions (same as in models/)
const messageSchema = new mongoose.Schema({
  fromCode: { type: String, required: true, uppercase: true },
  toCode: { type: String, uppercase: true },
  toTeamId: { type: Number },
  content: { type: String, required: true },
  type: { type: String, enum: ['direct', 'broadcast'], required: true },
  priority: { type: String, enum: ['low', 'normal', 'high'], default: 'normal' },
  isRead: { type: Boolean, default: false },
  readAt: { type: Date },
  timestamp: { type: Date, default: Date.now }
});

const statusSchema = new mongoose.Schema({
  agentCode: { type: String, required: true, uppercase: true },
  status: { type: String, enum: ['Available', 'Busy', 'Break', 'Offline'], required: true },
  timestamp: { type: Date, default: Date.now },
  teamId: { type: Number },
  duration: { type: Number }
});

const connectionLogSchema = new mongoose.Schema({
  agentCode: { type: String, required: true, uppercase: true },
  eventType: { type: String, enum: ['connect', 'disconnect', 'reconnect'], required: true },
  timestamp: { type: Date, default: Date.now },
  socketId: { type: String, required: true },
  ipAddress: { type: String },
  userAgent: { type: String },
  connectionDuration: { type: Number }
});

const Message = mongoose.model('Message', messageSchema);
const AgentStatus = mongoose.model('AgentStatus', statusSchema);
const ConnectionLog = mongoose.model('ConnectionLog', connectionLogSchema);

async function insertSampleData() {
  try {
    console.log('üßπ Clearing existing data...');
    await Message.deleteMany({});
    await AgentStatus.deleteMany({});
    await ConnectionLog.deleteMany({});

    console.log('üí¨ Inserting sample messages...');
    const sampleMessages = [
      {
        fromCode: "SP001",
        toCode: "AG001", 
        content: "Good morning! Ready for the day?",
        type: "direct",
        priority: "normal",
        timestamp: new Date(Date.now() - 3600000), // 1 hour ago
        isRead: true,
        readAt: new Date(Date.now() - 3500000)
      },
      {
        fromCode: "SP001",
        toTeamId: 1,
        content: "Team meeting in 15 minutes",
        type: "broadcast", 
        priority: "high",
        timestamp: new Date(Date.now() - 1800000), // 30 minutes ago
        isRead: false
      },
      {
        fromCode: "SP002",
        toCode: "AG005",
        content: "Please check the technical queue",
        type: "direct",
        priority: "normal", 
        timestamp: new Date(Date.now() - 900000), // 15 minutes ago
        isRead: false
      },
      {
        fromCode: "SP003",
        toTeamId: 3,
        content: "Great sales numbers this week!",
        type: "broadcast",
        priority: "normal",
        timestamp: new Date(Date.now() - 7200000), // 2 hours ago
        isRead: true
      }
    ];
    await Message.insertMany(sampleMessages);

    console.log('üìä Inserting sample status logs...');
    const sampleStatusLogs = [
      {
        agentCode: "AG001",
        status: "Available", 
        timestamp: new Date(Date.now() - 7200000), // 2 hours ago
        teamId: 1,
        duration: 3600
      },
      {
        agentCode: "AG001",
        status: "Busy",
        timestamp: new Date(Date.now() - 3600000), // 1 hour ago
        teamId: 1,
        duration: 1800
      },
      {
        agentCode: "AG002", 
        status: "Available",
        timestamp: new Date(Date.now() - 14400000), // 4 hours ago
        teamId: 1,
        duration: 7200
      },
      {
        agentCode: "AG005",
        status: "Busy",
        timestamp: new Date(Date.now() - 1800000), // 30 minutes ago
        teamId: 2,
        duration: 1500
      }
    ];
    await AgentStatus.insertMany(sampleStatusLogs);

    console.log('üîó Inserting sample connection logs...');
    const sampleConnectionLogs = [
      {
        agentCode: "AG001",
        eventType: "connect",
        timestamp: new Date(Date.now() - 28800000), // 8 hours ago
        socketId: "socket_ag001_001",
        ipAddress: "192.168.1.100",
        userAgent: "Agent Desktop App v1.0"
      },
      {
        agentCode: "AG001", 
        eventType: "disconnect",
        timestamp: new Date(Date.now() - 3600000), // 1 hour ago
        socketId: "socket_ag001_001",
        connectionDuration: 25200 // 7 hours
      },
      {
        agentCode: "AG002",
        eventType: "connect", 
        timestamp: new Date(Date.now() - 14400000), // 4 hours ago
        socketId: "socket_ag002_001",
        ipAddress: "192.168.1.101",
        userAgent: "Agent Desktop App v1.0"
      }
    ];
    await ConnectionLog.insertMany(sampleConnectionLogs);

    // Verify data
    const messageCount = await Message.countDocuments();
    const statusCount = await AgentStatus.countDocuments();
    const logCount = await ConnectionLog.countDocuments();

    console.log(`üìä Verification:
    - Messages: ${messageCount} records
    - Status logs: ${statusCount} records  
    - Connection logs: ${logCount} records`);

    console.log('‚úÖ Sample data inserted successfully!');

  } catch (error) {
    console.error('‚ùå Error inserting sample data:', error);
  }
}

// MongoDB Connection and Setup
async function setupMongoDB() {
  try {
    await mongoose.connect(MONGODB_URI);
    console.log('‚úÖ Connected to MongoDB');

    await insertSampleData();
    
    console.log('üöÄ MongoDB setup completed successfully!');
  } catch (error) {
    console.error('‚ùå MongoDB setup failed:', error);
  } finally {
    await mongoose.disconnect();
  }
}

// Export for use in other files
module.exports = {
  setupMongoDB,
  insertSampleData
};

// Run setup if called directly
if (require.main === module) {
  setupMongoDB();
}
```

---

## üß™ **‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**

### **üîê Login Credentials ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Testing**

**üë§ Supervisors:**
```
SP001 - Sarah Wilson (Customer Service Team - Team ID: 1)
SP002 - Mike Johnson (Technical Support Team - Team ID: 2)  
SP003 - Lisa Chen (Sales Team - Team ID: 3)
```

**üë• Agents:**
```
Customer Service Team (Team ID: 1):
‚îú‚îÄ‚îÄ AG001 - John Smith
‚îú‚îÄ‚îÄ AG002 - Emma Davis
‚îú‚îÄ‚îÄ AG003 - Robert Brown
‚îî‚îÄ‚îÄ AG004 - Jennifer Wilson

Technical Support Team (Team ID: 2):
‚îú‚îÄ‚îÄ AG005 - David Miller
‚îú‚îÄ‚îÄ AG006 - Amanda Taylor
‚îî‚îÄ‚îÄ AG007 - Chris Anderson

Sales Team (Team ID: 3):
‚îú‚îÄ‚îÄ AG008 - Michelle Garcia
‚îú‚îÄ‚îÄ AG009 - Kevin Martinez
‚îî‚îÄ‚îÄ AG010 - Jessica Rodriguez
```

### **üß™ Basic Testing Scenarios**

**Scenario 1: Multi-Agent Testing**
```bash
1. Login as supervisor SP001
2. Login as agents AG001, AG002, AG003 (Customer Service Team)
3. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô status ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ agent ‚Üí ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï real-time updates ‡πÉ‡∏ô supervisor dashboard
4. ‡∏™‡πà‡∏á direct message ‡∏à‡∏≤‡∏Å supervisor ‡πÑ‡∏õ‡∏¢‡∏±‡∏á specific agent
5. ‡∏™‡πà‡∏á broadcast message ‡πÑ‡∏õ‡∏¢‡∏±‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡∏°
```

**Scenario 2: Cross-Team Testing**
```bash
1. Login as different supervisors (SP001, SP002, SP003)
2. Login as agents ‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏ó‡∏µ‡∏°
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ supervisors ‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏Ñ‡πà team members ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡∏°‡∏ï‡πà‡∏≤‡∏á ‡πÜ
```

**Scenario 3: Performance Testing**
```bash
1. Login ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ multiple agents (AG001-AG005)
2. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô status ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô multiple agents
3. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏¢ ‡πÜ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
4. ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° system performance ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
```

---

## üîç **Database Query Examples**

### **üìä SQLite Useful Queries**

```sql
-- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
SELECT t.team_name, t.supervisor_code, COUNT(a.agent_id) as agent_count
FROM teams t
LEFT JOIN agents a ON t.team_id = a.team_id AND a.role = 'agent'
GROUP BY t.team_id, t.team_name, t.supervisor_code;

-- ‡∏î‡∏π agents ‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞
SELECT agent_code, agent_name, role, email
FROM agents 
WHERE team_id = 1 AND is_active = 1
ORDER BY role DESC, agent_name;

-- ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
SELECT config_key, config_value, description
FROM system_config 
WHERE is_active = 1
ORDER BY config_key;

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö supervisors ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•
SELECT a.agent_code, a.agent_name, t.team_name
FROM agents a
JOIN teams t ON a.team_id = t.team_id
WHERE a.role = 'supervisor'
ORDER BY a.agent_name;
```

### **üçÉ MongoDB Useful Queries**

```javascript
// 1. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
db.messages.find().sort({timestamp: -1}).limit(10);

// 2. ‡∏î‡∏π Status Changes ‡∏Ç‡∏≠‡∏á Agent
db.agent_status.find({agentCode: "AG001"}).sort({timestamp: -1}).limit(5);

// 3. ‡∏î‡∏π Connection Activity
db.connection_logs.find({eventType: "connect"}).sort({timestamp: -1}).limit(5);

// 4. ‡∏´‡∏≤ Broadcast Messages
db.messages.find({type: "broadcast"}).sort({timestamp: -1});

// 5. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô
db.messages.find({isRead: false}).sort({timestamp: -1});

// 6. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå status distribution
db.agent_status.aggregate([
  {$group: {_id: "$status", count: {$sum: 1}}},
  {$sort: {count: -1}}
]);

// 7. ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏á agent ‡πÄ‡∏â‡∏û‡∏≤‡∏∞
db.connection_logs.find({agentCode: "AG001"}).sort({timestamp: -1});
```

---

## üîß **Database Maintenance Scripts**

### **üßπ Reset to Initial State**

**reset_data.sh:**
```bash
#!/bin/bash
echo "‚ö†Ô∏è  This will reset all data to initial state. Continue? (y/N)"
read -r response

if [[ "$response" =~ ^[Yy]$ ]]; then
    echo "üßπ Resetting databases..."
    
    # Reset SQLite
    echo "üìä Resetting SQLite..."
    cd database/sqlite
    ./create_db.sh
    cd ../..
    
    # Reset MongoDB  
    echo "üçÉ Resetting MongoDB..."
    mongosh wallboard --eval "db.dropDatabase()"
    cd database/mongodb
    node sample_data.js
    cd ../..
    
    echo "‚úÖ Databases reset to initial state"
    echo "üîç Verify:"
    echo "   SQLite: sqlite3 database/sqlite/wallboard.db 'SELECT COUNT(*) FROM agents;'"
    echo "   MongoDB: mongosh wallboard --eval 'db.stats()'"
else
    echo "‚ùå Reset cancelled"
fi
```

### **üíæ Backup Script**

**backup_data.sh:**
```bash
#!/bin/bash
BACKUP_DIR="backups/$(date +%Y%m%d_%H%M%S)"
mkdir -p $BACKUP_DIR

echo "üíæ Creating backup..."

# Backup SQLite
echo "üìä Backing up SQLite..."
cp database/sqlite/wallboard.db $BACKUP_DIR/

# Backup MongoDB
echo "üçÉ Backing up MongoDB..."
mongodump --db wallboard --out $BACKUP_DIR/mongodb/

echo "‚úÖ Backup completed: $BACKUP_DIR"
echo "üìÅ Contents:"
ls -la $BACKUP_DIR/
```

---

## ‚úÖ **Database Verification Checklist**

### **üìã ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ Starter Code ‡∏°‡∏≤:**

**SQLite Verification:**
- [ ] ‡πÑ‡∏ü‡∏•‡πå `database/sqlite/wallboard.db` ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡∏∞ accessible
- [ ] Tables ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß (teams, agents, agent_sessions, system_config)
- [ ] Sample data ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (3 teams, 13 agents, 8 configs)
- [ ] ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ query ‡∏î‡πâ‡∏ß‡∏¢ SQL ‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥

**MongoDB Verification:**
- [ ] MongoDB service running ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ
- [ ] Database `wallboard` ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
- [ ] Collections ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (messages, agent_status, connection_logs)
- [ ] Sample data ‡∏°‡∏µ‡πÉ‡∏ô collections

**Integration Verification:**
- [ ] Backend ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ databases ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
- [ ] Sample login credentials ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ (SP001, AG001)
- [ ] Status changes ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á MongoDB ‡πÑ‡∏î‡πâ
- [ ] Messages save/retrieve ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

## üéØ **Next Steps**

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à database schema ‡πÅ‡∏•‡∏∞ sample data ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏Ñ‡∏∑‡∏≠:

1. **üèóÔ∏è 6.6.2 Backend Server Code** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ databases ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î
2. **üñ•Ô∏è 6.6.3 Frontend Applications** - ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô UI
3. **üìÖ 6.2 Development Plan** - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡∏≤‡∏° 14-day roadmap

### **üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö Database:**

**üîç ‡∏Å‡∏≤‡∏£ Debug Database Issues:**
- **‡πÉ‡∏ä‡πâ Database Browser Tools** - SQLite Browser ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SQLite, MongoDB Compass ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MongoDB
- **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Connection Strings** - ‡πÉ‡∏ô .env files ‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏î‡∏π Backend Logs** - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î database errors
- **Test Queries ‡∏Å‡πà‡∏≠‡∏ô** - ‡∏•‡∏≠‡∏á‡∏£‡∏±‡∏ô queries ‡πÉ‡∏ô database tools ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î

**üìä ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
- **‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Simple Queries** - SELECT ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥ complex joins
- **‡πÉ‡∏ä‡πâ Indexes ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏≤‡∏ç‡∏â‡∏•‡∏≤‡∏î** - ‡πÄ‡∏û‡∏∑‡πà‡∏≠ performance ‡∏ó‡∏µ‡πà‡∏î‡∏µ
- **Monitor Query Performance** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time operations
- **Keep Data Fresh** - ‡πÉ‡∏ä‡πâ reset scripts ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∏‡πà‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

**üîê Security Best Practices:**
- **‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö Sensitive Data** - ‡πÉ‡∏ô sample data
- **‡πÉ‡∏ä‡πâ Environment Variables** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö database credentials
- **Regular Backups** - ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö features ‡πÉ‡∏´‡∏°‡πà
- **Validate Input Data** - ‡∏Å‡πà‡∏≠‡∏ô insert/update database

---

## üìû **Need Help with Database?**

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Database:**

**üîß SQLite Issues:**
1. **Database file not found** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö path ‡πÉ‡∏ô .env file
2. **Permission denied** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö file permissions
3. **Table doesn't exist** - ‡∏£‡∏±‡∏ô init.sql script ‡πÉ‡∏´‡∏°‡πà
4. **Sample data missing** - ‡∏£‡∏±‡∏ô sample_data.sql script

**üçÉ MongoDB Issues:**
1. **Connection refused** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ MongoDB service ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
2. **Database not found** - ‡∏£‡∏±‡∏ô sample_data.js script
3. **Collection empty** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö sample data insertion
4. **Query errors** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö syntax ‡πÉ‡∏ô MongoDB shell

**üìã Quick Troubleshooting Commands:**
```bash
# Test SQLite connection
sqlite3 database/sqlite/wallboard.db "SELECT COUNT(*) FROM agents;"

# Test MongoDB connection  
mongosh wallboard --eval "db.stats()"

# Check backend database connections
curl http://localhost:3001/api/test/database

# Reset everything if needed
chmod +x scripts/reset-data.sh && ./scripts/reset-data.sh
```

**üÜò Emergency Reset:**
‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏∏‡πà‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:
```bash
# Complete database reset
rm -f database/sqlite/wallboard.db
cd database/sqlite && ./create_db.sh && cd ../..
mongosh wallboard --eval "db.dropDatabase()"
cd database/mongodb && node sample_data.js && cd ../..
```

---

## üéâ **‡∏™‡∏£‡∏∏‡∏õ Database Architecture**

**üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**

### **üìä SQLite (Master Data):**
- **4 Tables** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- **13 Sample Users** (3 supervisors + 10 agents)
- **3 Teams** ‡∏û‡∏£‡πâ‡∏≠‡∏° supervisor assignments
- **8 Configuration Settings** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### **üçÉ MongoDB (Real-time Data):**
- **4 Collections** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• dynamic
- **Flexible Schema** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time requirements
- **Time-series Data** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö analytics ‡πÅ‡∏•‡∏∞ reporting
- **Performance Optimized** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö high-frequency operations

### **üîó Integration Benefits:**
- **Best of Both Worlds** - Structured + Flexible data storage
- **Performance Optimization** - Right tool for right job
- **Scalability** - Can scale each database independently
- **Learning Experience** - Practical experience with hybrid architecture

**üöÄ ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ Agent Wallboard System!**

**Database ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î Backend ‡πÅ‡∏•‡∏∞ Frontend** üí™

---

## üìö **Additional Resources**

**üìñ Documentation Links:**
- **SQLite Tutorial:** https://www.sqlitetutorial.net/
- **MongoDB Manual:** https://docs.mongodb.com/manual/
- **SQL vs NoSQL:** https://www.mongodb.com/nosql-explained/nosql-vs-sql
- **Database Design Best Practices:** ‡∏î‡∏π‡πÉ‡∏ô docs/database-design.md

**üõ†Ô∏è Recommended Tools:**
- **SQLite Browser:** https://sqlitebrowser.org/ (Free GUI for SQLite)
- **MongoDB Compass:** https://www.mongodb.com/products/compass (Free GUI for MongoDB)
- **VS Code Extensions:** SQLite, MongoDB for VS Code
- **Command Line Tools:** sqlite3, mongosh

**üéì Learning Path ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Database:**
1. **Week 1 Day 1-2:** ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à schema ‡πÅ‡∏•‡∏∞ sample data
2. **Week 1 Day 3-4:** ‡∏ó‡∏î‡∏™‡∏≠‡∏ö queries ‡πÅ‡∏•‡∏∞ data manipulation
3. **Week 1 Day 5-7:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö backend code
4. **Week 2:** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞ optimize performance

**Happy Database Learning! üóÑÔ∏è‚ú®**