# 6.6.3.2 Frontend Applications - React Dashboard

## 🎯 Overview

เอกสารนี้จะอธิบายโครงสร้างและการพัฒนา **Supervisor Dashboard** ที่สร้างด้วย **React.js + Material-UI** สำหรับระบบ Agent Wallboard System โดย Dashboard นี้จะเป็นเว็บแอปพลิเคชันสำหรับ Supervisor ในการติดตามและจัดการทีม

### 🎓 เป้าหมายการเรียนรู้
เมื่อจบการอ่านเอกสารนี้ นักศึกษาจะสามารถ:
- เข้าใจโครงสร้างของ React dashboard ที่เตรียมไว้ให้
- รู้วิธีการใช้ Material-UI components เบื้องต้น
- เข้าใจการทำงานของ real-time dashboard
- สามารถปรับแต่งและเพิ่มฟีเจอร์ dashboard ได้

---

## 🏗️ **React Dashboard ที่ได้ในชุด Starter Code**

### **📊 ระดับความพร้อมใช้งาน: 70% Complete**

```
✅ พร้อมใช้งาน:
├── ⚛️ React app with Material-UI setup
├── 🔐 Login form สำหรับ supervisors
├── 📊 Team overview dashboard
├── 👥 Agent status cards พร้อม real-time updates
├── 💬 Message sending interface (direct + broadcast)
└── 📱 Basic responsive layout

🎯 นักศึกษาต้องเพิ่ม/แก้ไข:
├── 🎨 ปรับปรุง dashboard layout และ design
├── 📈 เพิ่ม team statistics และ analytics
├── 🌈 ปรับแต่ง Material-UI theming
└── ⚡ เพิ่ม advanced features (templates, profiles)
```

---

## 📁 **Project Structure (Simple & Practical)**

```
supervisor-dashboard/
├── 📦 package.json                # Dependencies: react, @mui/material, socket.io-client
├── 🔧 .env.example                # API_URL, SOCKET_URL
├── 📝 public/
│   ├── 🌐 index.html              # HTML template
│   ├── 🖼️ favicon.ico             # Dashboard favicon
│   └── 📱 manifest.json           # PWA manifest (optional)
│
├── ⚛️ src/                         # React Application Source
│   ├── 📱 App.js                   # Main dashboard app - routing, auth state
│   ├── 🎯 index.js                 # React entry point
│   ├── 📄 App.css                  # Global app styles
│   │
│   ├── 🧩 components/              # Dashboard Components
│   │   ├── 🔐 LoginForm.js         # Supervisor login
│   │   ├── 📊 Dashboard.js         # Main dashboard layout
│   │   ├── 👥 TeamOverview.js      # Team statistics panel
│   │   ├── 🏷️ AgentCard.js         # Individual agent status card
│   │   ├── 💬 MessagePanel.js      # Send messages interface
│   │   ├── 📋 MessageHistory.js    # Message history viewer
│   │   └── 🎛️ StatusFilter.js      # Filter agents by status
│   │
│   ├── 🎨 theme/                   # Material-UI Theming
│   │   ├── 🌈 theme.js             # Main theme configuration
│   │   ├── 🎨 colors.js            # Color palette
│   │   └── 📱 breakpoints.js       # Responsive breakpoints
│   │
│   ├── 🔗 services/                # API และ WebSocket Services
│   │   ├── 🌐 api.js               # HTTP API calls
│   │   ├── ⚡ socket.js            # WebSocket connection
│   │   └── 🔐 auth.js              # Authentication helper
│   │
│   ├── 🎣 hooks/                   # Custom React Hooks
│   │   ├── 🔌 useSocket.js         # WebSocket hook
│   │   ├── 👥 useTeamData.js       # Team data management
│   │   └── 💬 useMessages.js       # Message management
│   │
│   └── 🛠️ utils/                   # Helper Functions
│       ├── 📅 dateFormat.js        # Date/time formatting
│       ├── 📊 statusUtils.js       # Status color/label helpers
│       └── 🛡️ validation.js        # Form validation
│
└── 🏗️ build/                       # Built files (after npm run build)
```

---

## ⚛️ **Main App Component (App.js)**

### **🎯 App.js - Dashboard หลัก**
```javascript
// src/App.js - React dashboard หลัก
import React, { useState, useEffect } from 'react';
import { ThemeProvider, CssBaseline, Container } from '@mui/material';
import LoginForm from './components/LoginForm';
import Dashboard from './components/Dashboard';
import { connectSocket, disconnectSocket } from './services/socket';
import theme from './theme/theme';
import './App.css';

function App() {
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  const [supervisor, setSupervisor] = useState(null);
  const [teamData, setTeamData] = useState([]);
  const [messages, setMessages] = useState([]);

  // 🔌 เชื่อมต่อ WebSocket เมื่อ login สำเร็จ
  useEffect(() => {
    if (isLoggedIn && supervisor) {
      connectSocket(supervisor.supervisorCode);
      
      // ฟัง agent status updates
      window.socket?.on('agent_status_update', (data) => {
        setTeamData(prev => prev.map(agent => 
          agent.agentCode === data.agentCode 
            ? { ...agent, currentStatus: data.status, lastUpdate: data.timestamp }
            : agent
        ));
      });
      
      // ฟัง agent connections
      window.socket?.on('agent_connected', (data) => {
        setTeamData(prev => prev.map(agent => 
          agent.agentCode === data.agentCode 
            ? { ...agent, isOnline: true, lastSeen: data.timestamp }
            : agent
        ));
      });

      // ฟัง agent disconnections
      window.socket?.on('agent_disconnected', (data) => {
        setTeamData(prev => prev.map(agent => 
          agent.agentCode === data.agentCode 
            ? { ...agent, isOnline: false, lastSeen: data.timestamp }
            : agent
        ));
      });
    }
    
    return () => {
      disconnectSocket();
    };
  }, [isLoggedIn, supervisor]);

  // 🔐 Handle login
  const handleLogin = (supervisorData, initialTeamData) => {
    setSupervisor(supervisorData);
    setTeamData(initialTeamData);
    setIsLoggedIn(true);
  };

  // 💬 Handle message sending
  const handleSendMessage = (messageData) => {
    window.socket?.emit('send_message', {
      from: supervisor.supervisorCode,
      ...messageData
    });
    
    // เพิ่มข้อความลง history
    setMessages(prev => [...prev, {
      ...messageData,
      timestamp: new Date(),
      sender: supervisor.name
    }]);
  };

  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <Container maxWidth="xl" sx={{ py: 2 }}>
        {!isLoggedIn ? (
          <LoginForm onLogin={handleLogin} />
        ) : (
          <Dashboard
            supervisor={supervisor}
            teamData={teamData}
            messages={messages}
            onSendMessage={handleSendMessage}
          />
        )}
      </Container>
    </ThemeProvider>
  );
}

export default App;
```

---

## 🧩 **Key Components ที่นักศึกษาจะทำงานด้วย**

### **🔐 LoginForm.js**
```javascript
// src/components/LoginForm.js
import React, { useState } from 'react';
import {
  Paper, TextField, Button, Typography, Alert, Box, CircularProgress
} from '@mui/material';
import { AccountCircle } from '@mui/icons-material';
import { loginSupervisor } from '../services/api';

function LoginForm({ onLogin }) {
  const [supervisorCode, setSupervisorCode] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    try {
      const response = await loginSupervisor(supervisorCode);
      onLogin(response.supervisor, response.teamData);
    } catch (err) {
      setError('Invalid supervisor code or team not found');
    } finally {
      setLoading(false);
    }
  };

  return (
    <Box 
      display="flex" 
      justifyContent="center" 
      alignItems="center" 
      minHeight="100vh"
    >
      <Paper elevation={3} sx={{ p: 4, maxWidth: 400, width: '100%' }}>
        <Box textAlign="center" mb={3}>
          <AccountCircle sx={{ fontSize: 60, color: 'primary.main', mb: 2 }} />
          <Typography variant="h4" gutterBottom>
            Supervisor Dashboard
          </Typography>
          <Typography variant="body2" color="text.secondary">
            Sign in to monitor your team
          </Typography>
        </Box>
        
        <form onSubmit={handleSubmit}>
          <TextField
            fullWidth
            label="Supervisor Code"
            placeholder="e.g., SP001"
            value={supervisorCode}
            onChange={(e) => setSupervisorCode(e.target.value.toUpperCase())}
            margin="normal"
            required
            disabled={loading}
          />
          
          <Button
            type="submit"
            fullWidth
            variant="contained"
            size="large"
            disabled={loading}
            sx={{ mt: 3 }}
          >
            {loading ? <CircularProgress size={24} /> : 'Sign In'}
          </Button>
          
          {error && (
            <Alert severity="error" sx={{ mt: 2 }}>
              {error}
            </Alert>
          )}
        </form>
        
        <Box mt={3} textAlign="center">
          <Typography variant="caption" color="text.secondary">
            Test Credentials: SP001, SP002, SP003
          </Typography>
        </Box>
      </Paper>
    </Box>
  );
}

export default LoginForm;
```

### **📊 Dashboard.js - Main Layout**
```javascript
// src/components/Dashboard.js
import React, { useState } from 'react';
import {
  Grid, AppBar, Toolbar, Typography, Button, Box, Chip
} from '@mui/material';
import { Logout, People, Message } from '@mui/icons-material';
import TeamOverview from './TeamOverview';
import AgentCard from './AgentCard';
import MessagePanel from './MessagePanel';
import StatusFilter from './StatusFilter';

function Dashboard({ supervisor, teamData, messages, onSendMessage }) {
  const [statusFilter, setStatusFilter] = useState('All');
  const [showMessagePanel, setShowMessagePanel] = useState(false);

  // กรองข้อมูล agent ตาม status filter
  const filteredAgents = teamData.filter(agent => 
    statusFilter === 'All' || agent.currentStatus === statusFilter
  );

  // สถิติทีม
  const teamStats = {
    total: teamData.length,
    online: teamData.filter(a => a.isOnline).length,
    available: teamData.filter(a => a.currentStatus === 'Available').length,
    busy: teamData.filter(a => a.currentStatus === 'Busy').length
  };

  return (
    <>
      {/* App Bar */}
      <AppBar position="static" elevation={1}>
        <Toolbar>
          <People sx={{ mr: 1 }} />
          <Typography variant="h6" sx={{ flexGrow: 1 }}>
            {supervisor.name} - {supervisor.teamName}
          </Typography>
          <Chip 
            label={`${teamStats.online}/${teamStats.total} Online`}
            color="success"
            variant="outlined"
            sx={{ mr: 2, color: 'white', borderColor: 'white' }}
          />
          <Button 
            color="inherit" 
            startIcon={<Message />}
            onClick={() => setShowMessagePanel(true)}
            sx={{ mr: 1 }}
          >
            Messages
          </Button>
          <Button color="inherit" startIcon={<Logout />}>
            Logout
          </Button>
        </Toolbar>
      </AppBar>

      <Box sx={{ mt: 3 }}>
        <Grid container spacing={3}>
          {/* Team Overview */}
          <Grid item xs={12}>
            <TeamOverview stats={teamStats} />
          </Grid>

          {/* Status Filter */}
          <Grid item xs={12}>
            <StatusFilter 
              currentFilter={statusFilter}
              onFilterChange={setStatusFilter}
              stats={teamStats}
            />
          </Grid>

          {/* Agent Cards */}
          <Grid item xs={12}>
            <Grid container spacing={2}>
              {filteredAgents.map(agent => (
                <Grid item xs={12} sm={6} md={4} lg={3} key={agent.agentCode}>
                  <AgentCard 
                    agent={agent} 
                    onSendMessage={(content) => onSendMessage({
                      type: 'direct',
                      to: agent.agentCode,
                      content
                    })}
                  />
                </Grid>
              ))}
            </Grid>
          </Grid>
        </Grid>
      </Box>

      {/* Message Panel Modal */}
      <MessagePanel
        open={showMessagePanel}
        onClose={() => setShowMessagePanel(false)}
        teamData={teamData}
        messages={messages}
        onSendMessage={onSendMessage}
      />
    </>
  );
}

export default Dashboard;
```

### **🏷️ AgentCard.js - Agent Status Display**
```javascript
// src/components/AgentCard.js
import React, { useState } from 'react';
import {
  Card, CardContent, Typography, Chip, IconButton, 
  Tooltip, Box, Button, Dialog, DialogTitle, DialogContent,
  DialogActions, TextField
} from '@mui/material';
import { 
  Circle, Message, Person, AccessTime, 
  CheckCircle, Cancel, Pause, PowerOff 
} from '@mui/icons-material';
import { getStatusColor, getStatusIcon, formatTimeAgo } from '../utils/statusUtils';

function AgentCard({ agent, onSendMessage }) {
  const [messageDialog, setMessageDialog] = useState(false);
  const [messageContent, setMessageContent] = useState('');

  const handleSendMessage = () => {
    if (messageContent.trim()) {
      onSendMessage(messageContent);
      setMessageContent('');
      setMessageDialog(false);
    }
  };

  const StatusIcon = getStatusIcon(agent.currentStatus);
  const statusColor = getStatusColor(agent.currentStatus);

  return (
    <>
      <Card 
        elevation={2}
        sx={{ 
          border: agent.isOnline ? `2px solid ${statusColor}` : '2px solid #ccc',
          opacity: agent.isOnline ? 1 : 0.7
        }}
      >
        <CardContent>
          {/* Agent Info */}
          <Box display="flex" alignItems="center" mb={2}>
            <Person sx={{ mr: 1, color: 'text.secondary' }} />
            <Box flexGrow={1}>
              <Typography variant="h6" noWrap>
                {agent.agentName}
              </Typography>
              <Typography variant="caption" color="text.secondary">
                {agent.agentCode}
              </Typography>
            </Box>
            {agent.isOnline && (
              <Circle sx={{ fontSize: 12, color: 'success.main' }} />
            )}
          </Box>

          {/* Current Status */}
          <Box display="flex" alignItems="center" mb={2}>
            <StatusIcon sx={{ mr: 1, color: statusColor }} />
            <Chip
              label={agent.currentStatus}
              size="small"
              sx={{ 
                backgroundColor: statusColor,
                color: 'white',
                fontWeight: 'bold'
              }}
            />
          </Box>

          {/* Last Update */}
          <Box display="flex" alignItems="center" mb={2}>
            <AccessTime sx={{ mr: 1, fontSize: 16, color: 'text.secondary' }} />
            <Typography variant="caption" color="text.secondary">
              {agent.isOnline 
                ? `Updated ${formatTimeAgo(agent.lastUpdate)}`
                : `Last seen ${formatTimeAgo(agent.lastSeen)}`
              }
            </Typography>
          </Box>

          {/* Actions */}
          <Box display="flex" justifyContent="space-between">
            <Button
              size="small"
              startIcon={<Message />}
              onClick={() => setMessageDialog(true)}
              disabled={!agent.isOnline}
            >
              Message
            </Button>
            <Tooltip title={agent.isOnline ? 'Online' : 'Offline'}>
              <Chip
                size="small"
                label={agent.isOnline ? 'Online' : 'Offline'}
                color={agent.isOnline ? 'success' : 'default'}
                variant="outlined"
              />
            </Tooltip>
          </Box>
        </CardContent>
      </Card>

      {/* Send Message Dialog */}
      <Dialog 
        open={messageDialog} 
        onClose={() => setMessageDialog(false)}
        maxWidth="sm"
        fullWidth
      >
        <DialogTitle>
          Send Message to {agent.agentName}
        </DialogTitle>
        <DialogContent>
          <TextField
            fullWidth
            multiline
            rows={3}
            label="Message"
            value={messageContent}
            onChange={(e) => setMessageContent(e.target.value)}
            margin="normal"
            placeholder="Type your message here..."
          />
        </DialogContent>
        <DialogActions>
          <Button onClick={() => setMessageDialog(false)}>
            Cancel
          </Button>
          <Button 
            onClick={handleSendMessage}
            variant="contained"
            disabled={!messageContent.trim()}
          >
            Send
          </Button>
        </DialogActions>
      </Dialog>
    </>
  );
}

export default AgentCard;
```

---

## 🎨 **Material-UI Theming**

### **🌈 theme.js - Main Theme Configuration**
```javascript
// src/theme/theme.js
import { createTheme } from '@mui/material/styles';

const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',      // Blue
      light: '#42a5f5',
      dark: '#1565c0',
    },
    secondary: {
      main: '#dc004e',      // Pink
    },
    success: {
      main: '#4caf50',      // Green for Available
    },
    warning: {
      main: '#ff9800',      // Orange for Busy
    },
    info: {
      main: '#2196f3',      // Blue for Break
    },
    error: {
      main: '#f44336',      // Red for alerts
    },
    background: {
      default: '#f5f5f5',
      paper: '#ffffff',
    },
  },
  typography: {
    fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
    h4: {
      fontWeight: 600,
    },
    h6: {
      fontWeight: 500,
    },
  },
  components: {
    MuiCard: {
      styleOverrides: {
        root: {
          borderRadius: 8,
          transition: 'box-shadow 0.2s',
          '&:hover': {
            boxShadow: '0 4px 20px rgba(0,0,0,0.12)',
          },
        },
      },
    },
    MuiButton: {
      styleOverrides: {
        root: {
          borderRadius: 6,
          textTransform: 'none',
          fontWeight: 500,
        },
      },
    },
    MuiChip: {
      styleOverrides: {
        root: {
          borderRadius: 6,
        },
      },
    },
  },
});

export default theme;
```

### **🎨 colors.js - Status Colors**
```javascript
// src/theme/colors.js
export const statusColors = {
  Available: '#4caf50',    // Green
  Busy: '#ff9800',         // Orange  
  Break: '#2196f3',        // Blue
  Offline: '#9e9e9e',      // Gray
};

export const getStatusColor = (status) => {
  return statusColors[status] || statusColors.Offline;
};
```

---

## 🔗 **Services - API และ WebSocket**

### **🌐 api.js - HTTP API Calls**
```javascript
// src/services/api.js
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';

export const loginSupervisor = async (supervisorCode) => {
  const response = await fetch(`${API_BASE_URL}/auth/login`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ 
      supervisorCode,
      type: 'supervisor' 
    })
  });

  if (!response.ok) {
    throw new Error('Login failed');
  }

  return response.json();
};

export const getTeamData = async (supervisorCode) => {
  const response = await fetch(`${API_BASE_URL}/teams/${supervisorCode}/agents`);
  return response.json();
};

export const sendMessage = async (messageData) => {
  const response = await fetch(`${API_BASE_URL}/messages/send`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(messageData)
  });

  return response.json();
};
```

### **⚡ socket.js - WebSocket Connection**
```javascript
// src/services/socket.js
import io from 'socket.io-client';

const SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:3001';
let socket = null;

export const connectSocket = (supervisorCode) => {
  socket = io(SOCKET_URL, {
    query: { 
      supervisorCode, 
      type: 'supervisor' 
    }
  });

  socket.on('connect', () => {
    console.log('Supervisor connected to server');
    // Join supervisor room
    socket.emit('join_supervisor_room', { supervisorCode });
  });

  socket.on('disconnect', () => {
    console.log('Supervisor disconnected from server');
  });

  // เก็บ socket ไว้ใน global scope
  window.socket = socket;
  
  return socket;
};

export const disconnectSocket = () => {
  if (socket) {
    socket.disconnect();
    socket = null;
    window.socket = null;
  }
};
```

---

## 🎣 **Custom Hooks สำหรับ State Management**

### **🔌 useSocket.js - WebSocket Hook**
```javascript
// src/hooks/useSocket.js
import { useEffect, useRef } from 'react';
import { connectSocket, disconnectSocket } from '../services/socket';

export const useSocket = (supervisorCode, onConnect) => {
  const socketRef = useRef(null);

  useEffect(() => {
    if (supervisorCode) {
      socketRef.current = connectSocket(supervisorCode);
      
      if (onConnect) {
        socketRef.current.on('connect', onConnect);
      }

      return () => {
        disconnectSocket();
      };
    }
  }, [supervisorCode, onConnect]);

  return socketRef.current;
};
```

---

## 🛠️ **Utils - Helper Functions**

### **📊 statusUtils.js - Status Helpers**
```javascript
// src/utils/statusUtils.js
import { 
  CheckCircle, Cancel, Pause, PowerOff 
} from '@mui/icons-material';

export const getStatusColor = (status) => {
  const colors = {
    Available: '#4caf50',
    Busy: '#ff9800', 
    Break: '#2196f3',
    Offline: '#9e9e9e'
  };
  return colors[status] || colors.Offline;
};

export const getStatusIcon = (status) => {
  const icons = {
    Available: CheckCircle,
    Busy: Cancel,
    Break: Pause,
    Offline: PowerOff
  };
  return icons[status] || icons.Offline;
};

export const formatTimeAgo = (timestamp) => {
  const now = new Date();
  const time = new Date(timestamp);
  const diffInSeconds = Math.floor((now - time) / 1000);

  if (diffInSeconds < 60) return 'just now';
  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;
  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;
  return `${Math.floor(diffInSeconds / 86400)}d ago`;
};
```

---

## 🚀 **Package.json และ Scripts**

### **📦 package.json Example**
```json
{
  "name": "supervisor-dashboard",
  "version": "1.0.0",
  "description": "Supervisor Dashboard for Agent Wallboard System",
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1",
    "@mui/material": "^5.14.0",
    "@mui/icons-material": "^5.14.0",
    "@emotion/react": "^11.11.0",
    "@emotion/styled": "^11.11.0",
    "socket.io-client": "^4.7.2"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}
```

---

## 🧪 **Development และ Testing**

### **🔧 Development Scripts**
```bash
# เริ่ม development server
npm start

# Build สำหรับ production
npm run build

# Test components
npm test
```

### **✅ Dashboard Testing Checklist**
```bash
📋 Supervisor Dashboard Testing:
├── ✅ เปิดใน browser ได้ที่ http://localhost:3000
├── ✅ Login ด้วย supervisor code ได้ (SP001, SP002, SP003)
├── ✅ แสดงรายการ agents ในทีม
├── ✅ แสดง real-time status updates
├── ✅ Filter agents ตาม status ได้
├── ✅ ส่งข้อความถึง agent ได้
├── ✅ แสดง online/offline status
├── ✅ Responsive design ทำงานได้
└── ✅ Material-UI theming แสดงผลถูกต้อง
```

---

## 🎯 **สิ่งที่นักศึกษาจะแก้ไข/เพิ่มเติม**

### **Week 1: ทำความเข้าใจและปรับแต่งพื้นฐาน**
- ✅ ทดสอบ dashboard ให้ทำงานได้
- 🎨 ปรับ Material-UI theme และ colors
- 📊 เพิ่ม team statistics และ charts
- 🔔 ปรับปรุง notification system

### **Week 2: เพิ่มฟีเจอร์ใหม่**
- 📈 Dashboard analytics และ reports
- 💬 Message templates และ quick replies
- 👥 Agent profiles และ detailed view
- ⚙️ Dashboard settings และ preferences

---

## 📞 **Troubleshooting**

### **❌ Common Issues และแก้ไข**

**Issue 1: "Material-UI not loading properly"**
```bash
# ลง dependencies ใหม่
npm install @mui/material @emotion/react @emotion/styled
npm install @mui/icons-material
```

**Issue 2: "Dashboard shows no data"**
```bash
# ตรวจสอบ API connection
curl http://localhost:3001/api/teams/SP001/agents

# ตรวจสอบ .env file
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SOCKET_URL=http://localhost:3001
```

**Issue 3: "Real-time updates not working"**
```bash
# ตรวจสอบ WebSocket connection ใน browser console
# Should see: "Supervisor connected to server"

# ตรวจสอบ backend WebSocket
curl http://localhost:3001/health
```

---

## ✅ **Summary**

**🎉 Supervisor Dashboard ที่ได้:**
- ⚛️ **React application** พร้อม Material-UI components
- 🔐 **Login system** สำหรับ supervisors
- 📊 **Real-time dashboard** แสดงสถานะทีม
- 👥 **Agent management** พร้อม status monitoring
- 💬 **Message system** สำหรับสื่อสารกับ agents
- 🎨 **Material-UI theming** ที่ปรับแต่งได้
- 📱 **Responsive design** ใช้งานได้ทุกอุปกรณ์

**💡 Next Steps:**
1. ทดสอบ dashboard ร่วมกับ Agent Desktop App
2. ปรับแต่ง UI/UX ให้เหมาะกับการใช้งานจริง
3. เพิ่ม analytics และ reporting features

---

## 🔄 **Integration Testing กับ Agent Desktop**

### **🧪 End-to-End Testing Scenario**
```bash
1. 🌐 เปิด Supervisor Dashboard (http://localhost:3000)
2. 🖥️ เปิด Agent Desktop App (Electron)
3. 🔐 Login supervisor ด้วย SP001
4. 🔐 Login agent ด้วย AG001, AG002
5. 📊 ตรวจสอบ agents ปรากฏใน dashboard
6. 🔄 เปลี่ยน status ใน agent → ดู real-time update ใน dashboard
7. 💬 ส่งข้อความจาก supervisor → ดู notification ใน agent
8. 🔌 ปิด agent app → ดู offline status ใน dashboard
```

### **📊 Expected Results**
- **Real-time Status Updates:** เมื่อ agent เปลี่ยน status, dashboard แสดงผลทันที
- **Online/Offline Detection:** เมื่อ agent เชื่อมต่อ/ตัดการเชื่อมต่อ
- **Message Delivery:** ข้อความส่งถึง agent และแสดง notification
- **Team Statistics:** สถิติทีมอัพเดทแบบ real-time

---

## 📋 **Component Reference Guide**

### **🗂️ Quick Component Overview**

**LoginForm.js:**
- Purpose: Supervisor authentication
- Key Props: `onLogin`
- Features: Validation, loading states, error handling

**Dashboard.js:**
- Purpose: Main layout และ navigation
- Key Props: `supervisor`, `teamData`, `messages`, `onSendMessage`
- Features: App bar, team stats, agent grid, message panel

**AgentCard.js:**
- Purpose: แสดงข้อมูล agent แต่ละคน
- Key Props: `agent`, `onSendMessage`
- Features: Status display, online indicator, message dialog

**TeamOverview.js:**
- Purpose: แสดงสถิติรวมของทีม
- Key Props: `stats`
- Features: Total/online/available counts, progress indicators

**MessagePanel.js:**
- Purpose: ส่งข้อความและดู history
- Key Props: `teamData`, `messages`, `onSendMessage`
- Features: Direct/broadcast messaging, message history

**StatusFilter.js:**
- Purpose: กรอง agents ตาม status
- Key Props: `currentFilter`, `onFilterChange`, `stats`
- Features: Filter buttons with counts

---

## 🎨 **UI Customization Examples**

### **🌈 Custom Theme Colors**
```javascript
// src/theme/theme.js - เปลี่ยนสีหลัก
const customTheme = createTheme({
  palette: {
    primary: {
      main: '#6366f1',      // Indigo
    },
    secondary: {
      main: '#ec4899',      // Pink
    },
    // เพิ่มสีสำหรับ status
    status: {
      available: '#10b981',  // Emerald
      busy: '#f59e0b',       // Amber
      break: '#3b82f6',      // Blue
      offline: '#6b7280',    // Gray
    }
  }
});
```

### **📱 Custom Component Styling**
```javascript
// เพิ่มใน components/AgentCard.js
const CustomCard = styled(Card)(({ theme, status }) => ({
  border: `2px solid ${getStatusColor(status)}`,
  borderRadius: 12,
  transition: 'all 0.3s ease',
  '&:hover': {
    transform: 'translateY(-4px)',
    boxShadow: '0 8px 25px rgba(0,0,0,0.15)',
  }
}));
```

---

## 🔧 **Advanced Features (Week 2)**

### **📈 Team Analytics Component**
```javascript
// src/components/TeamAnalytics.js
import React from 'react';
import { Card, CardContent, Typography, LinearProgress, Box } from '@mui/material';

function TeamAnalytics({ teamData }) {
  const calculateUtilization = () => {
    const activeAgents = teamData.filter(a => 
      a.isOnline && (a.currentStatus === 'Available' || a.currentStatus === 'Busy')
    ).length;
    return (activeAgents / teamData.length) * 100;
  };

  const utilization = calculateUtilization();

  return (
    <Card>
      <CardContent>
        <Typography variant="h6" gutterBottom>
          Team Performance
        </Typography>
        
        <Box mb={2}>
          <Typography variant="body2" color="text.secondary" gutterBottom>
            Team Utilization: {utilization.toFixed(1)}%
          </Typography>
          <LinearProgress 
            variant="determinate" 
            value={utilization}
            sx={{ height: 8, borderRadius: 4 }}
          />
        </Box>

        {/* เพิ่ม metrics อื่น ๆ */}
      </CardContent>
    </Card>
  );
}

export default TeamAnalytics;
```

### **💬 Message Templates**
```javascript
// src/components/MessageTemplates.js
import React from 'react';
import { Chip, Box, Typography } from '@mui/material';

const QUICK_TEMPLATES = [
  "Good morning! Ready for the day?",
  "Please update your status",
  "Team meeting in 15 minutes",
  "Great work today!",
  "Please check your queue"
];

function MessageTemplates({ onSelectTemplate }) {
  return (
    <Box>
      <Typography variant="subtitle2" gutterBottom>
        Quick Templates:
      </Typography>
      <Box display="flex" flexWrap="wrap" gap={1}>
        {QUICK_TEMPLATES.map((template, index) => (
          <Chip
            key={index}
            label={template}
            onClick={() => onSelectTemplate(template)}
            variant="outlined"
            size="small"
            clickable
          />
        ))}
      </Box>
    </Box>
  );
}

export default MessageTemplates;
```

---

## 🌐 **Environment Configuration**

### **🔧 .env.example**
```bash
# API Configuration
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SOCKET_URL=http://localhost:3001

# Dashboard Configuration
REACT_APP_REFRESH_INTERVAL=5000
REACT_APP_MESSAGE_HISTORY_LIMIT=100

# Feature Flags
REACT_APP_ENABLE_ANALYTICS=true
REACT_APP_ENABLE_NOTIFICATIONS=true
REACT_APP_DEBUG_MODE=false

# UI Configuration
REACT_APP_THEME=default
REACT_APP_AUTO_REFRESH=true
```

### **⚙️ Development vs Production**
```javascript
// src/config/environment.js
const config = {
  development: {
    API_URL: 'http://localhost:3001/api',
    SOCKET_URL: 'http://localhost:3001',
    DEBUG: true
  },
  production: {
    API_URL: '/api',
    SOCKET_URL: window.location.origin,
    DEBUG: false
  }
};

export default config[process.env.NODE_ENV] || config.development;
```

---

## 🚀 **Deployment Considerations**

### **📦 Build สำหรับ Production**
```bash
# Create production build
npm run build

# Test production build locally
npx serve -s build -l 3000

# Build optimization
npm install --save-dev compression webpack-bundle-analyzer
```

### **🌐 Web Server Configuration**
```nginx
# nginx.conf สำหรับ production deployment
server {
    listen 80;
    server_name your-dashboard-domain.com;
    
    root /var/www/supervisor-dashboard/build;
    index index.html;
    
    # Handle React Router
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # API proxy
    location /api {
        proxy_pass http://localhost:3001/api;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # WebSocket proxy
    location /socket.io {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

---

## 📚 **Learning Resources**

### **📖 Recommended Reading**
- **React Documentation:** https://react.dev/
- **Material-UI Guide:** https://mui.com/material-ui/getting-started/
- **Socket.io Client:** https://socket.io/docs/v4/client-api/
- **React Hooks Guide:** https://react.dev/reference/react

### **🛠️ Useful Tools**
- **React DevTools:** Browser extension สำหรับ debug React
- **Material-UI Theme Creator:** https://mui.com/material-ui/customization/theming/
- **Socket.io Tester:** Browser extension สำหรับทดสอบ WebSocket
- **Lighthouse:** ตรวจสอบ performance และ accessibility

### **💡 Best Practices**
- **Component Organization:** แยก components ตาม responsibility
- **State Management:** ใช้ React Context สำหรับ global state
- **Error Handling:** ใส่ try-catch และ error boundaries
- **Performance:** ใช้ React.memo สำหรับ expensive components
- **Accessibility:** ใส่ aria-labels และ keyboard navigation

---

## 🎓 **Learning Path สำหรับนักศึกษา**

### **📅 Week 1: Foundation**
**Day 1-2:** ทำความเข้าใจ React basics และ Material-UI
**Day 3-4:** ศึกษา WebSocket integration และ real-time updates
**Day 5-7:** ปรับแต่ง UI และทดสอบ basic features

### **📅 Week 2: Enhancement**
**Day 8-10:** เพิ่ม analytics และ advanced features
**Day 11-12:** ปรับปรุง performance และ error handling
**Day 13-14:** Testing, documentation, และ deployment preparation

### **🎯 Assessment Criteria**
- **Functionality (40%):** Features ทำงานได้ถูกต้อง
- **UI/UX (25%):** Interface สวยงามและใช้งานง่าย
- **Code Quality (20%):** โค้ดเป็นระเบียบและมี comments
- **Innovation (15%):** เพิ่มฟีเจอร์ใหม่หรือปรับปรุงที่น่าสนใจ

**Happy Coding! 🚀✨**